<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>OGC City Geography Markup Language (CityGML) 3.0 Conceptual Model Users Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong class="big">Open Geospatial Consortium</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Submission Date: &lt;yyyy-mm-dd&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Approval Date:   &lt;yyyy-mm-dd&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Publication Date:   &lt;2020-12-11&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">External identifier of this OGC&#174; document: <a href="http://www.opengis.net/doc/EG/CityGML/3.0" class="bare">http://www.opengis.net/doc/EG/CityGML/3.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Internal reference number of this OGC&#174; document:    20-066</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Version: 0.1</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Category: OGC&#174; Engineering Guidance</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Editor:   Charles Heazel</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong class="big">OGC City Geography Markup Language (CityGML) 3.0 Conceptual Model Users Guide</strong></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Copyright notice</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Copyright &#169; 2020 Open Geospatial Consortium</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">To obtain additional rights of use, visit <a href="http://www.opengeospatial.org/legal/" class="bare">http://www.opengeospatial.org/legal/</a></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Warning</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This document is not an OGC Standard. This document provides Engineering Guidance on the use of the PGC CityGML: 3.0 Conceptual Model Standard. This document is a non-normative resource and not an official position of the OGC membership. It is subject to change without notice and may not be referred to as an OGC Standard. Further, Engineering Guidance should not be referenced as required or mandatory technology in procurements.</p>
</div>
<table class="tableblock frame-all grid-none" style="width: 50%;">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document type:   	OGC®Engineering Guidance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document subtype:   </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document stage:   	Draft</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document language: 	English</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>License Agreement</p>
</div>
<div class="paragraph">
<p><span class="small">Permission is hereby granted by the Open Geospatial Consortium, ("Licensor"), free of charge and subject to the terms set forth below, to any person obtaining a copy of this Intellectual Property and any associated documentation, to deal in the Intellectual Property without restriction (except as set forth below), including without limitation the rights to implement, use, copy, modify, merge, publish, distribute, and/or sublicense copies of the Intellectual Property, and to permit persons to whom the Intellectual Property is furnished to do so, provided that all copyright notices on the intellectual property are retained intact and that each person to whom the Intellectual Property is furnished agrees to the terms of this Agreement.</span></p>
</div>
<div class="paragraph">
<p><span class="small">If you modify the Intellectual Property, all copies of the modified Intellectual Property must include, in addition to the above copyright notice, a notice that the Intellectual Property includes modifications that have not been approved or adopted by LICENSOR.</span></p>
</div>
<div class="paragraph">
<p><span class="small">THIS LICENSE IS A COPYRIGHT LICENSE ONLY, AND DOES NOT CONVEY ANY RIGHTS UNDER ANY PATENTS THAT MAY BE IN FORCE ANYWHERE IN THE WORLD.</span></p>
</div>
<div class="paragraph">
<p><span class="small">THE INTELLECTUAL PROPERTY IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE COPYRIGHT HOLDER OR HOLDERS INCLUDED IN THIS NOTICE DO NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE INTELLECTUAL PROPERTY WILL MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE INTELLECTUAL PROPERTY WILL BE UNINTERRUPTED OR ERROR FREE. ANY USE OF THE INTELLECTUAL PROPERTY SHALL BE MADE ENTIRELY AT THE USER’S OWN RISK. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR ANY CONTRIBUTOR OF INTELLECTUAL PROPERTY RIGHTS TO THE INTELLECTUAL PROPERTY BE LIABLE FOR ANY CLAIM, OR ANY DIRECT, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING FROM ANY ALLEGED INFRINGEMENT OR ANY LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR UNDER ANY OTHER LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH THE IMPLEMENTATION, USE, COMMERCIALIZATION OR PERFORMANCE OF THIS INTELLECTUAL PROPERTY.</span></p>
</div>
<div class="paragraph">
<p><span class="small">This license is effective until terminated. You may terminate it at any time by destroying the Intellectual Property together with all copies in any form. The license will also terminate if you fail to comply with any term or condition of this Agreement. Except as provided in the following sentence, no such termination of this license shall require the termination of any third party end-user sublicense to the Intellectual Property which is in force as of the date of notice of such termination. In addition, should the Intellectual Property, or the operation of the Intellectual Property, infringe, or in LICENSOR&#8217;s sole opinion be likely to infringe, any patent, copyright, trademark or other right of a third party, you agree that LICENSOR, in its sole discretion, may terminate this license without any compensation or liability to you, your licensees or any other party. You agree upon termination of any kind to destroy or cause to be destroyed the Intellectual Property together with all copies in any form, whether held by you or by any third party.</span></p>
</div>
<div class="paragraph">
<p><span class="small">Except as contained in this notice, the name of LICENSOR or of any other holder of a copyright in all or part of the Intellectual Property shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Intellectual Property without prior written authorization of LICENSOR or such copyright holder. LICENSOR is and shall at all times be the sole entity that may authorize you or any third party to use certification marks, trademarks or other special designations to indicate compliance with any LICENSOR standards or specifications. This Agreement is governed by the laws of the Commonwealth of Massachusetts. The application to this Agreement of the United Nations Convention on Contracts for the International Sale of Goods is hereby expressly excluded. In the event any provision of this Agreement shall be deemed unenforceable, void or invalid, such provision shall be modified so as to make it valid and enforceable, and as so modified the entire Agreement shall remain in full force and effect. No decision, action or inaction by LICENSOR shall be construed to be a waiver of any rights or remedies available to it.</span></p>
</div>
<div style="page-break-after: always;"></div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#ug_introduction_section">1. Introduction</a></li>
<li><a href="#ug_scope_section">2. Scope</a></li>
<li><a href="#ug_references_section">3. References</a></li>
<li><a href="#_terms_and_definitions">Terms and Definitions</a></li>
<li><a href="#ug_general_principles_section">4. General Principles</a>
<ul class="sectlevel2">
<li><a href="#ug_modularization_section">4.1. Modularization</a>
<ul class="sectlevel3">
<li><a href="#_citygml_core_and_extension_modules">4.1.1. CityGML core and extension modules</a></li>
<li><a href="#_citygml_profiles">4.1.2. CityGML profiles</a></li>
</ul>
</li>
<li><a href="#ug_general_modeling_principles_section">4.2. General Modeling Principles</a></li>
<li><a href="#ug_spatial-temporal-fundamentals_section">4.3. Spatial-Temporal Fundamentals</a>
<ul class="sectlevel3">
<li><a href="#_geometric_topological_model">4.3.1. Geometric-topological model</a></li>
<li><a href="#_spatial_reference_system">4.3.2. Spatial reference system</a></li>
<li><a href="#_implicit_geometries_prototypic_objects_scene_graph_concepts">4.3.3. Implicit geometries, prototypic objects, scene graph concepts</a></li>
</ul>
</li>
<li><a href="#ug_core_model_section">4.4. CityGML Core Model</a></li>
<li><a href="#ug_appearances_section">4.5. Appearances</a></li>
<li><a href="#ug_dynamics_section">4.6. Modeling Dynamic Data</a></li>
<li><a href="#ug_extensions_section">4.7. CityGML Extension Mechanisms</a>
<ul class="sectlevel3">
<li><a href="#extensions-section-codelists">4.7.1. Code Lists</a></li>
<li><a href="#extensions-section-genericobjects">4.7.2. Generic Objects and Attributes</a></li>
<li><a href="#extensions-section-ade">4.7.3. Application Domain Extension (ADE)</a></li>
</ul>
</li>
<li><a href="#ug_conceptual-modeling_section">4.8. Conceptual Modeling</a></li>
</ul>
</li>
<li><a href="#ug_citygml_uml_model_section">5. CityGML UML Model</a>
<ul class="sectlevel2">
<li><a href="#ug_model_overview_section">5.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#conceptual-modeling-description">5.1.1. Conceptual Modelling</a></li>
<li><a href="#_from_citygml_2">5.1.2. From CityGML 2</a></li>
</ul>
</li>
<li><a href="#ug_model_core_section">5.2. Core</a>
<ul class="sectlevel3">
<li><a href="#_base_elements">5.2.1. Base elements</a></li>
<li><a href="#_generalisation_relation_relativetoterraintype_and_relativetowatertype">5.2.2. Generalisation relation, RelativeToTerrainType and RelativeToWaterType</a></li>
<li><a href="#_external_references">5.2.3. External references</a></li>
<li><a href="#_address_information">5.2.4. Address information</a></li>
</ul>
</li>
<li><a href="#ug_model_appearance_section">5.3. Appearance</a>
<ul class="sectlevel3">
<li><a href="#_relation_between_appearances_features_and_geometry">5.3.1. Relation between appearances, features and geometry</a></li>
<li><a href="#_appearance_and_surfacedata">5.3.2. Appearance and SurfaceData</a></li>
<li><a href="#_material">5.3.3. Material</a></li>
<li><a href="#_texture_and_texture_mapping">5.3.4. Texture and texture mapping</a></li>
<li><a href="#_related_concepts">5.3.5. Related concepts</a></li>
<li><a href="#_code_lists_2">5.3.6. Code lists</a></li>
</ul>
</li>
<li><a href="#ug_model_bridge_section">5.4. Bridge Model</a>
<ul class="sectlevel3">
<li><a href="#_bridge_and_bridge_part">5.4.1. Bridge and bridge part</a></li>
<li><a href="#_bridge_construction_elements_and_bridge_installations">5.4.2. Bridge construction elements and bridge installations</a></li>
<li><a href="#_boundary_surfaces">5.4.3. Boundary surfaces</a></li>
<li><a href="#_openings">5.4.4. Openings</a></li>
<li><a href="#_bridge_interior">5.4.5. Bridge Interior</a></li>
<li><a href="#_examples">5.4.6. Examples</a></li>
</ul>
</li>
<li><a href="#ug_model_building_section">5.5. Building Model</a>
<ul class="sectlevel3">
<li><a href="#_building_and_building_part">5.5.1. Building and Building Part</a></li>
<li><a href="#_outer_building_installations">5.5.2. Outer building installations</a></li>
<li><a href="#_boundary_surfaces_2">5.5.3. Boundary surfaces</a></li>
<li><a href="#_openings_2">5.5.4. Openings</a></li>
<li><a href="#_building_interior">5.5.5. Building Interior</a></li>
<li><a href="#_modelling_building_storeys_using_cityobjectgroups">5.5.6. Modelling building storeys using CityObjectGroups</a></li>
<li><a href="#_examples_2">5.5.7. Examples</a></li>
</ul>
</li>
<li><a href="#ug_model_city-furniture_section">5.6. City Furniture</a>
<ul class="sectlevel3">
<li><a href="#_city_furniture_object">5.6.1. City furniture object</a></li>
<li><a href="#_code_lists_3">5.6.2. Code lists</a></li>
<li><a href="#_example_citygml_dataset">5.6.3. Example CityGML dataset</a></li>
</ul>
</li>
<li><a href="#ug_model_city-object-group_section">5.7. City Object Group</a>
<ul class="sectlevel3">
<li><a href="#_city_object_group">5.7.1. City object group</a></li>
<li><a href="#_code_lists_4">5.7.2. Code lists</a></li>
</ul>
</li>
<li><a href="#ug_model_construction_section">5.8. Construction</a></li>
<li><a href="#ug_model_dynamizer_section">5.9. Dynamizer</a></li>
<li><a href="#ug_model_generics_section">5.10. Generics</a>
<ul class="sectlevel3">
<li><a href="#_generic_city_object">5.10.1. Generic city object</a></li>
<li><a href="#_generic_attributes">5.10.2. Generic attributes</a></li>
<li><a href="#_code_lists_5">5.10.3. Code lists</a></li>
</ul>
</li>
<li><a href="#ug_model_land-use_section">5.11. Land Use</a>
<ul class="sectlevel3">
<li><a href="#_land_use_object">5.11.1. Land use object</a></li>
<li><a href="#_code_lists_6">5.11.2. Code lists</a></li>
</ul>
</li>
<li><a href="#ug_model_point-cloud_section">5.12. Point Cloud</a>
<ul class="sectlevel3">
<li><a href="#_relief_feature_and_relief_component">5.12.1. Relief feature and relief component</a></li>
<li><a href="#_tin_relief">5.12.2. TIN relief</a></li>
<li><a href="#_raster_relief">5.12.3. Raster relief</a></li>
<li><a href="#_mass_point_relief">5.12.4. Mass point relief</a></li>
<li><a href="#_breakline_relief">5.12.5. Breakline relief</a></li>
</ul>
</li>
<li><a href="#ug_model_relief_section">5.13. Relief</a>
<ul class="sectlevel3">
<li><a href="#_relief_feature_and_relief_component_2">5.13.1. Relief feature and relief component</a></li>
<li><a href="#_tin_relief_2">5.13.2. TIN relief</a></li>
<li><a href="#_raster_relief_2">5.13.3. Raster relief</a></li>
<li><a href="#_mass_point_relief_2">5.13.4. Mass point relief</a></li>
<li><a href="#_breakline_relief_2">5.13.5. Breakline relief</a></li>
</ul>
</li>
<li><a href="#ug_model_transportation_section">5.14. Transportation</a>
<ul class="sectlevel3">
<li><a href="#_transporatation_complex">5.14.1. Transporatation Complex</a></li>
<li><a href="#_subclasses_of_transportation_complexes">5.14.2. Subclasses of Transportation Complexes</a></li>
<li><a href="#_squaretype_square">5.14.3. SquareType, Square</a></li>
<li><a href="#_subdivisions_of_transportation_complexes">5.14.4. Subdivisions of Transportation Complexes</a></li>
</ul>
</li>
<li><a href="#ug_model_tunnel_section">5.15. Tunnel Model</a>
<ul class="sectlevel3">
<li><a href="#_tunnel_and_tunnel_part">5.15.1. Tunnel and Tunnel Part</a></li>
<li><a href="#_outer_tunnel_installations">5.15.2. Outer Tunnel Installations</a></li>
<li><a href="#_boundary_surfaces_3">5.15.3. Boundary surfaces</a></li>
<li><a href="#_openings_3">5.15.4. Openings</a></li>
<li><a href="#_tunnel_interior">5.15.5. Tunnel Interior</a></li>
<li><a href="#_examples_3">5.15.6. Examples</a></li>
</ul>
</li>
<li><a href="#ug_model_vegetation_section">5.16. Vegetation</a>
<ul class="sectlevel3">
<li><a href="#_vegetation_object">5.16.1. Vegetation Object</a></li>
<li><a href="#_solitary_vegetation_objects">5.16.2. Solitary Vegetation Objects</a></li>
<li><a href="#_plant_cover_objects">5.16.3. Plant cover objects</a></li>
<li><a href="#_code_lists_7">5.16.4. Code lists</a></li>
<li><a href="#_example_citygml_dataset_2">5.16.5. Example CityGML dataset</a></li>
</ul>
</li>
<li><a href="#ug_model_versioning_section">5.17. Versioning</a></li>
<li><a href="#ug_model_waterbody_section">5.18. Waterbodies</a>
<ul class="sectlevel3">
<li><a href="#_water_body">5.18.1. Water Body</a></li>
<li><a href="#_boundary_surfaces_4">5.18.2. Boundary surfaces</a></li>
</ul>
</li>
<li><a href="#ug_model-extension">5.19. Extensions</a>
<ul class="sectlevel3">
<li><a href="#_technical_principle_of_ades">5.19.1. Technical principle of ADEs</a></li>
<li><a href="#_example_ade">5.19.2. Example ADE</a></li>
</ul>
</li>
<li><a href="#ug_codelists_section">5.20. Code Lists</a></li>
<li><a href="#ug_metadata_section">5.21. Metadata</a></li>
</ul>
</li>
<li><a href="#_revision_history">Annex A: Revision History</a></li>
<li><a href="#Bibliography">Annex B: Bibliography</a></li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><strong class="big">i.     Abstract</strong></p>
</div>
<div class="paragraph">
<p>CityGML is an open conceptual data model for the storage and exchange of virtual 3D city models. It is defined through a Unified Modeling Language (UML) object model. This UML model extends the ISO Technical Committee 211 (TC211) conceptual model standards for spatial and temporal data. Building on the ISO fundation assures that the man-made features described in the City Models share the same spatial-temporal universe as the surrounding countryside within which they reside.</p>
</div>
<div class="paragraph">
<p>The aim of the development of CityGML is to reach a common definition of the basic entities, attributes, and relations of a 3D city model. This is especially important with respect to the cost-effective sustainable maintenance of 3D city models, allowing the reuse of the same data in different application fields.</p>
</div>
<div class="paragraph">
<p><strong class="big">ii.    Keywords</strong></p>
</div>
<div class="paragraph">
<p>The following are keywords to be used by search engines and document catalogues.</p>
</div>
<div class="paragraph">
<p>ogcdoc, OGC document, CityGML, 3D city models</p>
</div>
<div class="paragraph">
<p><strong class="big">iii.   Preface</strong></p>
</div>
<div class="paragraph">
<p>Attention is drawn to the possibility that some of the elements of this document may be the subject of patent rights. The Open Geospatial Consortium shall not be held responsible for identifying any or all such patent rights.</p>
</div>
<div class="paragraph">
<p>Recipients of this document are requested to submit, with their comments, notification of any relevant patent claims or other intellectual property rights of which they may be aware that might be infringed by any implementation of the standard set forth in this document, and to provide supporting documentation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ug_introduction_section"><a class="anchor" href="#ug_introduction_section"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An increasing number of cities and companies are building virtual 3D city models for different application areas like urban planning, mobile telecommunication, disaster management, 3D cadastre, tourism, vehicle and pedestrian navigation, facility management and environmental simulations. Furthermore, in the implementation of the European Environmental Noise Directive (END, 2002/49/EC) 3D geoinformation and 3D city models play an important role.</p>
</div>
<div class="paragraph">
<p>In recent years, most virtual 3D city models have been defined as purely graphical or geometrical models, neglecting the semantic and topological aspects. Thus, these models could almost only be used for visualisation purposes but not for thematic queries, analysis tasks, or spatial data mining. Since the limited reusability of models inhibits the broader use of 3D city models, a more general modelling approach had to be taken in order to satisfy the information needs of the various application fields.</p>
</div>
<div class="paragraph">
<p>CityGML is a common semantic information model for the representation of 3D urban objects that can be shared over different applications. The latter capability is especially important with respect to the cost-effective sustain-able maintenance of 3D city models, allowing the possibility of selling the same data to customers from different application fields. The targeted application areas explicitly include city planning, architectural design, tourist and leisure activities, environmental simulation, mobile telecommunication, disaster management, homeland securi-ty, real estate management, vehicle and pedestrian navigation, and training simulators.</p>
</div>
<div class="paragraph">
<p>CityGML is an open conceptual data model for the storage and exchange of virtual 3D city models. It is defined through a Unified Modeling Language (UML) object model. This UML model extends the ISO Technical Committee 211 (TC211) conceptual model standards for spatial and temporal data. Building on the ISO fundation assures that the man-made features described in the City Models share the same spatial-temporal universe as the surrounding countryside within which they reside.</p>
</div>
<div class="paragraph">
<p>CityGML defines the classes and relations for the most relevant topographic objects in cities and regional models with respect to their geometrical, topological, semantical, and appearance properties. “City” is broadly defined to comprise not just built structures, but also elevation, vegetation, water bodies, “city furniture”, and more. Included are generalisation hierarchies between thematic classes, aggregations, relations between objects, and spatial properties. CityGML is applicable for large areas and small regions and can represent the terrain and 3D objects in different levels of detail simultaneously. Since either simple, single scale models without topology and few semantics or very complex multi-scale models with full topology and fine-grained semantical differenti-ations can be represented, CityGML enables lossless information exchange between different GI systems and users.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ug_scope_section"><a class="anchor" href="#ug_scope_section"></a>2. Scope</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document provides Engineering Guidance on the use of the CityGML 3.0 Conceptual Model Standard.</p>
</div>
<div class="paragraph">
<p>The OGC Conceptual Model Standard specifies the representation of virtual 3D city and landscape models. The CityGML 3.0 Conceptual Model is expected to be the basis for a number of future Encoding Standards in which subsets of the Conceptual Model can be implemented. These Encoding Standards will enable both storage and exchange of data.</p>
</div>
<div class="paragraph">
<p>The CityGML 3.0 Conceptual Model Standard was designed to be concise and easy to use. As a result, most non-normative content has been removed. The purpose of this Users Guide is to capture that non-normative content and make it easy to access if and when needed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ug_references_section"><a class="anchor" href="#ug_references_section"></a>3. References</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following normative documents contain provisions that, through reference in this text, constitute provisions of OGC 20-010. For dated references, subsequent amendments to, or revisions of, any of these publications do not apply. However, parties to agreements based on this part of OGC 12-019 are encouraged to investigate the possibility of applying the most recent editions of the normative documents indicated below. For undated references, the latest edition of the normative document referred to applies.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>IETF: RFC 2045 &amp; 2046, Multipurpose Internet Mail Extensions (MIME). (November 1996),</p>
</li>
<li>
<p>IETF: RFC 3986, Uniform Resource Identifier (URI): Generic Syntax. (January 2005)</p>
</li>
<li>
<p>ISO: ISO 8601:2004, Data elements and interchange formats – Information interchange – Representation of dates and times</p>
</li>
<li>
<p>ISO: ISO 19103:2015, Geographic Information – Conceptual Schema Language</p>
</li>
<li>
<p>ISO: ISO 19107:2003, Geographic Information – Spatial Schema</p>
</li>
<li>
<p>ISO: ISO 19111:2019, Geographic information – Referencing by coordinates</p>
</li>
<li>
<p>ISO: ISO/IEC 19505-2:2012,
Information technology&#8201;&#8212;&#8201;Object Management Group Unified ModelingLanguage (OMG UML)&#8201;&#8212;&#8201;Part 2: Superstructure</p>
</li>
<li>
<p>ISO/IEC 19507:2012, Information technology&#8201;&#8212;&#8201;Object Management Group Object Constraint Language (OCL)</p>
</li>
<li>
<p>OASIS: Customer Information Quality Specifications - extensible Address Language (xAL), Version v3.0</p>
</li>
<li>
<p>OGC: The OpenGIS® Abstract Specification Topic 5: Features, OGC document 08-126</p>
</li>
<li>
<p>OGC: The OpenGIS™ Abstract Specification Topic 8: Relationships Between Features, OGC document 99-108r2</p>
</li>
<li>
<p>OGC: The OpenGIS™ Abstract Specification Topic 10: Feature Collections, OGC document 99-110</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_terms_and_definitions"><a class="anchor" href="#_terms_and_definitions"></a>Terms and Definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document uses the terms defined in Sub-clause 5.3 of [OGC 06-121r8], which is based on the ISO/IEC Directives, Part 2, Rules for the structure and drafting of International Standards. In particular, the word “shall” (not “must”) is the verb form used to indicate a requirement to be strictly followed to conform to this Best Practice.</p>
</div>
<div class="paragraph">
<p>For the purposes of this document, the following additional terms and definitions apply.</p>
</div>
<div class="paragraph">
<p><strong>2D data</strong><br>
geometry of features is represented in a two-dimensional space<br>
NOTE In other words, the geometry of 2D data is given using (X,Y) coordinates.<br>
[INSPIRE D2.8.III.2, definition 1]</p>
</div>
<div class="paragraph">
<p><strong>2.5D data</strong><br>
geometry of features is represented in a three-dimensional space with the constraint that, for each (X,Y) position, there is only one Z<br>
[INSPIRE D2.8.III.2, definition 2]</p>
</div>
<div class="paragraph">
<p><strong>3D data</strong><br>
Geometry of features is represented in a three-dimensional space.<br>
NOTE In other words, the geometry of 2D data is given using (X,Y,Z) coordinates without any constraints.<br>
[INSPIRE D2.8.III.2, definition 3]</p>
</div>
<div class="paragraph">
<p><strong>conceptual model</strong><br>
model that defines concepts of a universe of discourse<br>
[ISO 19101-1:2014, 4.1.5]</p>
</div>
<div class="paragraph">
<p><strong>conceptual schema</strong><br>
formal description of a conceptual model<br>
[ISO 19101-1:2014, 4.1.6]</p>
</div>
<div class="paragraph">
<p><strong>conformance test class</strong><br>
set of conformance test modules that must be applied to receive a single certificate of conformance<br>
[OGC 08-131r3, definition 4.4]</p>
</div>
<div class="paragraph">
<p><strong>feature</strong><br>
abstraction of real world phenomena<br>
[ISO 19101-1:2014, definition 4.1.11]</p>
</div>
<div class="paragraph">
<p><strong>feature attribute</strong><br>
characteristic of a feature<br>
[ISO 19101-1:2014, definition 4.1.12]</p>
</div>
<div class="paragraph">
<p><strong>feature type</strong><br>
class of features having common characteristics<br>
[ISO 19156:2011, definition 4.7]</p>
</div>
<div class="paragraph">
<p><strong>level of detail</strong><br>
quantity of information that portrays the real world
NOTE The concept comprises data capturing rules of spatial object types, the accuracy and the types of geometries, and other aspects of a data specification. In particular, it is related to the notions of scale and resolution.<br>
[INSPIRE Glossary]</p>
</div>
<div class="paragraph">
<p><strong>life-cycle information</strong><br>
set of properties of a spatial object that describe the temporal characteristics of a version of a spatial object or the changes between versions<br>
[INSPIRE Glossary]</p>
</div>
<div class="paragraph">
<p><strong>measurement</strong><br>
set of operations having the object of determining the value of a quantity<br>
[ISO 19101-2:2018, definition 3.21] / [VIM:1993, 2.1]</p>
</div>
<div class="paragraph">
<p><strong>model</strong><br>
abstraction of some aspects of reality<br>
[ISO 19109:2015, definition 4.15]</p>
</div>
<div class="paragraph">
<p><strong>observation</strong><br>
act of measuring or otherwise determining the value of a property<br>
[ISO 19156:2011, definition 4.11]</p>
</div>
<div class="paragraph">
<p><strong>observation procedure</strong><br>
method, algorithm or instrument, or system of these, which may be used in making an observation<br>
[ISO 19156:2011, 4.12]</p>
</div>
<div class="paragraph">
<p><strong>observation result</strong><br>
estimate of the value of a property determined through a known observation procedure<br>
[ISO 19156:2011, 4.14]</p>
</div>
<div class="paragraph">
<p><strong>property</strong><br>
facet or attribute of an object referenced by a name.<br>
[ISO 19143:2010, definition 4.21]</p>
</div>
<div class="paragraph">
<p><strong>requirements class</strong><br>
aggregate of all requirement modules that must all be satisfied to satisfy a conformance test class<br>
[OGC 08-131r3, definition 4.19]</p>
</div>
<div class="paragraph">
<p><strong>schema</strong><br>
formal description of a model<br>
[ISO 19101-1:2014, definition 4.1.34]</p>
</div>
<div class="paragraph">
<p><strong>sensor</strong><br>
type of observation procedure that provides the estimated value of an observed property at its output<br>
[OGC 08-094r1, definition 4.5]</p>
</div>
<div class="paragraph">
<p><strong>timeseries</strong><br>
sequence of data values which are ordered in time<br>
[OGC 15-043r3]</p>
</div>
<div class="paragraph">
<p><strong>universe of discourse</strong><br>
view of the real or hypothetical world that includes everything of interest<br>
[ISO 19101-1:2014, definition 4.1.38]</p>
</div>
<div class="paragraph">
<p><strong>version</strong><br>
Particular variation of a spatial object<br>
[INSPIRE Glossary]</p>
</div>
<div class="paragraph">
<p><strong>Abbreviated Terms</strong></p>
</div>
<div class="paragraph">
<p>The following abbreviated terms are used in this document:</p>
</div>
<div class="paragraph">
<p>The list of acronyms needs to be reviewed once all sections have been updated.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>2D       Two Dimensional</p>
</li>
<li>
<p>3D       Three Dimensional</p>
</li>
<li>
<p>AEC          Architecture, Engineering, Construction</p>
</li>
<li>
<p>ALKIS       German National Standard for Cadastral Information</p>
</li>
<li>
<p>ATKIS       German National Standard for Topographic and Cartographic Information</p>
</li>
<li>
<p>B-Rep       Boundary Representation</p>
</li>
<li>
<p>bSI       buildingSMART International</p>
</li>
<li>
<p>CAD       Computer Aided Design</p>
</li>
<li>
<p>COLLADA   Collaborative Design Activity</p>
</li>
<li>
<p>CSG       Constructive Solid Geometry</p>
</li>
<li>
<p>DTM       Digital Terrain Model</p>
</li>
<li>
<p>DXF       Drawing Exchange Format</p>
</li>
<li>
<p>EuroSDR       European Spatial Data Research Organisation</p>
</li>
<li>
<p>ESRI       Environmental Systems Research Institute</p>
</li>
<li>
<p>FM       Facility Management</p>
</li>
<li>
<p>GDF       Geographic Data Files</p>
</li>
<li>
<p>GDI-DE       Spatial Data Infrastructure Germany (Geodateninfrastruktur Deutschland)</p>
</li>
<li>
<p>GDI       NRW Geodata Infrastructure North-Rhine Westphalia</p>
</li>
<li>
<p>GML       Geography Markup Language</p>
</li>
<li>
<p>IAI       International Alliance for Interoperability (now buildingSMART International (bSI))</p>
</li>
<li>
<p>IETF       Internet Engineering Task Force</p>
</li>
<li>
<p>IFC       Industry Foundation Classes</p>
</li>
<li>
<p>ISO       International Organization for Standardisation</p>
</li>
<li>
<p>LOD       Level of Detail</p>
</li>
<li>
<p>NBIMS       National Building Information Model Standard</p>
</li>
<li>
<p>OASIS       Organisation for the Advancement of Structured Information Standards</p>
</li>
<li>
<p>OGC       Open Geospatial Consortium</p>
</li>
<li>
<p>OSCRE       Open Standards Consortium for Real Estate</p>
</li>
<li>
<p>SIG 3D       Special Interest Group 3D of the GDI-DE</p>
</li>
<li>
<p>TC211       ISO Technical Committee 211</p>
</li>
<li>
<p>TIC       Terrain Intersection Curve</p>
</li>
<li>
<p>TIN       Triangulated Irregular Network</p>
</li>
<li>
<p>UML       Unified Modeling Language</p>
</li>
<li>
<p>URI       Uniform Resource Identifier</p>
</li>
<li>
<p>VRML       Virtual Reality Modeling Language</p>
</li>
<li>
<p>W3C       World Wide Web Consortium</p>
</li>
<li>
<p>W3DS       OGC Web 3D Service</p>
</li>
<li>
<p>WFS       OGC Web Feature Service</p>
</li>
<li>
<p>X3D       Open Standards XML-enabled 3D file format of the Web 3D Consortium</p>
</li>
<li>
<p>XML       Extensible Markup Language</p>
</li>
<li>
<p>xAL       OASIS extensible Address Language</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ug_general_principles_section"><a class="anchor" href="#ug_general_principles_section"></a>4. General Principles</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ug_modularization_section"><a class="anchor" href="#ug_modularization_section"></a>4.1. Modularization</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>CityGML is a rich standard both on the thematic and geometric-topological level of its data model. On its the-matic level CityGML defines classes and relations for the most relevant topographic objects in cities and region-al models comprising built structures, elevation, vegetation, water bodies, city furniture, and more. In addition to geometry and appearance content these thematic components allow to employ virtual 3D city models for sophis-ticated analysis tasks in different application domains like simulations, urban data mining, facility management, and thematic inquiries.</p>
</div>
<div class="paragraph">
<p>CityGML is to be seen as a framework giving geospatial 3D data enough space to grow in geometrical, topologi-cal and semantic aspects over its lifetime. Thus, geometry and semantics of city objects may be flexibly struc-tured covering purely geometric datasets up to complex geometric-topologically sound and spatio-semantically coherent data. By this means, CityGML defines a single object model and data exchange format applicable to consecutive process steps of 3D city modelling from geometry acquisition, data qualification and refinement to preparation of data for specific end-user applications, allowing for iterative data enrichment and lossless infor-mation exchange (cf. Kolbe et al. 2009).</p>
</div>
<div class="paragraph">
<p>According to this idea of a framework, applications are not required to support all thematic fields of CityGML in order to be compliant to the standard, but may employ a subset of constructs corresponding to specific relevant requirements of an application domain or process step. The use of logical subsets of CityGML limits the com-plexity of the overall data model and explicitly allows for valid partial implementations. As for version 2.0 of the CityGML standard, possible subsets of the data model are defined and embraced by so called CityGML mod-ules. A CityGML module is an aggregate of normative aspects that must all be implemented as a whole by a conformant system. CityGML consists of a core module and thematic extension modules.</p>
</div>
<div class="paragraph">
<p>The CityGML core module defines the basic concepts and components of the CityGML data model. It is to be seen as the universal lower bound of the overall CityGML data model and a dependency of all thematic exten-sion modules. Thus, the core module is unique and must be implemented by any conformant system. Based on the CityGML core module, each extension module contains a logically separate thematic component of the CityGML data model. The extensions to the core are derived by vertically slicing the overall CityGML data model. Since the core module is contained (by reference) in each extension module, its general concepts and components are universal to all extension modules. The following thirteen thematic extension modules are introduced by version 2.0 of the CityGML standard. They are directly related to clauses of this document each covering the corresponding thematic field of CityGML:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Appearance (cf. clause 9),</p>
</li>
<li>
<p>Bridge (cf. clause 10.5)</p>
</li>
<li>
<p>Building (cf. clause 10.3),</p>
</li>
<li>
<p>CityFurniture (cf. clause 10.9),</p>
</li>
<li>
<p>CityObjectGroup (cf. clause 10.11),</p>
</li>
<li>
<p>Generics (cf. clause 10.12),</p>
</li>
<li>
<p>LandUse (cf. clause 10.10),</p>
</li>
<li>
<p>Relief (cf. clause 10.2),</p>
</li>
<li>
<p>Transportation (cf. clause 10.7),</p>
</li>
<li>
<p>Tunnel (cf. clause 10.4)</p>
</li>
<li>
<p>Vegetation (cf. clause 10.8),</p>
</li>
<li>
<p>WaterBody (cf. clause 10.6), and</p>
</li>
<li>
<p>TexturedSurface [deprecated] (cf. clause 9.8).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The thematic decomposition of the CityGML data model allows for implementations to support any combination of extension modules in conjunction with the core module in order to be CityGML conformant. Thus, the exten-sion modules may be arbitrarily combined according to the information needs of an application or application domain. A combination of modules is called a CityGML profile. The union of all modules is defined as the CityGML base profile. The base profile is unique at any given time and forms the upper bound of the overall CityGML data model. Any other CityGML profile must be a valid subset of the base profile. By following the concept of CityGML modules and profiles, valid partial implementations of the CityGML data model may be realised in a well-defined way.</p>
</div>
<div class="paragraph">
<p>As for future development, each CityGML module may be further developed independently from other modules by expert groups and information communities. Resulting proposals and changes to modules may be introduced into future revisions of the CityGML standard without affecting the validity of other modules. Furthermore, thematic components not covered by the current CityGML data model may be added to future revisions of the standard by additional thematic extension modules. These additional extensions may establish dependency relations to any other existing CityGML module but shall at least be dependent on the CityGML core module. Consequently, the CityGML base profile may vary over time as new extensions are added. However, if a specific application has information needs to be modelled and exchanged which are beyond the scope of the CityGML data model, this application data can also be incorporated within the existing modules using CityGML’s Applica-tion Domain Extension mechanism (cf. clause 10.13) or by employing the concepts of generic city objects and attributes (cf. chapter 10.12).</p>
</div>
<div class="paragraph">
<p>The introduced modularisation approach supports CityGML’s versatility as a data modelling framework and exchange format addressing various application domains and different steps of 3D city modelling. For sake of clarity, applications should announce the level of conformance to the CityGML standard by declaring the em-ployed CityGML profile. Since the core module is part of all profiles, this should be realised by enumerating the implemented thematic extension modules. For example, if an implementation supports the Building module, the Relief module, and the Vegetation module in addition to the core, this should be announced by “CityGML [Building, Relief, Vegetation]”. In case the base profile is supported, this should be indicated by “CityGML [full]”.</p>
</div>
<div class="sect3">
<h4 id="_citygml_core_and_extension_modules"><a class="anchor" href="#_citygml_core_and_extension_modules"></a>4.1.1. CityGML core and extension modules</h4>
<div class="paragraph">
<p>Each CityGML module is specified by its own XML Schema definition file and is defined within an individual and globally unique XML target namespace. According to dependency relations between modules, each module may, in addition, import namespaces associated to such related CityGML modules. However, a single namespace shall not be directly included in two modules. Thus, all elements belonging to one module are associ-ated to the module’s namespace only. By this means, module elements are guaranteed to be properly separated and distinguishable in CityGML instance documents.</p>
</div>
<div class="paragraph">
<p>Compared to CityGML versions before 1.0, the aforementioned namespace conventions introduce an extra level of complexity to data files as there is no single CityGML namespace any more. In contrast, components of different CityGML modules and, thus, of different namespaces may be arbitrarily mixed within the same CityGML instance document. Furthermore, an application might have to parse instance documents containing elements of modules which are not employed by the application itself. These parsing problems though can easily be overcome by non-“schema-aware” applications, i.e. applications that do not parse and interpret GML applica-tion schemas in a generic way. Elements from different namespaces than those declared by the application’s employed CityGML profile could be skipped. Comparable observations have to be made when using CityGML’s Application Domain Extension mechanism (cf. clause 10.13).</p>
</div>
<div class="paragraph">
<p>As for version 2.0 of the CityGML standard, there are no two thematic extension modules related by dependen-cy. Thus, all extension modules are truly independent from each other and may be separately supported by implementations. However, the CityGML core module is a dependency for any extension module. This means that the XML schema file of the core module is imported by each XML schema file defining an extension.</p>
</div>
<div class="paragraph">
<p>The dependency relations between CityGML’s modules are illustrated in Fig. 8 using an UML package diagram. Each module is represented by a package. The package names correspond to the module names. A dashed arrow in the figure indicates that the schema at the tail of the arrow depends upon the schema at the head of the arrow. For CityGML modules, a dependency occurs where one schema &lt;import&gt;s another schema and accordingly the corresponding XML namespace. For example, the extension module Building imports the schema of the CityGML Core module. A short description of each module is given in Tab. 4.</p>
</div>
<div id="figure-8" class="imageblock">
<div class="content">
<img src="figures/Figure_8.png" alt="Figure 8">
</div>
<div class="title">Figure 1. UML package diagram illustrating the separate modules of CityGML and their schema dependencies. Each extension module (indicated by the leaf packages) further imports the GML 3.1.1 schema definition in order to represent spatial properties of its thematic classes. For readability reasons, the corresponding dependencies have been omitted.</div>
</div>
<table id="core_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">CityGML Core</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/2.0" class="bare">http://www.opengis.net/citygml/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">cityGML.Base.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">core</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The CityGML Core module defines the basic components of the CityGML data model. Primarily, this comprises abstract base classes from which all thematic classes are (transitively) derived. But also non-abstract content common to more than one extension module, for example basic data types, is defined within the core module.<br>
&#160;<br>
The core module itself imports the XML schema definition files of GML version 3.1.1 and the OASIS extensible Address Language xAL.</p></td>
</tr>
</tbody>
</table>
<table id="appearance_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Appearance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/appearance/2.0" class="bare">http://www.opengis.net/citygml/appearance/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">appearance.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">app</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The Appearance module provides the means to model appearances of CityGML features, i.e. observable properties of the feature’s surface. Appear-ance data may be stored for each city object. Therefore, the abstract base class _CityObject defined within the core module is augmented by an additional property using CityGML’s Application Domain Extension mechanism. Thus, the Appearance module has a deliberate impact on all thematic extension modules.</p></td>
</tr>
</tbody>
</table>
<table id="bridge_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Bridge</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/bridge/2.0" class="bare">http://www.opengis.net/citygml/bridge/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bridge.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">brid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The Bridge module allows the representation of thematic and spatial aspects of bridges, bridge parts, bridge installations, and interior bridge structures in four levels of detail (LOD 1 – 4).</p></td>
</tr>
</tbody>
</table>
<table id="building_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Building</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/building/2.0" class="bare">http://www.opengis.net/citygml/building/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">building.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bldg</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The Building module allows the representation of thematic and spatial aspects of buildings, building parts, building installations, and interior building struc-tures in five levels of detail (LOD 0 – 4).</p></td>
</tr>
</tbody>
</table>
<table id="cityfurniture_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">CityFurniture</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/cityfurniture/2.0" class="bare">http://www.opengis.net/citygml/cityfurniture/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">cityFurniture.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">frn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The CityFurniture module is used to represent city furniture objects in cities. City furniture objects are immovable objects like lanterns, traffic signs, adver-tising columns, benches, or bus stops that can be found in traffic areas, residen-tial areas, on squares, or in built-up areas.</p></td>
</tr>
</tbody>
</table>
<table id="cityobjectgroup_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">CityObjectGroup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/cityobjectgroup/2.0" class="bare">http://www.opengis.net/citygml/cityobjectgroup/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">cityObjectGroup.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">grp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The CityObjectGroup module provides a grouping concept for CityGML. Arbitrary city objects may be aggregated in groups according to user-defined criteria to represent and transfer these aggregations as part of the city model. A group may be further classified by specific attributes.</p></td>
</tr>
</tbody>
</table>
<table id="generics_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Generics</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/generics/2.0" class="bare">http://www.opengis.net/citygml/generics/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">generics.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The Generics module provides generic extensions to the CityGML data model that may be used to model and exchange additional attributes and features not covered by the predefined thematic classes of CityGML. However, generic extensions shall only be used if appropriate thematic classes or attributes are not provided by any other CityGML module.<br>
&#160;<br>
In order to represent generic attributes, the Generics module augments the abstract base class _CityObject defined within the core module by an addition-al property using CityGML’s Application Domain Extension mechanism. Thus, the Generics module has a deliberate impact on all thematic extension modules.</p></td>
</tr>
</tbody>
</table>
<table id="landuse_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">LandUse</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/landuse/2.0" class="bare">http://www.opengis.net/citygml/landuse/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">landUse.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">luse</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The LandUse module allows for the representation of areas of the earth’s surface dedicated to a specific land use.</p></td>
</tr>
</tbody>
</table>
<table id="relief_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Relief</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/relief/2.0" class="bare">http://www.opengis.net/citygml/relief/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">relief.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">dem</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The Relief module allows for the representation of the terrain in a city model. CityGML supports terrain representations in different levels of detail, reflect-ing different accuracies or resolutions. The terrain may be specified as a regular raster or grid, as a TIN, by break lines, and by mass points.</p></td>
</tr>
</tbody>
</table>
<table id="transportation_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Transportation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/transportation/2.0" class="bare">http://www.opengis.net/citygml/transportation/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">transportation.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">tran</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The Transportation module is used to represent the transportation features within a city, for example roads, tracks, railways, or squares. Transportation features may be represented as a linear network or by geometrically describing their 3D surfaces.</p></td>
</tr>
</tbody>
</table>
<table id="tunnel_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Tunnel</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/tunnel/2.0" class="bare">http://www.opengis.net/citygml/tunnel/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">tunnel.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">tun</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The Tunnel module facilitates the representation of thematic and spatial aspects of tunnels, tunnel parts, tunnel installations, and interior tunnel struc-tures in four level of detail (LOD 1 – 4)</p></td>
</tr>
</tbody>
</table>
<table id="vegetation_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Vegetation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/vegetation/2.0" class="bare">http://www.opengis.net/citygml/vegetation/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">vegetation.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">veg</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The Vegetation module provides thematic classes to represent vegetation objects. CityGML’s vegetation model distinguishes between solitary vegeta-tion objects like trees, and vegetation areas which represent biotopes like forests or other plant communities.</p></td>
</tr>
</tbody>
</table>
<table id="waterbody_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">WaterBody</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/waterbody/2.0" class="bare">http://www.opengis.net/citygml/waterbody/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">waterBody.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">wtr</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The WaterBody module represents the thematic aspects and 3D geometry of rivers, canals, lakes, and basins. It does, however, not inherit any hydrological or other dynamic aspects so far.</p></td>
</tr>
</tbody>
</table>
<table id="texturedsurface_module_description" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module name </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Textured Surface [deprecated]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML namespace identifier </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/citygml/texturedsurface/2.0" class="bare">http://www.opengis.net/citygml/texturedsurface/2.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">XML Schema file </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">texturedSuface.xsd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Recommended namespace prefix </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">tex</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock">Module description </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The TexturedSurface module allows for assigning visual appearance properties (color, shininess, transparency) and textures to 3D surfaces. Due to inherent limitations of its modelling approach this module has been marked deprecated and is expected to be removed in future CityGML versions. Appearance information provided by this module can be converted to CityGML’s Appear-ance module without information loss. Thus, the use of the TexturedSurface module is strongly discouraged.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_citygml_profiles"><a class="anchor" href="#_citygml_profiles"></a>4.1.2. CityGML profiles</h4>
<div class="paragraph">
<p>A CityGML profile is a combination of thematic extension modules in conjunction with the core module of CityGML. Each CityGML instance document shall employ the CityGML profile appropriate to the provided data. In general, two approaches to employ a CityGML profile within an instance document can be differentiat-ed:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>CityGML profile definition embedded inline the CityGML instance document A CityGML profile can be bound to an instance document using the schemaLocation attribute defined in the XML Schema instance namespace, <a href="http://www.w3.org/2001/XMLSchema-instance" class="bare">http://www.w3.org/2001/XMLSchema-instance</a> (commonly associated with the prefix xsi). The xsi:schemaLocation attribute provides a way to locate the XML Schema definition for namespaces defined in an XML instance document. Its value is a whitespace-delimited list of pairs of Uniform Resource Identifiers (URIs) where each pair consists of a namespace followed by the location of that namespace’s XML Schema definition, which is typically a .xsd file.<br>
&#160;<br>
By this means, the namespaces of the respective CityGML modules shall be defined within a CityGML instance document. The xsi:schemaLocation attribute then shall be used to provide the location to the respective XML Schema definition of each module. All example instance documents given in Annex G follow this first approach.</p>
</li>
<li>
<p>CityGML profile definition provided by a separate XML Schema definition file The CityGML profile may also be specified by its own XML Schema file. This schema file shall com-bine the appropriate CityGML modules by importing the corresponding XML Schema definitions. For this purpose, the import element defined in the XML Schema namespace shall be used, <a href="http://www.w3.org/2001/XMLSchema" class="bare">http://www.w3.org/2001/XMLSchema</a> (commonly associated with the prefix xs). For the xs:import el-ement, the namespace of the imported CityGML module along with the location of the namespace’s XML Schema definition have to be declared. In order to apply a CityGML profile to an instance docu-ment, the profile’s schema has to be bound to the instance document using the xsi:schemaLocation at-tribute. The XML Schema file of the CityGML profile shall not contain any further content.<br>
&#160;<br>
The targetNamespace of the profile’s schema shall differ from the namespaces of the imported CityGML modules. The namespace associated with the profile should be in control of the originator of the instance document and must be given as a previously unused and globally unique URI. The profile’s XML Schema file must be available (or accessible on the internet) to everybody parsing the associated CityGML instance document.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The second approach is illustrated by the following example XML Schema definition for the base profile of CityGML. Since the base profile is the union of all CityGML modules, the corresponding XML Schema defini-tion imports each and every CityGML module. By this means, all components of the CityGML data model are available in and may be exchanged by instance documents referencing this example base profile. The schema definition file of the base profile is shipped with the CityGML schema package, and is accessible at <a href="http://schemas.opengis.net/citygml/profiles/base/2.0/CityGML.xsd" class="bare">http://schemas.opengis.net/citygml/profiles/base/2.0/CityGML.xsd</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
replace XML with UML if feasible.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following excerpt of a CityGML dataset exemplifies how to apply the base profile schema CityGML.xsd to a CityGML instance document. The dataset contains two building objects and a city object group. The base profile defined by CityGML.xsd is referenced using the xsi:schemaLocation attribute of the root element. Thus, all CityGML modules are employed by the instance document and no further references to the XML Schema documents of the CityGML modules are necessary.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
replace XML with UML if feasible
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_general_modeling_principles_section"><a class="anchor" href="#ug_general_modeling_principles_section"></a>4.2. General Modeling Principles</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Content Needed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ug_spatial-temporal-fundamentals_section"><a class="anchor" href="#ug_spatial-temporal-fundamentals_section"></a>4.3. Spatial-Temporal Fundamentals</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Spatial properties of CityGML features are represented by objects of GML3’s geometry model. This model is based on the standard ISO 19107 ‘Spatial Schema’ (Herring 2001), representing 3D geometry according to the well-known Boundary Representation (B-Rep, cf. Foley et al. 1995). CityGML actually uses only a subset of the GML3 geometry package, defining a profile of GML3. This subset is depicted in Fig. 9 and Fig. 10. Further-more, GML3’s explicit Boundary Representation is extended by scene graph concepts, which allow the represen-tation of the geometry of features with the same shape implicitly and thus more space efficiently (chapter 8.2).</p>
</div>
<div class="sect3">
<h4 id="_geometric_topological_model"><a class="anchor" href="#_geometric_topological_model"></a>4.3.1. Geometric-topological model</h4>
<div class="paragraph">
<p>The geometry model of GML3 consists of primitives, which may be combined to form complexes, composite geometries or aggregates. For each dimension, there is a geometrical primitive: a zero-dimensional object is a Point, a one-dimensional a _Curve, a two-dimensional a _Surface, and a three-dimensional a _Solid (Fig. 9). Each geometry can have its own coordinate reference system. A solid is bounded by surfaces and a surface by curves. In CityGML, a curve is restricted to be a straight line, thus only the GML3 class LineString is used. Surfaces in CityGML are represented by Polygons, which define a planar geometry, i.e. the boundary and all interior points are required to be located in one single plane.</p>
</div>
<div id="figure-9" class="imageblock">
<div class="content">
<img src="figures/Figure_9.png" alt="Figure 9">
</div>
<div class="title">Figure 2. UML diagram of CityGML’s geometry model (subset and profile of GML3): Primitives and Composites.</div>
</div>
<div class="paragraph">
<p>Combined geometries can be aggregates, complexes or composites of primitives (see illustration in Fig. 11). For an aggregate, the spatial relationship between components is not restricted. They may be disjoint, overlapping, touching, or disconnected. GML3 provides a special aggregate for each dimension, a MultiPoint, a MultiCurve, a MultiSurface, and a MultiSolid (see Fig. 10). In contrast to aggregates, a complex is topologically structured: its parts must be disjoint, must not overlap and are allowed to touch, at most, at their boundaries or share parts of their boundaries. A composite is a special complex provided by GML3. It can only contain elements of the same dimension. Its elements must be disjoint as well, but they must be topologically connected along their bounda-ries. A composite can be a CompositeSolid, a CompositeSurface, or CompositeCurve. (cf. Fig. 9).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert fig10 UML
</td>
</tr>
</table>
</div>
<div id="figure-10" class="imageblock">
<div class="content">
<img src="figures/Figure_10.png" alt="Figure 10">
</div>
<div class="title">Figure 3. UML diagram of CityGML’s geometry model: Complexes and Aggregates</div>
</div>
<div class="paragraph">
<p>An OrientableSurface is a surface with an explicit orientation, i.e. two sides, front and back, can be distinguished. This may be used to assign textures to specific sides of a surface, or to distinguish the exterior and the interior side of a surface when bounding a solid. Please note, that curves and surfaces have a default orientation in GML which results from the order of the defining points. Thus, an OrientableSurface only has to be used, if the orientation of a given GML geometry has to be reversed.</p>
</div>
<div class="paragraph">
<p>TriangulatedSurfaces are special surfaces, which specify triangulated irregular networks often used to represent the terrain. While a TriangulatedSurface is a composition of explicit Triangles, the subclass TIN is used to represent a triangulation in an implicit way by a set of control points, defining the nodes of the triangles. The triangulation may be reconstructed using standard triangulation methods (Delaunay triangulation). In addition, break lines and stop lines define contour characteristics of the terrain.</p>
</div>
<div id="figure-11" class="imageblock">
<div class="content">
<img src="figures/Figure_11.png" alt="Figure 11">
</div>
<div class="title">Figure 4. Combined geometries</div>
</div>
<div class="paragraph">
<p>The GML3 composite model realises a recursive aggregation schema for every primitive type of the corresponding dimension. This aggregation schema allows the definition of nested aggregations (hierarchy of components). For example, a building geometry (CompositeSolid) can be composed of the house geometry (CompositeSolid) and the garage geometry (Solid), while the house’s geometry is further decomposed into the roof geometry (Solid) and the geometry of the house body (Solid).</p>
</div>
<div class="paragraph">
<p>CityGML provides the explicit modelling of topology, for example the sharing of geometry objects between features or other geometries. One part of space is represented only once by a geometry object and is reference by all features or more complex geometries which are defined or bounded by this geometry object. Thus redundancy is avoided and explicit topological relations between parts are maintained. Basically, there are three cases. First, two features may be defined spatially by the same geometry. For example, if a path is both a transportation feature and a vegetation feature, the surface geometry defining the path is referenced both by the transportation object and by the vegetation object. Second, geometry may be shared between a feature and another geometry. A geometry defining a wall of a building may be referenced twice: by the solid geometry defining the geometry of the building, and by the wall feature. Third, two geometries may reference the same geometry, which is in the boundary of both. For example, a building and an adjacent garage may be represented by two solids. The surface describing the area where both solids touch may be represented only once and it is referenced by both solids. As it can be seen from Fig. 12, this requires partitioning of the respective surfaces. In general, Boundary Represen-tation only considers visible surfaces. However, to make topological adjacency explicit and to allow the possibil-ity of deletion of one part of a composed object without leaving holes in the remaining aggregate touching elements are included. Whereas touching is allowed, permeation of objects is not in order to avoid the multiple representation of the same space. However, the use of topology in CityGML is optional.</p>
</div>
<div class="paragraph">
<p>In order to implement topology, CityGML uses the XML concept of XLinks provided by GML. Each geometry object that should be shared by different geometric aggregates or different thematic features is assigned an unique identifier, which may be referenced by a GML geometry property using a href attribute. CityGML does not deploy the built-in topology package of GML3, which provides separate topology objects accompanying the geometry. This kind of topology is very complex and elaborate. Nevertheless, it lacks flexibility when data sets, which might include or neglect topology, should be covered by the same data model. The XLink topology is simple and flexible and nearly as powerful as the explicit GML3 topology model. However, a disadvantage of the XLink topology is that navigation between topologically connected objects can only be performed in one direction (from an aggregate to its components), not (immediately) bidirectional as it is the case for GML’s built-in topology. An example for CityGML’s topology representation is given in the dataset listed in annex G.4.</p>
</div>
<div id="figure-12" class="imageblock">
<div class="content">
<img src="figures/Figure_12.jpg" alt="Figure 12">
</div>
<div class="title">Figure 5. Recursive aggregation of objects and geometries in CityGML (graphic: IGG Uni Bonn).</div>
</div>
<div class="paragraph">
<p>The following excerpt of a CityGML example file defines a gml:Polygon with a gml:id wallSurface4711, which is part of the geometry property lod2Solid of a building. Another building being adjacent to the first building references this shared polygon in its geometry representation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
replace GML? Or retain it as an example.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_spatial_reference_system"><a class="anchor" href="#_spatial_reference_system"></a>4.3.2. Spatial reference system</h4>
<div class="paragraph">
<p>When dealing with geoinformation and virtual 3D city models in particular, the exact spatial reference is of utmost importance and a key requirement for the integration of different spatial datasets in a single 3D city model. CityGML inherits GML3’s spatial capabilities of handling Coordinate Reference Systems (CRS) which is the usual way of denoting the spatial reference in GML 3.1.1. As CityGML is a true 3D standard, geometry elements are associated with a 3D CRS. There are only few exceptions to this rule where CityGML allows a 2D geometry element (for example, the referencePoint of a GeoreferencedTexture defined in CityGML’s Appear-ance module must be given with 2D coordinate values, cf. chapter 9.4).</p>
</div>
<div class="paragraph">
<p>In general, a geometry may point to the CRS definition used by this geometry through the attribute srsName which is inherited from the abstract GML superclass gml:_Geometry. This may be a reference to a well-known CRS definition provided by an authority organization such as the European Petroleum Survey Group (EPSG), but may also be a pointer to a CRS that is locally defined within the same CityGML instance document. The OGC document “Definition identifier URNs in OGC namespace” (cf. Whiteside 2009; OGC Doc. No. 07-092r3) provides best practices for the URN encoding of CRS references. Amongst others, it describes how to reference a single well-known 3D CRS definition (such as a 3D geographic CRS) as well as a compound CRS which combines two or more well-known CRS definitions (e.g., a projected CRS for the planimetry with a vertical CRS for the height reference). Examples for denoting a compound CRS for a CityGML instance document are given in Annex G.</p>
</div>
<div class="paragraph">
<p>GML3 also supports the definition of engineering CRSs which are used in a contextually local sense. For exam-ple, this might be a local 3D Cartesian coordinate system that is essentially based on a flat-earth approximation of the earth’s surface, and thus ignores the effect of earth curvature on feature geometry (cf. chapter 12.1.4.4 of the GML 3.1.1 specification document). Local engineering CRSs are commonly applied in the AEC/FM domain and thus are useful when integrating CAD data or BIM models into a 3D city model. Annex G.9 provides an example demonstrating the definition of an engineering CRS within a CityGML instance document and the use of local coordinate values for the feature geometry. The definition of an engineering CRS requires an anchor point which relates the origin of the local coordinate system to a point on the earth’s surface in order to facilitate the transformation of coordinates from the local engineering CRS.</p>
</div>
<div class="paragraph">
<p>According to GML 3.1.1, if no srsName attribute is given on a geometry element, then the CRS shall be speci-fied as part of the larger context this geometry element is part of, e.g. a geometric aggregate. For convenience in constructing feature and feature collection instances, the value of the srsName attribute on the gml:Envelope (or gml:Box) which is the value of the gml:boundedBy property of the feature shall be inherited by all directly expressed geometries in all properties of the feature or members of the collection, unless overruled by the pres-ence of a local srsName. Thus it is not necessary for a geometry to carry an srsName attribute if it uses the same CRS as given on the gml:boundedBy property of its parent feature. Inheritance of the CRS continues to any depth of nesting, but if overruled by a local srsName declaration, then the new CRS is inherited by all its chil-dren in turn (cf. chapter 8.3 of the GML 3.1.1 specification document).</p>
</div>
<div class="paragraph">
<p>It is strongly recommended that any CityGML instance document explicitly specifies the CRS for all contained geometry elements. This is especially important if the instance document is to be exchanged externally with third parties or is to be integrated with other spatial datasets. A mixed usage of different CRSs within the same dataset is possible and conformant with GML 3.1.1, whereas a single CRS reference given on the embracing CityModel feature collection (cf. chapter 10.1) simplifies the processing of the dataset by software systems. As for CityGML 2.0, this recommendation is non-normative and thus not accompanied by a conformance class. The main reason for this is to maintain backwards compatibility with CityGML 1.0.</p>
</div>
</div>
<div class="sect3">
<h4 id="_implicit_geometries_prototypic_objects_scene_graph_concepts"><a class="anchor" href="#_implicit_geometries_prototypic_objects_scene_graph_concepts"></a>4.3.3. Implicit geometries, prototypic objects, scene graph concepts</h4>
<div class="paragraph">
<p>The concept of implicit geometries is an enhancement of the geometry model of GML3. It is, for example, used in CityGML’s building, bridge, tunnel, and vegetation model as well as for city furniture and generic objects. Implicit geometries may be applied to features from different thematic fields of CityGML in order to geometri-cally represent the features within a specific level of detail (LOD). Thus, each extension module may define spatial properties providing implicit geometries for its thematic classes. For this reason, the concept of implicit geometries is defined within the CityGML core module (cf. chapter 10.1). However, its description is drawn here since implicit geometries are part of CityGML’s spatial model. The UML diagram is depicted in Fig. 13. The corresponding XML schema definition is provided in annex A.1.</p>
</div>
<div class="paragraph">
<p>An implicit geometry is a geometric object, where the shape is stored only once as a prototypical geometry, for example a tree or other vegetation objects, a traffic light or a traffic sign. This prototypic geometry object is re-used or referenced many times, wherever the corresponding feature occurs in the 3D city model. Each occur-rence is represented by a link to the prototypic shape geometry (in a local cartesian coordinate system), by a transformation matrix that is multiplied with each 3D coordinate of the prototype, and by an anchor point denot-ing the base point of the object in the world coordinate reference system. This reference point also defines the CRS to which the world coordinates belong after the application of the transformation. In order to determine the absolute coordinates of an implicit geometry, the anchor point coordinates have to be added to the matrix multi-plication results. The transformation matrix accounts for the intended rotation, scaling, and local translation of the prototype. It is a 4x4 matrix that is multiplied with the prototype coordinates using homogeneous coordi-nates, i.e. (x,y,z,1). This way even a projection might be modelled by the transformation matrix.</p>
</div>
<div id="figure-13" class="imageblock">
<div class="content">
<img src="figures/Figure_13.png" alt="Figure 13">
</div>
<div class="title">Figure 6. UML diagram of ImplicitGeometries. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML Core module.</div>
</div>
<div class="paragraph">
<p>The reason for using the concept of implicit geometries in CityGML is space efficiency. Since the shape of, for example, trees of the same species can be treated as identical, it would be inefficient to model the detailed geometry of each of the large number of trees explicitly. The concept of implicit geometries is similar to the well known concept of primitive instancing used for the representation of scene graphs in the field of computer graphics (Foley et al. 1995).</p>
</div>
<div class="paragraph">
<p>The term implicit geometry refers to the principle that a geometry object with a complex shape can be simply represented by a base point and a transformation, implicitly unfolding the object’s shape at a specific location in the world coordinate system.</p>
</div>
<div class="paragraph">
<p>The shape of an ImplicitGeometry can be represented in an external file with a proprietary format, e.g. a VRML file, a DXF file, or a 3D Studio MAX file. The reference to the implicit geometry can be specified by an URI pointing to a local or remote file, or even to an appropriate web service. Alternatively, the shape can be defined by a GML3 geometry object. This has the advantage that it can be stored or exchanged inline within the CityGML dataset. Typically, the shape of the geometry is defined in a local coordinate system where the origin lies within or near to the object’s extent. If the shape is referenced by an URI, also the MIME type of the denoted object has to be specified (e.g. “model/vrml” for VRML models or “model/x3d+xml” for X3D models).</p>
</div>
<div class="paragraph">
<p>The implicit representation of 3D object geometry has some advantages compared to the explicit modelling, which represents the objects using absolute world coordinates. It is more space-efficient, and thus more exten-sive scenes can be stored or handled by a system. The visualisation is accelerated since 3D graphics cards sup-port the scene graph concept. Furthermore, the usage of different shape versions of objects is facilitated, e.g. different seasons, since only the library objects have to be exchanged (see example in Fig. 65).</p>
</div>
<div class="paragraph">
<p><strong>XML namespace</strong></p>
</div>
<div class="paragraph">
<p>The XML namespace of the CityGML Core module defining the concept of implicit geometries is identified by the Uniform Resource Identifier (URI) <a href="http://www.opengis.net/citygml/2.0" class="bare">http://www.opengis.net/citygml/2.0</a>. Within the XML Schema definition of the core module, this URI is also used to identify the default namespace.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
include GML example "ImplicitGeometryType, ImplicitRepresentationPropertyType" or replace with UML
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_code_lists"><a class="anchor" href="#_code_lists"></a>Code lists</h5>
<div class="paragraph">
<p>The mimeType attribute of ImplicitGeometry is specified as gml:CodeType. The values of this property can be enumerated in a code list. A proposal for this code list can be found in annex C.6.</p>
</div>
</div>
<div class="sect4">
<h5 id="_example_citygml_datasets"><a class="anchor" href="#_example_citygml_datasets"></a>Example CityGML datasets</h5>
<div class="paragraph">
<p>An example for an implicit geometry is given by the following city furniture object (cf. chapter 10.9), which is represented by a geometry in LOD2:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  &lt;frn:CityFurniture&gt;
    &lt;!-- class “traffic”; as specified in the code list proposed by the SIG 3D (cf. annex C.4) --&gt;
    &lt;frn:class codeSpace="http://www.sig3d.org/codelists/standard/cityfurniture/2.0/CityFurniture_class.xml"&gt;1000&lt;/frn:class&gt;
    &lt;!-- function “traffic light”; as specified in the code list proposed by the SIG 3D (cf. annex C.4) --&gt;
    &lt;frn:function codeSpace="http://www.sig3d.org/codelists/standard/cityfurniture/2.0/CityFurniture_function.xml"&gt;1080&lt;/frn:function&gt;
    &lt;frn:lod2ImplicitRepresentation&gt;
      &lt;core:ImplicitGeometry&gt;
        &lt;core:mimeType&gt;model/vrml&lt;/core:mimeType&gt;
        &lt;core:libraryObject&gt;
          http://www.some-3d-library.com/3D/furnitures/TrafficLight434.wrl
        &lt;/core:libraryObject&gt;
        &lt;core:referencePoint&gt;
          &lt;gml:Point srsName="urn:ogc:def:crs,crs:EPSG:6.12:31467,crs:EPSG:6.12:5783"&gt;
            &lt;gml:pos srsDimension="3"&gt;5793898.77 3603845.54 44.8&lt;/gml:pos&gt;
          &lt;/gml:Point&gt;
        &lt;/core:referencePoint&gt;
      &lt;/core:ImplicitGeometry&gt;
    &lt;/frn:lod2ImplicitRepresentation&gt;
  &lt;/frn:CityFurniture&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The shape of the geometry of the traffic light (city furniture with class “1000” and function “1080” according to the code lists proposed in annex C.4) is defined by a VRML file which is specified by a URL. This library object, which is defined in a local coordinate system, is transformed to its actual location by adding the coordi-nates of the reference point.</p>
</div>
<div class="paragraph">
<p>The following clip of a CityGML file provides a more complex example for an implicit geometry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  &lt;frn:CityFurniture&gt;
    &lt;!-- class “traffic”; as specified in the code list proposed by the SIG 3D (cf. annex C.4) --&gt;
    &lt;frn:class&gt;1000&lt;/frn:class&gt;
    &lt;!-- function “traffic light”; as specified in the code list proposed by the SIG 3D (cf. annex C.4) --&gt;
    &lt;frn:function&gt;1080&lt;/frn:function&gt;
    &lt;frn:lod2ImplicitRepresentation&gt;
      &lt;core:ImplicitGeometry&gt;
        &lt;core:mimeType&gt;model/vrml&lt;/core:mimeType&gt;
        &lt;core:transformationMatrix&gt;
          0.866025 -0.5 0 0.7
          0.5 0.866025 0 0.8
          0 0 1 0
          0 0 0 1
        &lt;/core:transformationMatrix&gt;
        &lt;core:libraryObject&gt;
          http://www.some-3d-library.com/3D/furnitures/TrafficLight434.wrl
        &lt;/core:libraryObject&gt;
        &lt;core:referencePoint&gt;
          &lt;gml:Point srsName="urn:ogc:def:crs,crs:EPSG:6.12:31467,crs:EPSG:6.12:5783"&gt;
            &lt;gml:pos srsDimension="3"&gt;5793898.77 3603845.54 44.8&lt;/gml:pos&gt;
          &lt;/gml:Point&gt;
        &lt;/core:referencePoint&gt;
      &lt;/core:ImplicitGeometry&gt;
    &lt;/frn:lod2ImplicitRepresentation&gt;
  &lt;/frn:CityFurniture&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In addition to the first example, a transformation matrix is specified. It is a homogeneous matrix, serialized in a row major fashion, i.e. the first four entries in the list denote the first row of the matrix, etc. The matrix combines a translation by the vector (0.7, 0.8, 0) – the origin of the local reference system is not the center of the object – and a rotation around the z-axis by 30 degrees (cos(30) = 0.866025 and sin(30) = 0.5). This rotation is necessary to align the traffic light with respect to a road. The actual position of the traffic light is computed as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>each point of the VRML file (with homogeneous coordinates) is multiplied by the transformation matrix;</p>
</li>
<li>
<p>for each resulting point, the reference point (5793898.77, 3603845.54, 44.8, 1)T is added, yielding the actual geometry of the city furniture.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_core_model_section"><a class="anchor" href="#ug_core_model_section"></a>4.4. CityGML Core Model</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Content Needed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ug_appearances_section"><a class="anchor" href="#ug_appearances_section"></a>4.5. Appearances</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Content Needed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ug_dynamics_section"><a class="anchor" href="#ug_dynamics_section"></a>4.6. Modeling Dynamic Data</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Content Needed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ug_extensions_section"><a class="anchor" href="#ug_extensions_section"></a>4.7. CityGML Extension Mechanisms</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>CityGML defines a rich and general-purpose information model for 3D city and landscape models. While CityGML provides a common basis for a multitude of different use cases and applications, specific applications might have modelling requirements that go beyond the predefined elements of the CityGML conceptual model.</p>
</div>
<div class="paragraph">
<p>CityGML affords this flexibility by providing a slim base model with the following distinct extension mechanisms:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Code lists,</p>
</li>
<li>
<p>Generic objects and attributes, and</p>
</li>
<li>
<p>Application Domain Extensions (ADEs).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These extension mechanisms have been introduced with CityGML 1.0 and are since widely used and accepted in the CityGML community.</p>
</div>
<div class="sect3">
<h4 id="extensions-section-codelists"><a class="anchor" href="#extensions-section-codelists"></a>4.7.1. Code Lists</h4>
<div class="paragraph">
<p>When an attribute may have only one value selected from a small and fixed set of values, CityGML 3.0 specifies those as an enumeration. When the set of possible values is a priori unknown but predefined and fixed for a specific application domain or user organization, the values may be modelled as classes with the stereotype &#171;CodeList&#187;.</p>
</div>
<div class="paragraph">
<p>Many attributes of CityGML types use a code list as data type such as, for instance, the attributes <em>class</em>, <em>usage,</em> and <em>function</em> of city objects. A code list defines a value domain including a code for each permissible value. In contrast to fixed enumerations, modifications to the value domain become possible with code lists.</p>
</div>
<div class="paragraph">
<p>The feasible values for attributes with code lists may substantially vary for different applications, uses cases, information communities or even countries (e.g., due to national law or regulations). For this reason, code lists are modelled as empty classes without predefined normative content. The governance of code lists is rather decoupled from the governance of the CityGML conceptual model, and the contents may be defined and managed outside this International Standard by any organization or information community according to their information needs. Code lists should be made available as publicly accessible resource, either globally or within an application domain.</p>
</div>
<div class="paragraph">
<p>Rules and constraints for the encoding of both code lists and attributes having a code list as value are not subject of this document but are defined in a corresponding CityGML Encoding Specification. It is recommended, though, that attributes should be encoded such that they can take a value from a code list and, optionally, provide an identifier that references the code list in a unique way.</p>
</div>
</div>
<div class="sect3">
<h4 id="extensions-section-genericobjects"><a class="anchor" href="#extensions-section-genericobjects"></a>4.7.2. Generic Objects and Attributes</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Fix link to generics section of the standard.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Generic objects and attributes are available from the Generics module of the CityGML Conceptual Model (cf. <a href="#rc_generics_section">[rc_generics_section]</a>). A generic object is intended to be used as proxy for a real-world feature that is not mapped by a specific class in CityGML. Depending on the type and geometric characteristics of the real-world feature, CityGML offers the proxy classes <em>GenericLogicalSpace</em>, <em>GenericOccupiedSpace</em>, <em>GenericUnoccupiedSpace</em> and <em>GenericThematicSurface</em> to capture the feature. Each proxy can have a semantic meaning defined by the attributes <em>class</em>, <em>function</em>, and <em>usage</em>.</p>
</div>
<div class="paragraph">
<p>Generic attributes are name-value pairs that can be assigned to any city object (i.e., an instance of <em>core:AbstractCityObject</em>) to augment it with application data not covered by the predefined attributes. The attribute <em>name</em> can be freely chosen to identify the piece of information represented by the generic attribute. A fixed list of simple data types is offered as possible domains for the attribute <em>value</em>. Generic attributes can be grouped into named collections using the <em>GenericAttributeSet</em> data type.</p>
</div>
<div class="paragraph">
<p>The main advantage of generic objects and attributes is that they are simple and easy-to-use to represent application-specific content. Since this extension mechanism is built into the conceptual model of CityGML, it provides the capability of ad-hoc data enrichment (“at run-time”) without the need for modifying the conceptual model. This flexibility also faces disadvantages though:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Generic objects are “flat” and cannot be decomposed into sub-features and feature hierarchies like other CityGML features such as, for instance, buildings or transportation features. However, they may be related to other city objects through the inherited <em>relatedTo</em> association.</p>
</li>
<li>
<p>Names, data types, and multiplicities of generic attributes cannot be specified in a formal way. Consequently, there is no guarantee for an application that a generic attribute of a specific name and type is available a minimum or maximum number of times for a given city object.</p>
</li>
<li>
<p>Name clashes between generic attributes from different applications are possible and cannot be avoided in a formal way, which might impede semantic interoperability.</p>
</li>
<li>
<p>There is only a limited number of predefined simple data types available for generic attributes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To avoid semantic interoperability issues, generic objects and attributes shall only be used if a more specific feature class or attribute is not available from the CityGML conceptual model.</p>
</div>
</div>
<div class="sect3">
<h4 id="extensions-section-ade"><a class="anchor" href="#extensions-section-ade"></a>4.7.3. Application Domain Extension (ADE)</h4>
<div class="paragraph">
<p>An <em>Application Domain Extension</em> (ADE) is a formal and systematic extension of CityGML for a specific application or domain in the form of a conceptual UML model. The application data is mapped to a set of additional classes, attributes, and relations. ADEs may use elements from CityGML, for instance, to derive application-specific subclasses, to inject additional properties, to associate application data with predefined CityGML content, or to define value domains for attributes.</p>
</div>
<div class="paragraph">
<p>The ADE mechanism allows application-specific information to be aligned with the conceptual model of CityGML in a well-structured and systematic way. By this means, CityGML can be extended to meet the information needs of an application while at the same time preserving its concepts and semantic structures. Moreover, and in contrast to generic city objects and attributes, application data can be validated against the formal definition of an ADE to ensure semantic interoperability.</p>
</div>
<div class="paragraph">
<p>Previous versions of CityGML defined the ADE mechanism solely on the level of the XML Schema encoding. With CityGML 3.0, ADEs become platform-independent models on a conceptual level that can be mapped to multiple and different target encodings.</p>
</div>
<div class="paragraph">
<p>ADEs have successfully been implemented in practice and enable a wide range of applications and use cases based on CityGML. An overview and discussion of existing ADEs is provided in [<a href="#Biljecki2018">[Biljecki2018]</a>].</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
fix uml notation section reference and Biljecki2018 citation.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_general_rules_for_ades"><a class="anchor" href="#_general_rules_for_ades"></a>General Rules for ADEs</h5>
<div class="paragraph">
<p>An ADE shall be defined as conceptual model in UML in accordance with the conceptual modelling framework of the ISO 19100 series of International Standards and by adhering to the General Feature Model and the rules and constraints for application schemas as specified in ISO 19109 and ISO/TS 19103. The <a href="#uml_notation_section">UML notations and stereotypes</a> used in the CityGML conceptual model should also be applied to corresponding model elements in an ADE.</p>
</div>
<div class="paragraph">
<p>Every ADE shall be organized into one or more UML packages having globally unique namespaces and containing all UML model elements defined by the ADE. An ADE may additionally import and use predefined classes from external conceptual UML models such as the CityGML modules or the standardized schemas of the ISO 19100 series of International Standards.</p>
</div>
</div>
<div class="sect4">
<h5 id="_defining_new_ade_model_elements"><a class="anchor" href="#_defining_new_ade_model_elements"></a>Defining New ADE Model Elements</h5>
<div class="paragraph">
<p>Following ISO 19109, features are the primary view of geospatial information and the core elements of application schemas. ADEs therefore typically extend CityGML by defining new feature types appropriate to the application area together with additional content such as object types, data types, code lists, and enumerations.</p>
</div>
<div class="paragraph">
<p>Every feature type in an ADE shall be derived either directly or indirectly from the CityGML root feature type <em>core:AbstractFeature</em> or, depending on its type and characteristics, from a more appropriate subclass thereof. According to the general space concept of CityGML, features representing spaces or space boundaries shall be derived either directly or indirectly from <em>core:AbstractSpace</em> or <em>core:AbstractSpaceBoundary</em> respectively. UML classes representing top-level feature types shall use the <em>&#171;TopLevelFeatureType&#187;</em> stereotype.</p>
</div>
<div class="paragraph">
<p>In contrast to feature types, object types and data types are not required to be derived from a predefined CityGML class unless explicitly stated otherwise.</p>
</div>
<div class="paragraph">
<p>ADE classes may have an unlimited number of attributes and associations in addition to those inherited from their parents. Attributes can be modelled with either simple or complex data types. To ensure semantic interoperability, the predefined types from CityGML or the standardized schemas of the ISO 19100 series of International Standards should be used wherever appropriate. This includes, amongst others, basic types from ISO/TS 19103, geometry and topology objects from ISO 10107, and temporal geometry and topology objects from ISO 19108.</p>
</div>
<div class="paragraph">
<p>If a predefined type is not available, ADEs can either define their own data types or import data types from external conceptual models. This explicitly includes the possibility to define new geometry types not offered by ISO 19107. Designers of an ADE should however note that software might not be able to properly identify and consume such geometry types.</p>
</div>
<div class="paragraph">
<p>A feature type capturing a real-world feature with geometry should be derived either directly or indirectly from <em>core:AbstractSpace</em> or <em>core:AbstractSpaceBoundary</em>. By this means, the predefined spatial properties and the associated LOD concept of CityGML are inherited and available for the feature type. If, however, these superclasses are either inappropriate or lack a spatial property required to represent the feature, an ADE may define new and additional spatial properties. If such a spatial property should belong to one of the predefined LODs, then the property name shall start with the prefix “lod<em>X</em>”, where <em>X</em> is to be replaced by an integer value between 0 and 3 indicating the target LOD. This enables software to derive the LOD of the geometry.</p>
</div>
<div class="paragraph">
<p>Constraints on model elements should be expressed using a formal language such as the Object Constraint Language (OCL). The ADE specifies the manner of application of constraints. However, following the CityGML conceptual model, constraints should at least be expressed on ADE subclasses of <em>core:AbstractSpace</em> to limit the types of space boundaries (i.e., instances of <em>core:AbstractSpaceBoundary</em>) that may be used to model the boundary of a space object.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
add ADE examples
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Illustrative examples for ADEs can be found in the <a href="#_user_guide">CityGML 3.0 User Guide</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_augmenting_citygml_feature_types_with_additional_ade_properties"><a class="anchor" href="#_augmenting_citygml_feature_types_with_additional_ade_properties"></a>Augmenting CityGML Feature Types with Additional ADE Properties</h5>
<div class="paragraph">
<p>If a predefined CityGML feature type lacks one or more properties required for a specific application, a feasible solution is to derive a new ADE feature type as subclass of the CityGML class and to add the properties to this subclass. While conceptually clean, this approach also faces drawbacks. If multiple ADEs require additional properties for the same CityGML feature type, this will lead to many subclasses of this feature type in different ADE namespaces. Information about the same real-world feature might therefore be spread over various instances of the different feature classes in an encoding making it difficult for software to consume the feature data.</p>
</div>
<div class="paragraph">
<p>For this reason, CityGML provides a way to augment the predefined CityGML feature types with additional properties from the ADE domain without the need for subclassing. Each CityGML feature type has an extension attribute of name “adeOf<em>FeatureTypeName</em>” and type “<em>ADEOfFeatureTypeName”</em>, where <em>FeatureTypeName</em> is replaced by the class name in which the attribute is defined. For example, the <em>bldg:Building</em> class offers the attribute <em>bldg:adeOfBuilding</em> of type <em>bldg:ADEOfBuilding</em>. Each of these extension attributes can occur zero to unlimited times, and the attribute types are defined as abstract and empty data types.</p>
</div>
<div class="paragraph">
<p>If an ADE augments a specific CityGML feature type with additional ADE properties, the ADE shall create a subclass of the corresponding abstract data type associated with the feature class. This subclass shall also be defined as data type using the stereotype <em>&#171;DataType&#187;</em>. The additional application-specific attributes and associations are then modelled as properties of the ADE subclass. This may include, amongst others, attributes with simple or complex data type, spatial properties or associations to other object and feature types from the ADE or external models such as CityGML.</p>
</div>
<div class="paragraph">
<p>The predefined “<em>ADEOfFeatureTypeName”</em> data types are called “hooks” because they are used as the head of a hierarchy of ADE subclasses attaching application-specific properties. When subclassing the “hook” of a specific CityGML feature type in an ADE, the properties defined in the subclass can be used for that feature type as well as for all directly or indirectly derived feature types, including feature types defined in the same or another ADE.</p>
</div>
<div class="paragraph">
<p>Multiple distinct ADEs can use the “hook” mechanism to define additional ADE properties for the same CityGML feature type. Since the “adeOf<em>FeatureTypeName</em>” attribute may occur multiple times, the various ADE properties can be exchanged as part of the same CityGML feature instance in an encoding. Software can therefore easily consume the default CityGML feature data plus the additional properties from the different ADEs.</p>
</div>
<div class="paragraph">
<p>Content from unknown or unsupported ADEs may be ignored by an application or service consuming an encoded CityGML model.</p>
</div>
<div class="paragraph">
<p>Designers of an ADE should favor using this “hook” mechanism over subclassing a CityGML feature type when possible. If an ADE must enable other ADEs to augment its own feature types (so-called ADE of an ADE), then it shall implement “hooks” for its feature types following the same schema and naming concept as in the CityGML conceptual model.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Reference to the user guide.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following UML fragment shows an example for using the "hook" mechanism. For more details on this and other example ADEs, please see the <a href="#_user_guide">CityGML 3.0 User Guide</a> for an example ADE.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Energy_ADE_UML_example.png" alt="Energy ADE UML example">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_encoding_of_ades"><a class="anchor" href="#_encoding_of_ades"></a>Encoding of ADEs</h5>
<div class="paragraph">
<p>This document only addresses the conceptual modelling of ADEs. Rules and constraints for mapping a conceptual ADE model to a target encoding are expected to be defined in a corresponding CityGML Encoding Standard. If supported, an ADE may provide additional mapping rules and constraints in conformance with a corrresponding CityGML Encoding Standard.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_conceptual-modeling_section"><a class="anchor" href="#ug_conceptual-modeling_section"></a>4.8. Conceptual Modeling</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Content Needed.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ug_citygml_uml_model_section"><a class="anchor" href="#ug_citygml_uml_model_section"></a>5. CityGML UML Model</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ug_model_overview_section"><a class="anchor" href="#ug_model_overview_section"></a>5.1. Overview</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="conceptual-modeling-description"><a class="anchor" href="#conceptual-modeling-description"></a>5.1.1. Conceptual Modelling</h4>
<div class="paragraph">
<p><a href="#iso19101">ISO 19101</a> defines universe of discourse to be a view of the real or hypothetical world that includes everything of interest.  That standard then defines conceptual model to be a model that defines concepts of a universe of discourse.</p>
</div>
<div class="paragraph">
<p>The scope of this CityGML Conceptual Model Standard establishes the limits of the universe of discourse for this Standard. The next task is to discover and standardize the concepts within this scope. CityGML will potentially support numerous diverse application software packages covering multiple disciplines and facility life cycle phases. Each conceivably can have its own universe of discourse and their own set of concepts.</p>
</div>
<div class="paragraph">
<p>The goal of this CityGML Conceptual Model Standard is to establish and document a common set of concepts that spans the applications supported.  This does not attempt to redefine application concepts, but merely present a common set of concepts from and to which their concepts can be understood and mapped.</p>
</div>
<div class="paragraph">
<p>GML and JSON encodings are planned and other encodings are anticipated. Each encoding addresses a specific information community and set of application software packages. However, with the increasing desire to share information between communities and applications having a common conceptual model across all of these encodings is highly advantageous.</p>
</div>
<div class="paragraph">
<p>An added benefit of the development of a conceptual model results from the rigor involved in achieving consensus. After numerous iterations, the end result is consistent, cohesive, and complete.  Updating a conceptual model is far easier than rewriting software code. Further, the iterations help to flesh out details as well as to unearth differences in individual conceptualizations.</p>
</div>
<div class="paragraph">
<p>Perhaps the greatest benefit of the standards activity is the ability to communicate the resultant model. This is in part due to using a standardized conceptual modelling language like UML and the agreed OGC and ISO/TC211 conventions for using UML. The eventual outcome of being able to provide formal documentation for what is meant by each concept is invaluable in understanding the subsequent encodings and applications.</p>
</div>
<div class="paragraph">
<p>This will be the first OGC conceptual model standard without accompanying encodings. Yet the model is presented in a manner consistent with the formalisms adopted for writing OGC standards. This standard follows the <a href="#ogc08-131">OGC Specification Model standard for modular specifications</a> and is consistent with the OGC Naming Authority conventions and recommendations.  The target of this Standard are the encoding standards which will follow and not the application software that will implement these encodings.  Requirements for the encodings are explicit and grouped into Requirements Classes.  Accompanying Conformance Classes are included to determine if an encoding conforms to the conceptual model.</p>
</div>
<div class="paragraph">
<p>UML has been used as the conceptual modelling language in this Standard.  Class Diagrams have been created and inserted as Figures. The boxes in these diagrams (officially “Classifiers” in UML) typically represent classes, data types, enumerations, code lists, unions, etc. and this terminology is used throughout the Standard. However, since this is a Conceptual Model, these should all be interpreted to be “concepts”.  For each Requirements Class, an introductory diagram is included which contains all of the concepts relevant to that Requirements Class.</p>
</div>
<div class="paragraph">
<p>Though redundant with the UML diagrams, all of the classes, class attributes, and associations are repeated in the Data Dictionary in <a href="#data-dictionary-section">[data-dictionary-section]</a>. If these differ, the UML takes precedence.</p>
</div>
</div>
<div class="sect3">
<h4 id="_from_citygml_2"><a class="anchor" href="#_from_citygml_2"></a>5.1.2. From CityGML 2</h4>
<div class="paragraph">
<p>CityGML is an open data model and XML-based format for the storage and exchange of virtual 3D city models. It is an application schema for the Geography Markup Language version 3.1.1 (GML3), the extendible interna-tional standard for spatial data exchange issued by the Open Geospatial Consortium (OGC) and the ISO TC211.</p>
</div>
<div class="paragraph">
<p>The aim of the development of CityGML is to reach a common definition of the basic entities, attributes, and relations of a 3D city model. This is especially important with respect to the cost-effective sustainable mainte-nance of 3D city models, allowing the reuse of the same data in different application fields.</p>
</div>
<div class="paragraph">
<p>CityGML not only represents the graphical appearance of city models but specifically addresses the representa-tion of the semantic and thematic properties, taxonomies and aggregations. CityGML includes a geometry model and a thematic model. The geometry model allows for the consistent and homogeneous definition of geometrical and topological properties of spatial objects within 3D city models (chapter 8). The base class of all objects is _ <em>CityObject</em> which is a subclass of the GML class _ <em>Feature</em>. All objects inherit the properties from _ <em>CityObject</em>.</p>
</div>
<div class="paragraph">
<p>The thematic model of CityGML employs the geometry model for different thematic fields like Digital Terrain Models, sites (i.e. buildings, bridges, and tunnels), vegetation (solitary objects and also areal and volumetric biotopes), land use, water bodies, transportation facilities, and city furniture (chapter 10). Further objects, which are not explicitly modelled yet, can be represented using the concept of generic objects and attributes (chapter 6.11). In addition, extensions to the CityGML data model applying to specific application fields can be realised using the Application Domain Extensions (ADE) (chapter 6.12). Spatial objects of equal shape which appear many times at different positions like e.g. trees, can also be modelled as prototypes and used multiple times in the city model (chapter 8.2). A grouping concept allows the combination of single 3D objects, e.g. buildings to a building complex (chapter 6.8). Objects which are not geometrically modelled by closed solids can be virtually sealed in order to compute their volume (e.g. pedestrian underpasses, tunnels, or airplane hangars). They can be closed using <em>ClosureSurfaces</em> (chapter 6.4). The concept of the <em>TerrainIntersectionCurve</em> is introduced to inte-grate 3D objects with the Digital Terrain Model at their correct positions in order to prevent e.g. buildings from floating over or sinking into the terrain (chapter 6.5).</p>
</div>
<div class="paragraph">
<p>CityGML differentiates five consecutive Levels of Detail (LOD), where objects become more detailed with increasing LOD regarding both their geometry and thematic differentiation (chapter 6.2). CityGML files can - but do not have to - contain multiple representations (and geometries) for each object in different LOD simulta-neously. Generalisation relations allow the explicit representation of aggregated objects over different scales.</p>
</div>
<div class="paragraph">
<p>In addition to spatial properties, CityGML features can be assigned appearances. Appearances are not limited to visual data but represent arbitrary observable properties of the feature’s surface such as infrared radiation, noise pollution, or earthquake-induced structural stress (chapter 9).</p>
</div>
<div class="paragraph">
<p>Furthermore, objects can have external references to corresponding objects in external datasets (chapter 6.7). The possible attribute values of enumerative object attributes can be enumerated in code lists defined in external, redefinable dictionaries (chapter 6.6).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_core_section"><a class="anchor" href="#ug_model_core_section"></a>5.2. Core</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The CityGML Core module defines the basic concepts and components of the overall CityGML data model.  It forms the universal lower bound of the CityGML data model and, thus, is a dependency of all extension modules. Consequently, the core module has to be implemented by any conformant system. Primarily, the core module provides the abstract base classes from which thematic classes within extension modules are (transitively) derived. Besides abstract type definitions, the core also contains non-abstract content, for example basic data types and thematic classes that may be used by more than one extension module. The UML diagram in Fig. 21 illustrates CityGML’s core module, for the XML Schema definition see below and annex A.1.</p>
</div>
<div id="figure-21" class="imageblock">
<div class="content">
<img src="figures/Figure_21.png" alt="Figure 21">
</div>
<div class="title">Figure 7. UML diagram of CityGML’s core module. The bracketed numbers following the attribute names denote the attribute’s multiplicity: the minimal and maximal number of occurrences of the attribute per object. For example, a name is optional (0) in the class _Feature or may occur multiple times (star symbol), while a _CityObject has none or at most one creationDate. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML Core module.</div>
</div>
<div class="paragraph">
<p>The base class of all thematic classes within CityGML’s data model is the abstract class  _CityObject. _CityObject provides a creation and a termination date for the management of histories of features as well as the possibility to model external references to the same object in other data sets. Furthermore, two qualitative attributes relativeToTerrain and relativeToWater are provided which enable to specify the feature’s location with respect to the terrain and water surface. The possible topological relations are illustrated in Fig. 22. Both attributes facilitate simple and efficient queries like for the number of subsurface buildings (entirelyBelowTerrain) without the need for an additional digital terrain model or a model of the water body.</p>
</div>
<div id="figure-22" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_22_a.png" alt="Figure 22 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_22_b.png" alt="Figure 22 b">
</div>
<div class="title">Figure 8. Topological relations of a CityGML object with respect to a) the terrain and b) the water surface.</div>
</div>
<div class="paragraph">
<p>_CityObject is a subclass of the GML class _Feature, thus it inherits the metadata property (which can be e.g. information about the lineage, quality aspects, accuracy, local CRS) and name property from the superclass _GML. A _CityObject may have multiple names, which are optionally qualified by a codeSpace. This enables the differentiation between, for example, an official name and a popular name or of names in different languages (cf. the name property of GML objects, Cox et al. 2004). The generalisation property generalizesTo of _CityObject may be used to relate features, which represent the same real-world object in different Levels-of-Detail, i.e. a feature and its generalised counterpart(s). The direction of this relation is from the feature to the corresponding generalised feature.</p>
</div>
<div class="paragraph">
<p>Thematic classes may have further subclasses with relations, attributes and geometry. Features of the specialized subclasses of _CityObject may be aggregated to a single CityModel, which is a feature collection with optional metadata. Generally, each feature has the attributes class, function, and usage, unless it is stated otherwise. The class attribute can occur only once, while the attributes usage and function can be used multiple times. The class attribute allows for the classification of features beyond the thematic class hierarchy of _CityObject. For exam-ple, a building feature is represented by the thematic subclass bldg:Building of _CityObject in the first place (this subclass is defined within CityGML’s Building module, cf. chapter 10.3). A further classification, e.g. as resi-dential or administration building, may then be modelled using the class attribute of the class bldg:Building. The attribute function normally denotes the intended purpose or usage of the object, such as hotel or shopping centre for a building, while the attribute usage normally defines its real or actual usage. Possible values for the attrib-utes class, function, and usage can be specified in code lists which are recommended to be implemented as simple dictionaries following the Simple Dictionary Profile of GML 3.1.1 (cf. chapter 6.6 and 10.14). Annex C provides code lists proposed and maintained by the SIG 3D which contain feasible attribute values and which may be extended or redefined by users.</p>
</div>
<div class="paragraph">
<p>In addition to thematic content, the core module also provides the concept of implicit geometries as an enhance-ment of the geometry model of GML3. Since this concept is strongly related to the spatial model of CityGML it has already been introduced in chapter 8.2.</p>
</div>
<div class="paragraph">
<p>The top level class hierarchy of the thematic model in CityGML is presented in Fig. 23. The subclasses of _CityObject comprise the different thematic fields of a city model covered by separate CityGML extension modules: the terrain, buildings, bridges, tunnels, the coverage by land use objects, water bodies, vegetation, generic city objects, city furniture objects, city object groups, and transportation. To indicate the extension module defining a respective subclass of _CityObject, the class names in Fig. 23 are preceded by prefixes. Each prefix is associated with one CityGML extension module (see chapter 4.3 and chapter 7 for a list of CityGML’s extension modules and the corresponding prefixes).</p>
</div>
<div id="figure-23" class="imageblock">
<div class="content">
<img src="figures/Figure_23.png" alt="Figure 23">
</div>
<div class="title">Figure 9. CityGML’s top level class hierarchy. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML Core module.</div>
</div>
<div class="paragraph">
<p>The classes GenericCityObject and _genericAttribute defined within CityGML’s Generics module (cf. chapters 6.11 and 10.12) allow for modelling and exchanging of 3D objects which are not covered by any other thematic class or which require attributes not represented in CityGML. For example, in the future, sites derived from the abstract class _Site of the core module may be completed by further subclasses like excavation, city wall or embankment. At present, the class GenericCityObject should be used in order to represent and exchange these features. However, the concept of generic city objects and attributes may only be used if appropriate thematic classes or attributes are not provided by any other CityGML module.</p>
</div>
<div class="paragraph">
<p>If the Generics module is employed, each CityObject may be assigned an arbitrary number of generic attributes in order to represent additional properties of features. For this purpose, the Generics module augments the abstract base class _CityObject by the property element _genericAttribute. The additional property _genericAttribute is injected into _CityObject using CityGML’s Application Domain Extension mechanism (cf. chapter 10.13). By this means, each thematic subclass of _CityObject inherits this property and, thus, the possi-bility to contain generic attributes. Therefore, the Generics module has a deliberate impact on all CityGML extension modules defining thematic subclasses of _CityObject.</p>
</div>
<div class="paragraph">
<p>Appearance information about a feature’s surfaces can be represented by the class Appearance provided by CityGML’s Appearance module (cf. chapter 9). In contrast to the other thematic extensions to the core, Appear-ance is not derived from _CityObject but from the GML class _Feature. _CityObject features and Appearance features may be embraced within a single CityModel feature collection in an arbitrary or even mixed sequence using the cityObjectMember and appearanceMember elements, both being members of the substitution group gml:featureMember (cf. chapter 9 and chapter 10.1.1). Furthermore, feature appearances may be stored inline the _CityObject itself. In order to enable city objects to store appearance information, the Appearance module augments the abstract base class _CityObject by the property element appearance using CityGML’s Application Domain Extension mechanism (cf. chapter 10.13). Consequently, the appearance property is only available for _CityObject and its thematic subclasses if the Appearance module is supported. Therefore, like the Generics module, the Appearance module has a deliberate impact on any other extension module.</p>
</div>
<div class="paragraph">
<p>For sake of completeness, the class TexturedSurface is also illustrated in Fig. 23. This approach of appearance modelling of previous versions of CityGML has been deprecated and is expected to be removed in future CityGML versions. Since the information covered by TexturedSurface can be losslessly converted to the Ap-pearance module, the use of TexturedSurface is strongly discouraged.</p>
</div>
<div class="sect3">
<h4 id="_base_elements"><a class="anchor" href="#_base_elements"></a>5.2.1. Base elements</h4>
<div class="sect4">
<h5 id="_abstractcityobjecttype_cityobject"><a class="anchor" href="#_abstractcityobjecttype_cityobject"></a>AbstractCityObjectType, _CityObject</h5>

</div>
<div class="sect4">
<h5 id="_abstractcityobjecttype_cityobject_2"><a class="anchor" href="#_abstractcityobjecttype_cityobject_2"></a>AbstractCityObjectType, _CityObject</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractCityObjectType, _CityObject UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_citymodeltype_citymodel"><a class="anchor" href="#_citymodeltype_citymodel"></a>CityModelType, CityModel</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert CityModelType, CityModel UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_cityobjectmember"><a class="anchor" href="#_cityobjectmember"></a>cityObjectMember</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert cityObjectMember UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_abstractsitetype_site"><a class="anchor" href="#_abstractsitetype_site"></a>AbstractSiteType, _Site</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractSiteType, _Site UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The abstract class _Site is intended to be the superclass for buildings, bridges, tunnels, facilities, etc. Future extension of CityGML (e.g. excavations, city walls or embankments) would be modelled as subclasses of _Site. As subclass of _CityObject, a _Site inherits all attributes and relations, in particular the id, names, external references, and generalisation relations.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_generalisation_relation_relativetoterraintype_and_relativetowatertype"><a class="anchor" href="#_generalisation_relation_relativetoterraintype_and_relativetowatertype"></a>5.2.2. Generalisation relation, RelativeToTerrainType and RelativeToWaterType</h4>
<div class="sect4">
<h5 id="_generalizationrelationtype"><a class="anchor" href="#_generalizationrelationtype"></a>GeneralizationRelationType</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert GeneralizationRelationType UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_relativetoterraintype_relativetowatertype"><a class="anchor" href="#_relativetoterraintype_relativetowatertype"></a>RelativeToTerrainType, RelativeToWaterType</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert RelativeToTerrainType, RelativeToWaterType UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_external_references"><a class="anchor" href="#_external_references"></a>5.2.3. External references</h4>
<div class="paragraph">
<p>An ExternalReference defines a hyperlink from a _CityObject to a corresponding object in another information system, for example in the German cadastre (ALKIS), the German topographic information system (ATKIS), or the OS MasterMap®. The reference consists of the name of the external information system, represented by an URI, and the reference of the external object, given either by a string or by an URI. If the informationSystem element is missing in the ExternalReference, the ExternalObjectReference must be an URI.</p>
</div>
<div class="sect4">
<h5 id="_externalreferencetype_externalobjectreferencetype"><a class="anchor" href="#_externalreferencetype_externalobjectreferencetype"></a>ExternalReferenceType, ExternalObjectReferenceType</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert ExternalReferenceType, ExternalObjectReferenceType UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_address_information"><a class="anchor" href="#_address_information"></a>5.2.4. Address information</h4>
<div class="paragraph">
<p>The CityGML core module provides the means to represent address information of real-world features within virtual city models. Since not every real-world feature is assigned an address, a correspondent address property is not defined for the base class _CityObject, but has to be explicitly modelled for a thematic subclass. For example, the building model declares address properties for its classes _AbstractBuilding and Door. Both classes are referencing the corresponding data types of the core module to represent address information (cf. chapter 10.3).</p>
</div>
<div class="paragraph">
<p>Addresses are modelled as GML features having one xalAddress property and an optional multiPoint property. For example, for a building feature the multiPoint property allows for the specification of the exact positions of the building entrances that are associated with the corresponding address. The point coordinates can be 2D or 3D. Modelling addresses as features has the advantage that GML3’s method of representing features by refer-ence (using XLinks) can be applied. This means, that addresses might be bundled as an address FeatureCollec-tion that is stored within an external file or that can be served by an external Web Feature Service. The address property elements within the CityGML file then would not contain the address information inline but only references to the corresponding external features.</p>
</div>
<div class="paragraph">
<p>The address information is specified using the xAL address standard issued by the OASIS consortium (OASIS 2003), which provides a generic schema for all kinds of international addresses. Therefore, child elements of the xalAddress property of Address have to be structured according to the OASIS xAL schema.</p>
</div>
<div class="sect4">
<h5 id="_addresspropertytype_addresstype_address"><a class="anchor" href="#_addresspropertytype_addresstype_address"></a>AddressPropertyType, AddressType, Address</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AddressPropertyType, AddressType, Address UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following two excerpts of a CityGML dataset contain examples for the representation of German and British addresses in xAL. The address information is attached to building objects (bldg:Building) according to the CityGML Building module (cf. chapter 10.3). Generally, if a CityGML instance document contains address information, the namespace prefix “xAL” should be declared in the root element and must refer to “urn:oasis:names:tc:ciq:xsdschema:xAL:2.0”. An example showing a complete CityGML dataset including a building with an address element is provided in annex G.1.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert examples here if appropriate.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_appearance_section"><a class="anchor" href="#ug_model_appearance_section"></a>5.3. Appearance</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition to spatial properties, CityGML features have appearances – observable properties of the feature’s surface. Appearances are not limited to visual data but represent arbitrary categories called themes such as infrared radiation, noise pollution, or earthquake-induced structural stress. Each LOD can have an individual appearance for a specific theme. An appearance is composed of data for each surface geometry object, i.e. surface data. A single surface geometry object may have surface data for multiple themes. Similarly, surface data can be shared by multiple surface geometry objects (e.g. road paving). Finally, surface data values can either be constant across a surface or depend on the exact location within the surface.</p>
</div>
<div class="paragraph">
<p>CityGML’s appearance model is defined within the extension module Appearance (cf. chapter 7). The UML diagram of the appearance model is illustrated in Fig. 14, for the XML Schema definition see annex A.2.</p>
</div>
<div id="figure-14" class="imageblock">
<div class="content">
<img src="figures/Figure_14.png" alt="Figure 14">
</div>
<div class="title">Figure 10. UML diagram of CityGML’s appearance model. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML Appearance module.</div>
</div>
<div class="paragraph">
<p>In CityGML’s appearance model, themes are represented by an identifier only. The appearance of a city model for a given theme is defined by a set of Appearance objects referencing this theme. Thus, the Appearance objects belonging to the same theme compose a virtual group. They may be included in different places within a CityGML dataset. Furthermore a single CityGML dataset may contain several themes. An Appearance object collects surface data relevant for a specific theme either for individual features or the whole city model in any LOD. Surface data is represented by objects of class _SurfaceData and its descendents with each covering the whole area of a surface geometry object. The relation between surface data and surface geometry objects is expressed by an URI (Uniform Resource Identifier) link from a _SurfaceData object to an object of type gml:AbstractSurfaceType or type gml:MultiSurface.</p>
</div>
<div class="paragraph">
<p>A constant surface property is modelled as material. A surface property, which depends on the location within the surface, is modelled as texture. Each surface geometry object can have both a material and a texture per theme and side. This allows for providing both a constant approximation and a complex measurement of a surface’s property simultaneously. An application is responsible for choosing the appropriate property represen-tation for its task (e.g. analysis or rendering). A specific mixing is not defined since this is beyond the scope of CityGML. If a surface geometry object is to receive multiple textures or materials, each texture or material requires a separate theme. The mixing of themes or their usage is not defined within CityGML and left to the application.</p>
</div>
<div class="paragraph">
<p><strong>XML namespace</strong></p>
</div>
<div class="paragraph">
<p>The XML namespace of the CityGML Appearance module is identified by the Uniform Resource Identifier (URI) <a href="http://www.opengis.net/citygml/appearance/2.0" class="bare">http://www.opengis.net/citygml/appearance/2.0</a>. Within the XML Schema definition of the Appearance module, this URI is also used to identify the default namespace.</p>
</div>
<div class="sect3">
<h4 id="_relation_between_appearances_features_and_geometry"><a class="anchor" href="#_relation_between_appearances_features_and_geometry"></a>5.3.1. Relation between appearances, features and geometry</h4>
<div class="paragraph">
<p>Despite the close relation between surface data and surface, surface data is stored separately in the feature to preserve the original GML geometry model. Instead of surface data being an attribute of the respective target surface geometry object, each surface data object maintains a set of URIs specifying the gml:ids of the target surface geometry objects (of type gml:AbstractSurfaceType or gml:MultiSurface). In case of a composite or aggregate target surface, the surface data object is assigned to all contained surfaces. Other target types such as features, solids, or gml:AbstractSurfacePatchType (which includes gml:Triangle) are invalid, even though the XML schema language cannot formally express constrains on URI target types. For the exact mapping function of surface data values to a surface patch refer to the respective surface data type description.</p>
</div>
<div class="paragraph">
<p>The limitation of valid target types to gml:AbstractSurfaceType and gml:MultiSurface excluding gml:Abstract-SurfacePatchType is based on the GML geometry model and its use in CityGML. In general, GML surfaces are represented using subclasses of gml:AbstractSurfaceType. Such surfaces are required to be continuous. A gml:MultiSurface does not need to fulfill this requirement and consequently is no gml:AbstractSurfaceType (cf. 8.1). Since captured real-world surfaces often cannot be guaranteed to be continuous, CityGML allows for gml:MultiSurface to represent a feature’s boundary in various places as an alternative to a continuous surface. To treat such surfaces similarly to a gml:CompositeSurface, surface data objects are allowed to link to gml:Multi-Surface objects. gml:AbstractSurfacePatchType is no valid target type since it is not derived from gml:AbstractGMLType. Thus, a gml:AbstractSurfacePatchType (which includes gml:Triangle and gml:Rectangle) cannot receive a gml:id and cannot be referenced.</p>
</div>
<div class="paragraph">
<p>Each surface geometry object can have per theme at most one active front-facing material, one active back-facing material, one active front-facing texture, and one active back-facing texture. If multiple surface data objects of the same category and theme are assigned to a surface geometry object, one is chosen to become active. Multiple indirect assignments due to nested surface definitions are resolved by overwriting, e.g. the front-facing material of a gml:Polygon becomes active by overwriting the front-facing material of the parental gml:CompositeSurface. Multiple direct assignments, i.e. a surface geometry object’s gml:id is referenced multi-ple times within a theme, are not allowed and are resolved implementation-dependently by choosing exactly one of the conflicting surface data objects. Thus, multiple direct assignments within a theme need to be avoided.</p>
</div>
<div class="paragraph">
<p>Each _CityObject feature can store surface data. Thus, surface data is arranged in the feature hierarchy of a CityGML dataset. Surface data then links to its target surface using URIs. Even though the linking mechanism permits arbitrary links across the feature hierarchy to another feature’s surface, it is recommended to follow the principle of locality: Surface data should be stored such that the linked surfaces only belong to the containing _CityObject feature and its children. “Global” surface data should be stored with the city model. Adhering to the locality principle also ensures that CityObjects retrieved from a WFS will contain the respective appearance information.</p>
</div>
<div class="paragraph">
<p>The locality principle allows for the following algorithm to find all relevant _SurfaceData objects referring to a given surface geometry object (of type gml:AbstractSurfaceType or gml:MultiSurface) in a given _CityObject:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>___________________________
  function findSurfaceData
  in: gmlSurface, cityObject
  out: frontMaterial, frontTexture, backMaterial, backTexture
___________________________
  1: frontMaterial := empty
  2: frontTexture := empty
  3: backMaterial := empty
  4: backTexture := empty
  5: flip := false
  6:
  7: while (gmlSurface) { // traverse the geometry hierarchy from inner to outer
  8:   cObj := cityObject // start from the innermost cityobject
  9:
  10:   while (cObj) { // traverse the cityobject hierarchy for the current geometry object 11: // search all surfaceData objects in all appearance containers
  12:     foreach (appearance in cObj) {
  13:       foreach (surfaceData in appearance) {
  14:         if (surfaceData refers to gmlSurface) { // if a surfaceData object refers to the geometry object, check its category
  15:           if (flip) { // consider flipping
  16: // only pick the first surfaceData for a particular category
  17:             if (surfaceData is frontside material AND backMaterial is empty) {
  18:               backMaterial := surfaceData
  19:             }
  20:             if (surfaceData is frontside texture AND backTexture is empty) {
  21:               backTexture := surfaceData
  22:             }
  23:             if (surfaceData is backside material AND frontMaterial is empty) {
  24:               frontMaterial := surfaceData
  25:             }
  26:             if (surfaceData is backside texture AND frontTexture is empty) {
  27:               frontTexture := surfaceData
  28:             }
  29:           } else {
  30:             // only pick the first surfaceData for a particular category
  31:             if (surfaceData is frontside material AND frontMaterial is empty) {
  32:               frontMaterial := surfaceData
  33:             }
  34:             if (surfaceData is frontside texture AND frontTexture is empty) {
  35:               frontTexture := surfaceData
  36:             }
  37:             if (surfaceData is backside material AND backMaterial is empty) {
  38:               backMaterial := surfaceData
  39:             }
  40:             if (surfaceData is backside texture AND backTexture is empty) {
  41:               backTexture := surfaceData
  42:             }
  43:           }
  44:
  45:           // shortcut: could stop here if all 4 categories have been found
  46:         }
  47:       }
  48:     }
  49:     cObj := cObj.parent // this also includes the global CityModel
  50:   }
  51:   gmlSurface := gmlSurface.parent // this also includes a root gml:MultiSurface
  52:   if (gmlSurface isA gml:OrientableSurface AND gmlSurface.orientation is negative) {
  53:     negate flip
  54:   }
  55: }</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Listing 1: Algorithm to find all relevant _SurfaceData objects referring to a given surface geometry object (of type gml:AbstractSurfaceType or gml:MultiSurface) in a given _CityObject.</div>
<p>The evaluation of the isFront property of a _SurfaceData object needs to take gml:OrientableSurfaces into account, as those can flip the orientation of a surface. Assume a gml:OrientableSurface os, which flips its base surface bs. A front side texture t targeting bs will appear on the actual front side of bs. If t targets os, it will appear on the back side of bs. If t targets both os and bs, it appears on both sides of bs since it becomes the front and back side texture.</p>
</div>
<div class="paragraph">
<p>XLinks influence the hierarchy traversal in the pseudocode. In general, the separation of surface data and geome-try objects requires the reevaluation of the surface data assignment for each occurrence of a geometry object in the context of the respective _CityObject. Stepping up the (geometry or _CityObject) hierarchy in the algorithm takes XLinks into account, i.e., for the purpose of this algorithm, referenced objects are conceptually copied to the location of the referring XLink. In particular, this applies to ImplicitGeometry objects. If an ImplicitGeome-try object contains GML geometry (in the relativeGMLGeometry property), the surface data assignment needs to be reevaluated in the context of each referring _CityObject. Thus, the appearance (but not the relative geometry) of a given ImplicitGeometry can differ between its occurrences. A consistent appearance results if all required surface data objects are placed in Appearance objects and the latter are stored either</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>in the _CityObject containing the original ImplicitGeometry with XLinks referencing the same Appear-ance objects in all _CityObjects that refer to the ImplicitGeometry or</p>
</li>
<li>
<p>in the global CityModel.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_appearance_and_surfacedata"><a class="anchor" href="#_appearance_and_surfacedata"></a>5.3.2. Appearance and SurfaceData</h4>
<div class="paragraph">
<p>The feature class Appearance defines a container for surface data objects. It provides the theme that all contained surface data objects are related to. All appearance objects with the same theme in a CityGML file are considered a group. Surface data objects are stored in the surfaceDataMember property. They can be used in multiple themes simultaneously as remote properties.</p>
</div>
<div class="paragraph">
<p>The feature class _SurfaceData is the base class for materials and textures. Its only element is the boolean flag isFront, which determines the side a surface data object applies to. Please note, that all classes of the appearance model support CityGML’s ADE mechanism (cf. chapters 6.12 and 10.13). The hooks for application specific extensions are realized by the elements “_GenericApplicationPropertyOf…”.</p>
</div>
<div class="sect4">
<h5 id="_appearancetype_appearance_appearancepropertytype"><a class="anchor" href="#_appearancetype_appearance_appearancepropertytype"></a>AppearanceType, Appearance, AppearancePropertyType</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_appearancemember_appearance"><a class="anchor" href="#_appearancemember_appearance"></a>appearanceMember, appearance</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The definition of appearanceMember allows for an arbitrary or even mixed sequence of _CityObject features and Appearance features within a CityModel feature collection (cf. chapter 10.1).</p>
</div>
<div class="paragraph">
<p>In order to store appearance information within a single _CityObject feature, the corresponding abstract class _CityObject of the core module is augmented by the property element appearance. The additional property appearance is injected into _CityObject using CityGML’s Application Domain Extension mechanism (cf. chapter 10.13). By this means, each thematic subclass of _CityObject inherits this property. Thus, the Appear-ance module has a deliberate impact on each extension module defining thematic subclasses of _CityObject.</p>
</div>
</div>
<div class="sect4">
<h5 id="_abstractsurfacedatatype_surfacedata_surfacedatapropertytype"><a class="anchor" href="#_abstractsurfacedatatype_surfacedata_surfacedatapropertytype"></a>AbstractSurfaceDataType, _SurfaceData, SurfaceDataPropertyType</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_material"><a class="anchor" href="#_material"></a>5.3.3. Material</h4>
<div class="paragraph">
<p>Materials define light reflection properties being constant for a whole surface geometry object. The definition of the class X3DMaterial is adopted from the X3D and COLLADA specification (cf. X3D, COLLADA specifica-tion). diffuseColor defines the color of diffusely reflected light. specularColor defines the color of a directed reflection. emissiveColor is the color of light generated by the surface. All colors use RGB values with red, green, and blue between 0 and 1. Transparency is defined separately using the transparency element where 0 stands for fully opaque and 1 for fully transparent. ambientIntensity defines the minimum percentage of dif-fuseColor that is visible regardless of light sources. shininess controls the sharpness of the specular highlight. 0 produces a soft glow while 1 results in a sharp highlight. isSmooth gives a hint for normal interpolation. If this boolean flag is set to true, vertex normals should be used for shading (Gouraud shading). Otherwise, normals should be constant for a surface patch (flat shading).</p>
</div>
<div class="paragraph">
<p>Target surfaces are specified using target elements. Each element contains the URI of one target surface geome-try object (of type gml:AbstractSurfaceType or gml:MultiSurface).</p>
</div>
<div class="sect4">
<h5 id="_x3dmaterialtype_x3dmaterial"><a class="anchor" href="#_x3dmaterialtype_x3dmaterial"></a>X3DMaterialType, X3DMaterial</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_texture_and_texture_mapping"><a class="anchor" href="#_texture_and_texture_mapping"></a>5.3.4. Texture and texture mapping</h4>
<div class="paragraph">
<p>The abstract base class for textures is _Texture. Textures in CityGML are always raster-based 2D textures. The raster image is specified by imageURI using a URI and can be an arbitrary image data resource, even a prefor-matted request for a web service. The image data format can be defined using standard MIME types in the mimeType element.</p>
</div>
<div class="paragraph">
<p>Textures can be qualified by the attribute textureType. The textureType differentiates between textures, which are specific for a certain object (specific) and prototypic textures being typical for that object surface (typical). Textures may also be classified as unknown.</p>
</div>
<div class="paragraph">
<p>The specification of texture wrapping is adopted from the COLLADA standard. Texture wrapping is required when accessing a texture outside the underlying image raster. wrapMode can have one of five values (Fig. 15 illustrates the effect of these wrap modes):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>none – the resulting color is fully transparent</p>
</li>
<li>
<p>wrap – the texture is repeated</p>
</li>
<li>
<p>mirror – the texture is repeated and mirrored</p>
</li>
<li>
<p>clamp – the texture is clamped to its edges</p>
</li>
<li>
<p>border – the resulting color is specified by the borderColor element (RGBA)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In wrap mode mirror, the texture image is repeated both in horizontal and in vertical direction to fill the texture space similar to wrap mode wrap. Unlike wrap, each repetition results from flipping the previous texture part along the repetition direction. This behaviour removes the edge correspondence constraint for wrapped textures and always results in a seamless texture.</p>
</div>
<div id="figure-15" class="imageblock">
<div class="content">
<img src="figures/Figure_15.png" alt="Figure 15">
</div>
<div class="title">Figure 11. A texture (a) applied to a facade using different wrap modes: (b) none, (c) wrap, (d) mirror, (e) clamp and (f) border. The border color is red. The numbers denote texture coordinates (image: Hasso-Plattner-Institute).</div>
</div>
<div class="sect4">
<h5 id="_abstracttexturetype_texture_wrapmodetype_texturetypetype"><a class="anchor" href="#_abstracttexturetype_texture_wrapmodetype_texturetypetype"></a>AbstractTextureType, _Texture, WrapModeType, TextureTypeType</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>_Texture is further specialised according to the texture parameterisation, i.e. the mapping function from a loca-tion on the surface to a location in the texture image. CityGML uses the notion of texture space, where the texture image always occupies the region [0,1]² regardless of the actual image size or aspect ratio. The lower left image corner is located at the origin (some graphics APIs may use other conventions and require texture coordi-nate conversion). The mapping function must be known for each surface geometry object to receive texture.</p>
</div>
<div id="figure-16" class="imageblock">
<div class="content">
<img src="figures/Figure_16.jpg" alt="Figure 16">
</div>
<div class="title">Figure 12. A georeferenced texture applied to ground and roof surfaces (source: Senate of Berlin, Hasso-Plattner-Institute).</div>
</div>
<div class="paragraph">
<p>The class GeoreferencedTexture describes a texture that uses a planimetric projection. Consequently, it does not make sense to texture vertical surfaces using a GeoreferencedTexture. Such a texture has a unique mapping function which is usually provided with the image file (e.g. georeferenced TIFF) or as a separate ESRI world file1. The search order for an external georeference is determined by the boolean flag preferWorldFile. If this flag is set to true (its default value), a world file is looked for first and only if it is not found the georeference from the image data is used. If preferWorldFile is false, the world file is used only if no georeference from the image data is available.</p>
</div>
<div class="paragraph">
<p>Alternatively, CityGML allows for inline specification of a georeference similar to a world file. This internal georeference specification always takes precedence over any external georeference. referencePoint defines the location of the center of the upper left image pixel in world space and corresponds to values 5 and 6 in an ESRI world file. Since GeoreferencedTexture uses a planimetric projection, referencePoint is two-dimensional. orien-tation defines the rotation and scaling of the image in form of a 2x2 matrix (a list of 4 doubles in row-major order corresponding to values 1, 3, 2, and 4 in an ESRI world file). The CRS of this transformation is identical to the referencePoint’s CRS. A planimetric point  T x, y in that CRS is transformed to a point  T s,t in texture
space using the formula:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert equation
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>with M denoting orientation, PR denoting referencePoint., w the image’s width in pixels, and h the image’s height in pixels. This transformation compensates for the difference between the image coordinate system used in ESRI world files (origin in upper left corner, positive x-axis rightwards, and positive y-axis downwards) and texture space in CityGML (origin in lower left corner, positive x-axis rightwards, and positive y-axis upwards).</p>
</div>
<div class="paragraph">
<p>If neither an internal nor an external georeference is given the GeoreferencedTexture is invalid. Each target surface geometry object is specified by an URI in a target element. All target surface geometry objects share the mapping function defined by the georeference. No other mapping function is allowed. Please note, that the gml:boundedBy property inherited from gml:AbstractFeatureType could be set to the bounding box of valid image data to allow for spatial queries. Fig. 16 shows a georeferenced texture applied to the ground and all roof surfaces.</p>
</div>
</div>
<div class="sect4">
<h5 id="_georeferencedtexturetype_georeferencedtexture"><a class="anchor" href="#_georeferencedtexturetype_georeferencedtexture"></a>GeoreferencedTextureType, GeoreferencedTexture</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class ParameterizedTexture describes a texture with target-dependent mapping function. The mapping is defined by subclasses of class _TextureParameterization as a property of the link to the target surface geometry object. Each target surface geometry object is specified as URI in the uri attribute of a separate target element. Since target implements gml:AssociationAttributeGroup, it allows referencing to a remote _TextureParameterization object (using the xlink:href attribute), e.g. for sharing a mapping function between targets or textures in different themes. The mapping function can either use the concept of texture coordinates (through class TexCoordList) or a transformation matrix from world space to texture space (through class TexCoordGen).</p>
</div>
<div id="figure-17" class="imageblock">
<div class="content">
<img src="figures/Figure_17.jpg" alt="Figure 17">
</div>
<div class="title">Figure 13. Positioning of textures using texture coordinates (image: IGG Uni Bonn).</div>
</div>
<div class="paragraph">
<p>Texture coordinates are applicable only to polygonal surfaces, whose boundaries are described by gml:LinearRing (e.g., gml:Triangle, gml:Polygon, or a gml:MultiSurface consisting of gml:Polygons). They define an explicit mapping of a surface’s vertices to points in texture space, i.e. each vertex including interior ring vertices must receive a corresponding coordinate pair in texture space (for the notion of coordinates, refer to ISO 19111). These coordinates are not restricted to the [0,1] interval. Texture coordinates for interior surface points are planarly interpolated from the vertices’ texture coordinates. Fig. 16 shows an example.</p>
</div>
<div class="paragraph">
<p>Texture coordinates for a target surface geometry object are specified using class TexCoordList as a texture parameterization object in the texture’s target property. Each exterior and interior gml:LinearRing composing the boundary of the target surface geometry object (which also might be a gml:CompositeSurface, gml:MultiSurface, or gml:TriangulatedSurface) requires its own set of texture coordinates. A set of texture coordinates is specified using the textureCoordinates element of class TexCoordList. Thus, a TexCoordList contains as many textureCoordinate elements as the target surface geometry object contains gml:LinearRings. textureCoordinate’s mandatory attribute ring provides the gml:id of the respective ring. The content is an ordered list of double values where each two values define a  T s,t texture coordinate pair with s denoting the horizontal and t the vertical texture axis. The list contains one pair per ring point with the pairs’ order corresponding to the ring points’ order in the CityGML document (regardless of a possibly flipped surface orientation). If any ring point of a target surface geometry object has no texture coordinates assigned, the mapping is incomplete and the respective surface cannot be textured. In case of aggregated target geometry objects, mapping completeness is determined only for leaf geometry objects.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
combine figures 18
</td>
</tr>
</table>
</div>
<div id="figure-18" class="imageblock">
<div class="content">
<img src="figures/inwork/figure_18_a.jpg" alt="figure 18 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/figure_18_b.jpg" alt="figure 18 b">
</div>
<div class="title">Figure 14. Projecting a photograph (a) onto multiple facades (b) using the worldToTexture transformation. The photograph does not cover the left facade completely. Thus, the texture appears to be clipped. Texture wrapping is set to “none” (source: Senate of Berlin, Hasso-Plattner-Institute).</div>
</div>
<div class="paragraph">
<p>Alternatively, the mapping function can comprise a 3x4 transformation matrix specified by class TexCoordGen. The transformation matrix, specified by the worldToTexture element, defines a linear transformation from a spatial location in homogeneous coordinates to texture space. The use of homogeneous coordinates facilitates perspective projections as transformation, e.g. for projecting a photograph into a city model (cf. Fig. 18). Texture coordinates  T s,t are calculated from a space location  T x, y, z as    T T s,t  s q,t q with    T T s,t,q M x, y, z,1 . M denotes the 3x4 transformation matrix. Compared to a general 4x4 transformation, the resulting z component is ignored. Thus, the respective matrix row is omitted. Additionally, the worldToTexture element uses the gml:SRSReferenceGroup attributes to define its CRS. A location in world space has to be first transformed into this CRS before the transformation matrix can be applied.</p>
</div>
<div class="paragraph">
<p>The following construction results in a worldToTexture transformation that mimics the process of taking a photograph by projecting a location in world space (in the city model) to a location in texture space:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert transformation matrix
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this formula, f denotes the focal length; w and h represent the image sensor’s physical dimensions; r

, u

, and
d

define the camera’s frame of reference as right, up and directional unit vectors expressed in world coordinates;
and P stands for the camera’s location in world space. Fig. 19 sketches this setting.</p>
</div>
<div id="figure-19" class="imageblock">
<div class="content">
<img src="figures/figure_19.png" alt="figure 19">
</div>
<div class="title">Figure 15. Projective texture mapping. All points on a ray R starting from the projection center P are mapped to the same point T in texture space (image: Hasso-Plattner-Institute, IGG TU Berlin).</div>
</div>
<div class="paragraph">
<p>Alternatively, if the 3x4 camera matrix MP is known (e.g. through a calibration and registration process), it can easily be adopted for use in worldToTexture. MP is derived from intrinsic and extrinsic camera parameters (interior and exterior orientation) and transforms a location in world space to a pixel location in the image. Assuming the upper left image corner has pixel coordinates (0,0), the complete transformation to texture space coordinates can be written as (widthimage and heightimage denote the image size in pixels):</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert formula
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Please note, that worldToTexture cannot compensate for radial or other non-linear distortions introduced by a real camera lens.</p>
</div>
<div class="paragraph">
<p>Another use of worldToTexture is texturing a facade with complex geometry without specifying texture coordinates for each gml:LinearRing. Instead, only the facade’s aggregated surface becomes the texture target using a TexCoordGen as parameterization. Then, worldToTexture effectively encodes an orthographic projection of world space into texture space. For the special case of a vertical facade this transformation is given by:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert formula
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="MathML">&lt;math display="block"&gt;
  &lt;mrow class="MJX-TeXAtom-ORD"&gt;
    &lt;mover&gt;
      &lt;mi mathvariant="normal"&gt;&amp;#x2207;&lt;/mi&gt;
      &lt;mo stretchy="false"&gt;&amp;#x2192;&lt;/mo&gt;
    &lt;/mover&gt;
  &lt;/mrow&gt;
  &lt;mo&gt;&amp;#xD7;&lt;/mo&gt;
  &lt;mrow class="MJX-TeXAtom-ORD"&gt;
    &lt;mover&gt;
      &lt;mi&gt;F&lt;/mi&gt;
      &lt;mo stretchy="false"&gt;&amp;#x2192;&lt;/mo&gt;
    &lt;/mover&gt;
  &lt;/mrow&gt;
  &lt;mo&gt;=&lt;/mo&gt;
  &lt;mrow&gt;
    &lt;mo&gt;(&lt;/mo&gt;
    &lt;mfrac&gt;
      &lt;mrow&gt;
        &lt;mi mathvariant="normal"&gt;&amp;#x2202;&lt;/mi&gt;
        &lt;msub&gt;
          &lt;mi&gt;F&lt;/mi&gt;
          &lt;mi&gt;z&lt;/mi&gt;
        &lt;/msub&gt;
      &lt;/mrow&gt;
      &lt;mrow&gt;
        &lt;mi mathvariant="normal"&gt;&amp;#x2202;&lt;/mi&gt;
        &lt;mi&gt;y&lt;/mi&gt;
      &lt;/mrow&gt;
    &lt;/mfrac&gt;
    &lt;mo&gt;&amp;#x2212;&lt;/mo&gt;
    &lt;mfrac&gt;
      &lt;mrow&gt;
        &lt;mi mathvariant="normal"&gt;&amp;#x2202;&lt;/mi&gt;
        &lt;msub&gt;
          &lt;mi&gt;F&lt;/mi&gt;
          &lt;mi&gt;y&lt;/mi&gt;
        &lt;/msub&gt;
      &lt;/mrow&gt;
      &lt;mrow&gt;
        &lt;mi mathvariant="normal"&gt;&amp;#x2202;&lt;/mi&gt;
        &lt;mi&gt;z&lt;/mi&gt;
      &lt;/mrow&gt;
    &lt;/mfrac&gt;
    &lt;mo&gt;)&lt;/mo&gt;
  &lt;/mrow&gt;
  &lt;mrow class="MJX-TeXAtom-ORD"&gt;
    &lt;mi mathvariant="bold"&gt;i&lt;/mi&gt;
  &lt;/mrow&gt;
  &lt;mo&gt;+&lt;/mo&gt;
  &lt;mrow&gt;
    &lt;mo&gt;(&lt;/mo&gt;
    &lt;mfrac&gt;
      &lt;mrow&gt;
        &lt;mi mathvariant="normal"&gt;&amp;#x2202;&lt;/mi&gt;
        &lt;msub&gt;
          &lt;mi&gt;F&lt;/mi&gt;
          &lt;mi&gt;x&lt;/mi&gt;
        &lt;/msub&gt;
      &lt;/mrow&gt;
      &lt;mrow&gt;
        &lt;mi mathvariant="normal"&gt;&amp;#x2202;&lt;/mi&gt;
        &lt;mi&gt;z&lt;/mi&gt;
      &lt;/mrow&gt;
    &lt;/mfrac&gt;
    &lt;mo&gt;&amp;#x2212;&lt;/mo&gt;
    &lt;mfrac&gt;
      &lt;mrow&gt;
        &lt;mi mathvariant="normal"&gt;&amp;#x2202;&lt;/mi&gt;
        &lt;msub&gt;
          &lt;mi&gt;F&lt;/mi&gt;
          &lt;mi&gt;z&lt;/mi&gt;
        &lt;/msub&gt;
      &lt;/mrow&gt;
      &lt;mrow&gt;
        &lt;mi mathvariant="normal"&gt;&amp;#x2202;&lt;/mi&gt;
        &lt;mi&gt;x&lt;/mi&gt;
      &lt;/mrow&gt;
    &lt;/mfrac&gt;
    &lt;mo&gt;)&lt;/mo&gt;
  &lt;/mrow&gt;
  &lt;mrow class="MJX-TeXAtom-ORD"&gt;
    &lt;mi mathvariant="bold"&gt;j&lt;/mi&gt;
  &lt;/mrow&gt;
  &lt;mo&gt;+&lt;/mo&gt;
  &lt;mrow&gt;
    &lt;mo&gt;(&lt;/mo&gt;
    &lt;mfrac&gt;
      &lt;mrow&gt;
        &lt;mi mathvariant="normal"&gt;&amp;#x2202;&lt;/mi&gt;
        &lt;msub&gt;
          &lt;mi&gt;F&lt;/mi&gt;
          &lt;mi&gt;y&lt;/mi&gt;
        &lt;/msub&gt;
      &lt;/mrow&gt;
      &lt;mrow&gt;
        &lt;mi mathvariant="normal"&gt;&amp;#x2202;&lt;/mi&gt;
        &lt;mi&gt;x&lt;/mi&gt;
      &lt;/mrow&gt;
    &lt;/mfrac&gt;
    &lt;mo&gt;&amp;#x2212;&lt;/mo&gt;
    &lt;mfrac&gt;
      &lt;mrow&gt;
        &lt;mi mathvariant="normal"&gt;&amp;#x2202;&lt;/mi&gt;
        &lt;msub&gt;
          &lt;mi&gt;F&lt;/mi&gt;
          &lt;mi&gt;x&lt;/mi&gt;
        &lt;/msub&gt;
      &lt;/mrow&gt;
      &lt;mrow&gt;
        &lt;mi mathvariant="normal"&gt;&amp;#x2202;&lt;/mi&gt;
        &lt;mi&gt;y&lt;/mi&gt;
      &lt;/mrow&gt;
    &lt;/mfrac&gt;
    &lt;mo&gt;)&lt;/mo&gt;
  &lt;/mrow&gt;
  &lt;mrow class="MJX-TeXAtom-ORD"&gt;
    &lt;mi mathvariant="bold"&gt;k&lt;/mi&gt;
  &lt;/mrow&gt;
&lt;/math&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This equation assumes n  denoting the facade’s overall normal vector (normalized, pointing outward, and being parallel to the ground), F denoting the facade’s lower left point, and widthf and heightf specifying the facade’s dimensions in world units. For the general case of an arbitrary normal vector the facade orientation matrix assumes a form similar to the camera orientation matrix:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert formula
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_parameterizedtexturetype_parameterizedtexture_textureassociationtype"><a class="anchor" href="#_parameterizedtexturetype_parameterizedtexture_textureassociationtype"></a>ParameterizedTextureType, ParameterizedTexture, TextureAssociationType</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_abstracttextureparameterizationtype_texcoordlisttype_texcoordgentype"><a class="anchor" href="#_abstracttextureparameterizationtype_texcoordlisttype_texcoordgentype"></a>AbstractTextureParameterizationType, TexCoordListType, TexCoordGenType</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_related_concepts"><a class="anchor" href="#_related_concepts"></a>5.3.5. Related concepts</h4>
<div class="paragraph">
<p>The notion of appearance clearly relates to the generic coverage approach (cf. ISO 19123 and OGC Abstract specification, Topic 6). Surface data can be described as discrete or continuous coverage over a surface as two-dimensional domain with a specific mapping function. Such an implementation requires the extension of GML coverages (as of version 3.1) by suitable mapping functions and specialisation for valid domain and range sets. For reasons of simplicity and comprehensibility both in implementation and usage, CityGML does not follow this approach, but relies on textures and materials as well-known surface property descriptions from the field of computer graphics (cf. X3D, COLLADA specification, Foley et al.). Textures and materials store data as color using an appropriate mapping. If such a mapping is impractical, data storage can be customised using ADEs. A review of coverages for appearance modelling is considered for CityGML beyond version 2.0.0.</p>
</div>
<div class="paragraph">
<p>Appearance is also related to portrayal. Portrayal describes the composition and symbolisation of a digital model’s image, i.e. presentation, while appearance encodes observations of the real object’s surface, i.e. data. Even though being based on graphical terms such as textures and materials, surface data is not limited to being input for portrayal, but similarly serves as input or output for analyses on a feature’s surface. Consequently, CityGML does not define mixing or composition of themes for portrayal purposes. Portrayal is left to viewer applications or styling specification languages such as OGC Styled Layer Descriptors (SLD) or OGC Symbolo-gy Encoding (SE).</p>
</div>
</div>
<div class="sect3">
<h4 id="_code_lists_2"><a class="anchor" href="#_code_lists_2"></a>5.3.6. Code lists</h4>
<div class="paragraph">
<p>The mimeType attribute of the feature _Texture is specified as gml:CodeType. The values of this property can be enumerated in a code list. A proposal for this code list can be found in annex C.6.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_bridge_section"><a class="anchor" href="#ug_model_bridge_section"></a>5.4. Bridge Model</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The bridge model allows for the representation of the thematic, spatial and visual aspects of bridges and bridge parts in four levels of detail, LOD 1 – 4. The bridge model of CityGML is defined by the thematic extension module Bridge (cf. chapter 7). Fig. 44 illustrates examples of bridge models in all LODs.</p>
</div>
<div id="figure-44" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_44_1.png" alt="Figure 44 1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_44_2.png" alt="Figure 44 2">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_44_3.png" alt="Figure 44 3">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_44_4.png" alt="Figure 44 4">
</div>
<div class="title">Figure 16. Examples for bridge models in LOD1 (upper left), LOD2 (upper right), LOD3 (lower left) and LOD4 (lower right) (source: Google 3D warehouse)</div>
</div>
<div class="paragraph">
<p>The bridge model was developed in analogy to the building model (cf. chapter 10.3) with regard to structure and attributes. The UML diagram of the bridge model is depicted in Fig. 45.</p>
</div>
<div id="figure-45" class="imageblock">
<div class="content">
<img src="figures/Figure_45.png" alt="Figure 45">
</div>
<div class="title">Figure 17. UML diagram of the bridge model, part one</div>
</div>
<div class="paragraph">
<p>A (movable or unmovable) bridge is represented by an object of the class Bridge. This class inherits its attributes and relations from the abstract base class _AbstractBridge. The spatial properties are defined by a solid for each of the four LODs (relations lod1Solid to lod4Solid). In analogy to the building model, the semantical as well as the geometrical richness increases from LOD1 (blocks model) to LOD3 (architectural model). Simple examples of bridges in each of those LODs are depicted in Fig. 46. Interior structures like rooms are dedicated to LOD4. To cover the case of bridge models where the topology does not satisfy the properties of a solid (essentially water tightness), a multi surface representation is allowed (lod1MultiSurface to lod4MultiSurface). The line where the bridge touches the terrain surface is represented by a terrain intersection curve, which is provided for each LOD (relations lod1TerrainIntersection to lod4TerrainIntersection). In addition to the solid representation of a bridge, linear characteristics like ropes or antennas can be specified geometrically by the lod1MultiCurve to lod4MultiCurve relations. If those characteristics shall be represented semantically, the features BridgeInstalla-tion or BridgeConstructionElement can be used (see section 10.5.2). All relations to semantic objects and geo-metric properties are listed in Tab. 7.</p>
</div>
<div id="figure-46" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_46_1.png" alt="Figure 46 1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_46_2.png" alt="Figure 46 2">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_46_3.png" alt="Figure 46 3">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_46_4.png" alt="Figure 46 4">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_46_5.png" alt="Figure 46 5">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_46_6.png" alt="Figure 46 6">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_46_7.png" alt="Figure 46 7">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_46_8.png" alt="Figure 46 8">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_46_9.png" alt="Figure 46 9">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_46_10.png" alt="Figure 46 10">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_46_11.png" alt="Figure 46 11">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_46_12.png" alt="Figure 46 12">
</div>
<div class="title">Figure 18. Bridge model in LOD1 – LOD4. (source: Karlsruhe Institute of Technology (KIT))</div>
</div>
<div class="paragraph">
<p>The semantic attributes of an _AbstractBridge are class, function, usage and is_movable. The attribute class is used to classify bridges, e.g. to distinguish different construction types (cf. Fig. 48). The attribute function allows representing the utilization of the bridge independently of the construction. Possible values may be railway bridge, roadway bridge, pedestrian bridge, aqueduct, etc. The option to denote a usage which is divergent to one of the primary functions of the bridge (function) is given by the attribute usage. The type of these attributes is gml:CodeType, the values of which can be defined in code lists. The name of the bridge can be represented by the gml:name attribute, which is inherited from the base class gml:_GML via the classes gml:_Feature, _CityObject, and _Site. Each Bridge or BridgePart feature may be assigned zero or more addresses using the address property. The corresponding AddressPropertyType is defined within the CityGML core module (cf. chapter 10.1.4).</p>
</div>
<table id="abstractbridge_semantics" class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 1. Semantic themes of the class _AbstractBridge</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>Geometric / semantic theme</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>Property  type</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>LOD1</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>LOD2</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>LOD3</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>LOD4</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Volume part of the bridge shell</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:SolidType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Surface part of the bridge shell</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:MultiSurfaceType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Terrain intersection curve</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:MultiCurveType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Curve part of the bridge shell</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:MultiCurveType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Bridge parts (chapter 10.5.1)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">BridgePartType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Boundary surfaces (chapter 10.5.3)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">AbstractBoundarySurfaceType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Outer bridge installations (chapter 10.5.2)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">BridgeInstallationType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Bridge construction elements (chapter 10.5.2)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">BridgeConstruction-ElementType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Openings (chapter 10.5.4)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">AbstractOpeningType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Bridge rooms (chapter 10.5.5)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">BridgeRoomType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Interior bridge installations</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">IntBridgeInstallationType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The boolean attribute is_movable is defined to specify whether a bridge is movable or not. The modeling of the geometric aspects of the movement is delayed to later versions of this standard. Some types of movable bridges are depicted in Fig. 47.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
the following are annimated GIFs
</td>
</tr>
</table>
</div>
<div id="figure-47" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_47_1.gif" alt="Figure 47 1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_47_2.gif" alt="Figure 47 2">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_47_3.gif" alt="Figure 47 3">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_47_4.gif" alt="Figure 47 4">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_47_5.gif" alt="Figure 47 5">
</div>
<div class="title">Figure 19. Examples for movable bridges (source: ISO 6707).</div>
</div>
<div id="figure-48" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">Examples for different types of bridges.</div>
insert Fig 48 - currently these do not render.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_bridge_and_bridge_part"><a class="anchor" href="#_bridge_and_bridge_part"></a>5.4.1. Bridge and bridge part</h4>
<div class="sect4">
<h5 id="_bridgetype_bridge"><a class="anchor" href="#_bridgetype_bridge"></a>BridgeType, Bridge</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert BridgeType, Bridge UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_bridgeparttype_bridgepart"><a class="anchor" href="#_bridgeparttype_bridgepart"></a>BridgePartType, BridgePart</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert BridgePartType, BridgePart UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If some parts of a bridge differ from the remaining bridge with regard to attribute values or if parts like ramps can be identified as objects of their own, those parts can be represented as BridgePart. A bridge can consist of multiple BridgeParts. Like Bridge, BridgePart is a subclass of _AbstractBridge and hence, has the same attrib-utes and relations. The relation consistOfBridgePart represents the aggregation hierarchy between a Bridge (or a BridgePart) and it’s BridgeParts. By this means, an aggregation hierarchy of arbitrary depth can be modeled. Each BridgePart belongs to exactly one Bridge (or BridgePart). Similar to the building model, the aggregation structure of a bridge forms a tree. A simple example for a bridge with parts is a twin bridge. Another example is presented in chapter 10.5.6.</p>
</div>
</div>
<div class="sect4">
<h5 id="_abstractbridgetype_abstractbridge"><a class="anchor" href="#_abstractbridgetype_abstractbridge"></a>AbstractBridgeType, _AbstractBridge</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractBridgeType, _AbstractBridge UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The abstract class _AbstractBridge is the base class of Bridges and BridgeParts. It contains properties for bridge attributes, purely geometric representations, and geometric/semantic representations of the bridge or bridge part in different levels of detail. The attributes describe:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The classification of the bridge or bridge part (class), the different intended usages (function), and the different actual usages (usage). The permitted values for these property types can be specified in code lists.</p>
</li>
<li>
<p>The year of construction (yearOfConstruction) and the year of demolition (yearOfDemolition) of the bridge or bridge part. These attributes can be used to describe the chronology of the bridge development within a city model. The points of time refer to real world time.</p>
</li>
<li>
<p>Whether the bridge is movable is specified by the Boolean attribute isMovable.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bridge_construction_elements_and_bridge_installations"><a class="anchor" href="#_bridge_construction_elements_and_bridge_installations"></a>5.4.2. Bridge construction elements and bridge installations</h4>
<div class="sect4">
<h5 id="_bridgeconstructionelementtype_bridgeconstructionelement"><a class="anchor" href="#_bridgeconstructionelementtype_bridgeconstructionelement"></a>BridgeConstructionElementType, BridgeConstructionElement</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert BridgeConstructionElementType, BridgeConstructionElement UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_bridgeinstallationtype_bridgeinstallation"><a class="anchor" href="#_bridgeinstallationtype_bridgeinstallation"></a>BridgeInstallationType, BridgeInstallation</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert BridgeInstallationType, BridgeInstallation UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Bridge elements which do not have the size, significance or meaning of a BridgePart can be modelled either as BridgeConstructionElement or as BridgeInstallation. Elements which are essential from a structural point of view are modelled as BridgeConstructionElement, for example structural elements like pylons, anchorages etc. (cf. Fig. 49). A general classification as well as the intended and actual function of the construction element are represented by the attributes class, function, and usage. The geometry of a BridgeConstructionElement, which may be present in LOD1 to LOD4, is gml:_Geometry. Alternatively, the geometry may be given as ImplicitGe-ometry object. Following the concept of ImplicitGeometry the geometry of a prototype bridge construction element is stored only once in a local coordinate system and referenced by other bridge construction element features (cf. chapter 8.2). The visible surfaces of a bridge construction element can be semantically classified using the concept of boundary surfaces (cf. chapter 10.5.3).</p>
</div>
<div class="paragraph">
<p>Whereas a BridgeConstructionElement has structural relevance, a BridgeInstallation represents an element of the bridge which can be eliminated without collapsing of the bridge (e.g. stairway, antenna, railing). BridgeInstalla-tions occur in LOD 2 to 4 only and are geometrically representated as gml:_Geometry. Again, the concept of ImplicitGeometry can be applied to BridgeInstallations alternatively, and their visible surfaces can be semanti-cally classified using the concept of boundary surfaces (cf. chapter 10.5.3). The class BridgeInstallation contains the semantic attributes class, function and usage. The attribute class gives a classification of installations of a bridge. With the attributes function and usage, nominal and real functions of the bridge installation can be described. The type of all attributes is gml:CodeType and their values can be defined in code lists.</p>
</div>
<div id="figure-49" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">BridgeConstructionElements of a suspension bridge.</div>
insert Fig 49 - currently does not render
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_boundary_surfaces"><a class="anchor" href="#_boundary_surfaces"></a>5.4.3. Boundary surfaces</h4>
<div class="sect4">
<h5 id="_abstractboundarysurfacetype_boundarysurface"><a class="anchor" href="#_abstractboundarysurfacetype_boundarysurface"></a>AbstractBoundarySurfaceType, _BoundarySurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractBoundarySurfaceType, _BoundarySurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The thematic boundary surfaces of a bridge are defined in analogy to the building module. _BoundarySurface is the abstract base class for several thematic classes, structuring the exterior shell of a bridge as well as the visible surfaces of rooms, bridge construction elements and both outer and interior bridge installations. It is a subclass of _CityObject and thus inherits all properties like the GML3 standard feature properties (gml:name etc.) and the CityGML specific properties like ExternalReferences. From _BoundarySurface, the thematic classes RoofSur-face, WallSurface, GroundSurface, OuterCeilingSurface, OuterFloorSurface, ClosureSurface, FloorSurface, InteriorWallSurface, and CeilingSurface are derived.</p>
</div>
<div class="paragraph">
<p>For each LOD between 2 and 4, the geometry of a _BoundarySurface may be defined by a different gml:MultiSurface geometry.</p>
</div>
<div class="paragraph">
<p>In LOD3 and LOD4, a _BoundarySurface may contain _Openings (cf. chapter 10.5.4) like doors and windows. If the geometric location of _Openings topologically lies within a surface component (e.g. gml:Polygon) of the gml:MultiSurface geometry, these _Openings must be represented as holes within that surface. A hole is repre-sented by an interior ring within the corresponding surface geometry object. According to GML3, the points have to be specified in reverse order (exterior boundaries counter-clockwise and interior boundaries clockwise when looking in opposite direction of the surface’s normal vector). If such an opening is sealed by a Door, a Window, or a ClosureSurface, their outer boundary may consist of the same points as the inner ring (denoting the hole) of the surrounding surface. The embrasure surfaces of an Opening belong to the relevant adjacent _BoundarySurface. If, for example a door seals the Opening, the embrasure surface on the one side of the door belongs to the InteriorWallSurface and on the other side to the WallSurface.</p>
</div>
<div class="paragraph">
<p>Fig. 50 depicts a bridge with RoofSurfaces, WallSurfaces, OuterFloorSurfaces and OuterCeilingSurfaces. Besides Bridges and BridgeParts, BridgeConstructionElements, BridgeInstallations as well as IntBridgeInstalla-tions can be related to _BoundarySurface. _BoundarySurfaces occur in LOD2 to LOD4. In LOD3 and LOD4, such a surface may contain _Openings (see chapter 10.3.4) like doors and windows.</p>
</div>
<div id="figure-50" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_50.png" alt="Figure 50">
</div>
<div class="title">Figure 20. Different BoundarySurfaces of a bridge.</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
need to add annotations to Figure 50
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_groundsurfacetype_groundsurface"><a class="anchor" href="#_groundsurfacetype_groundsurface"></a>GroundSurfaceType, GroundSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert GroundSurfaceType, GroundSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The ground plate of a bridge or bridge part is modelled by the class GroundSurface. The polygon defining the ground plate is congruent with the bridge’s footprint. However, the surface normal of the ground plate is point-ing downwards.</p>
</div>
</div>
<div class="sect4">
<h5 id="_outerceilingsurfacetype_outerceilingsurface"><a class="anchor" href="#_outerceilingsurfacetype_outerceilingsurface"></a>OuterCeilingSurfaceType, OuterCeilingSurface</h5>
<div class="paragraph">
<p>Note: insert OuterCeilingSurfaceType, OuterCeilingSurface UML</p>
</div>
<div class="paragraph">
<p>A mostly horizontal surface belonging to the outer bridge shell and having the orientation pointing downwards can be modeled as an OuterCeilingSurface.</p>
</div>
</div>
<div class="sect4">
<h5 id="_wallsurfacetype_wallsurface"><a class="anchor" href="#_wallsurfacetype_wallsurface"></a>WallSurfaceType, WallSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert WallSurfaceType, WallSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All parts of the bridge facade belonging to the outer bridge shell can be modelled by the class WallSurface</p>
</div>
</div>
<div class="sect4">
<h5 id="_outerfloorsurfacetype_outerfloorsurface"><a class="anchor" href="#_outerfloorsurfacetype_outerfloorsurface"></a>OuterFloorSurfaceType, OuterFloorSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert OuterFloorSurfaceType, OuterFloorSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A mostly horizontal surface belonging to the outer bridge shell and with the orientation pointing upwards can be modeled as an OuterFloorSurface</p>
</div>
</div>
<div class="sect4">
<h5 id="_roofsurfacetype_roofsurface"><a class="anchor" href="#_roofsurfacetype_roofsurface"></a>RoofSurfaceType, RoofSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert RoofSurfaceType, RoofSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The major roof parts of a bridge or bridge part are expressed by the class RoofSurface.</p>
</div>
</div>
<div class="sect4">
<h5 id="_closuresurfacetype_closuresurface"><a class="anchor" href="#_closuresurfacetype_closuresurface"></a>ClosureSurfaceType, ClosureSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert ClosureSurfaceType, ClosureSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An opening in a bridge not filled by a door or window can be sealed by a virtual surface called ClosureSurface (cf. chapter 6.4). Hence, bridge with open sides can be virtually closed in order to be able to compute their volume. ClosureSurfaces are also used in the interior bridge model. If two rooms with a different are directly connected without a separating door, a ClosureSurface should be used to separate or connect the volumes of both rooms.</p>
</div>
</div>
<div class="sect4">
<h5 id="_floorsurfacetype_floorsurface"><a class="anchor" href="#_floorsurfacetype_floorsurface"></a>FloorSurfaceType, FloorSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert FloorSurfaceType, FloorSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class FloorSurface must only be used in the LOD4 interior bridge model for modelling the floor of a bridge room.</p>
</div>
</div>
<div class="sect4">
<h5 id="_interiorwallsurfacetype_interiorwallsurface"><a class="anchor" href="#_interiorwallsurfacetype_interiorwallsurface"></a>InteriorWallSurfaceType, InteriorWallSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert InteriorWallSurfaceType, InteriorWallSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class InteriorWallSurface must only be used in the LOD4 interior bridge model for modelling the visible surfaces of the bridge room walls.</p>
</div>
</div>
<div class="sect4">
<h5 id="_ceilingsurfacetype_ceilingsurface"><a class="anchor" href="#_ceilingsurfacetype_ceilingsurface"></a>CeilingSurfaceType, CeilingSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert CeilingSurfaceType, CeilingSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class CeilingSurface must only be used in the LOD4 interior bridge model for modelling the ceiling of a bridge room.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_openings"><a class="anchor" href="#_openings"></a>5.4.4. Openings</h4>
<div class="sect4">
<h5 id="_abstractopeningtype_opening"><a class="anchor" href="#_abstractopeningtype_opening"></a>AbstractOpeningType, _Opening</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractOpeningType, _Opening UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class _Opening is the abstract base class for semantically describing openings like doors or windows in outer or inner boundary surfaces like walls and roofs. Openings only exist in models of LOD3 or LOD4. Each _Opening is associated with a gml:MultiSurface geometry. Alternatively, the geometry may be given as Implic-itGeometry object. Following the concept of ImplicitGeometry the geometry of a prototype opening is stored only once in a local coordinate system and referenced by other opening features (see chapter 8.2).</p>
</div>
</div>
<div class="sect4">
<h5 id="_windowtype_window"><a class="anchor" href="#_windowtype_window"></a>WindowType, Window</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert WindowType, Window UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class Window is used for modelling windows in the exterior shell of a bridge, or hatches between adjacent rooms. The formal difference between the classes Window and Door is that – in normal cases – Windows are not specifically intended for the transit of people or vehicles.</p>
</div>
</div>
<div class="sect4">
<h5 id="_doortype_door"><a class="anchor" href="#_doortype_door"></a>DoorType, Door</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert DoorType, Door UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class Door is used for modelling doors in the exterior shell of a bridge, or between adjacent rooms. Doors can be used by people to enter or leave a bridge or room. In contrast to a ClosureSurface a door may be closed, blocking the transit of people. A Door may be assigned zero or more addresses. The corresponding Address-PropertyType is defined within the CityGML core module (cf. chapter 10.1.4).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bridge_interior"><a class="anchor" href="#_bridge_interior"></a>5.4.5. Bridge Interior</h4>
<div class="paragraph">
<p>The classes BridgeRoom, IntBridgeInstallation and BridgeFurniture allow for the representation of the bridge interior. They are designed in analogy to the classes Room, IntBuildingInstallation and BuildingFurniture of the building module and share the same meaning. The bridge interior can only be modeled in LOD4.</p>
</div>
<div class="sect4">
<h5 id="_bridgeroomtype_bridgeroom"><a class="anchor" href="#_bridgeroomtype_bridgeroom"></a>BridgeRoomType, BridgeRoom</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert BridgeRoomType, BridgeRoom UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A BridgeRoom is a semantic object for modelling the free space inside a bridge and should be uniquely related to exactly one bridge or bridge part object. It should be closed (if necessary by using ClosureSurfaces) and the geometry normally will be described by a solid (lod4Solid). However, if the topological correctness of the boundary cannot be guaranteed, the geometry can alternatively be given as a MultiSurface (lod4MultiSurface). The surface normals of the outer shell of a GML solid must point outwards. This is important to consider when BridgeRoom surfaces should be assigned Appearances. In this case, textures and colors must be placed on the backside of the corresponding surfaces in order to be visible from the inside of the room.</p>
</div>
<div class="paragraph">
<p>In addition to the geometrical representation, different parts of the visible surface of a room can be modelled by specialised BoundarySurfaces (FloorSurface, CeilingSurface, InteriorWallSurface, and ClosureSurface; cf. chapter 10.5.3).</p>
</div>
</div>
<div class="sect4">
<h5 id="_bridgefurnituretype_bridgefurniture"><a class="anchor" href="#_bridgefurnituretype_bridgefurniture"></a>BridgeFurnitureType, BridgeFurniture</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert BridgeFurnitureType, BridgeFurniture UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>BridgeRooms may have BridgeFurnitures and IntBridgeInstallations. A BridgeFurniture is a movable part of a room, such as a chair or furniture. A BridgeFurniture object should be uniquely related to exactly one room object. Its geometry may be represented by an explicit geometry or an ImplicitGeometry object. Following the concept of ImplicitGeometry the geometry of a prototype bridge furniture is stored only once in a local coordi-nate system and referenced by other bridge furniture features (see chapter 8.2).</p>
</div>
</div>
<div class="sect4">
<h5 id="_intbridgeinstallationtype_intbridgeinstallation"><a class="anchor" href="#_intbridgeinstallationtype_intbridgeinstallation"></a>IntBridgeInstallationType, IntBridgeInstallation</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert IntBridgeInstallationType, IntBridgeInstallation UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An IntBridgeInstallation is an object inside a bridge with a specialised function or semantic meaning. In contrast to BridgeFurniture, IntBridgeInstallations are permanently attached to the bridge structure and cannot be moved. Examples for IntBridgeInstallations are stairways, railings and heaters. Objects of the class IntBridgeInstallation can either be associated with a room (class BridgeRoom), or with the complete bridge / bridge part (class _AbstractBridge, cf. chapter 10.5.1). However, they should be uniquely related to exactly one room or one bridge / bridge part object. An IntBridgeInstallation optionally has attributes class, function and usage. The attribute class, which can only occur once, represents a general classification of the internal bridge component. With the attributes function and usage, nominal and real functions of a bridge installation can be described. For all three attributes the list of feasible values can be specified in a code list. For the geometrical representation of an IntBridgeInstallation, an arbitrary geometry object from the GML subset shown in Fig. 9 can be used. Alter-natively, the geometry may be given as ImplicitGeometry object. Following the concept of ImplicitGeometry the geometry of a prototype interior bridge installation is stored only once in a local coordinate system and refer-enced by other interior bridge installation features (see chapter 8.2). The visible surfaces of an interior bridge installation can be semantically classified using the concept of boundary surfaces (cf. 10.5.3).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_examples"><a class="anchor" href="#_examples"></a>5.4.6. Examples</h4>
<div class="paragraph">
<p>The bridge of Rees crossing the Rhine in Germany has three bridge parts which are separated by pylons. Fig. 51 (left) depicts the Rees bridge model containing one Bridge feature which consists of three BridgePart features. The pylons, which are structurally essential, are represented by BridgeConstructionElements. On the top of the pylons, four lamps are located which are modeled as BridgeInstallation features (cf. right part of Fig. 51).</p>
</div>
<div id="figure-51" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_51_a.png" alt="Figure 51 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_51_b.png" alt="Figure 51 b">
</div>
<div class="title">Figure 21. The bridge of Rees, consisting of a Bridge feature and three BridgePart features (left). The bridge contains BridgeConstructionElement and BridgeInstallation features (right).</div>
</div>
<div class="paragraph">
<p>In the following Fig. 52, the main part of the bridge of Rees is shown as photograph on the left side (source: Harald Halfpapp), and the corresponding part of the LOD2 bridge model is depicted on the the right side (source: District of Recklinghausen / KIT).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Figures 52, 53 and 54 are from the images folder.
</td>
</tr>
</table>
</div>
<div id="figure-52" class="imageblock">
<div class="content">
<img src="images/Fig52.jpg" alt="][align=&quot;center&quot;">
</div>
<div class="title">Figure 22. The bridge of Rees (left photo (source: Harald Halfpapp); right LOD2 model (source: District of Recklinghausen / KIT)).</div>
</div>
<div class="paragraph">
<p>There are two bridges crossing the river Rhine at Karlsruhe, Germany. The first one is a two track railway bridge constructed as a truss bridge (cf. Fig. 53 front). The second one is a four lane highway bridge constructed as a cable-stayed bridge (cf. Fig. 53 background).</p>
</div>
<div id="figure-53" class="imageblock">
<div class="content">
<img src="images/Fig53.jpg" alt="][align=&quot;center&quot;">
</div>
<div class="title">Figure 23. Bridge over the river Rhine at Karlsruhe (left a photo, right the 3D CityGML model) (source: Karlsruhe Institute of Technology (KIT), courtesy of City of Karlsruhe).</div>
</div>
<div class="paragraph">
<p>In CityGML both bridges are modeled as single Bridge object with BridgeConstructionElements and BridgeIn-stallations. The construction elements of the cable stayed bridge are the footings on both river sides and in the middle of the river, as well as the cables and the pylon. The construction elements of the truss bridge are the footings and the truss itself. Both bridges have several railings which are modeled as BridgeInstallation.
The bridge “Oberbaumbrücke” shown in Fig. 54 is located in the centre of Berlin crossing the river Spree and serves as example for bridges having interior rooms. The real-world bridge is depicted in the left part of Fig. 54, whereas the corresponding CityGML model is shown on the right. The outer geometry of the bridge is modeled as gml:MultiSurface element (lod4MultiSurface property) and is assigned photorealistic textures. Additionally, the interior rooms located in both bridge towers are represented as BridgeRoom objects with solid geometries (gml:Solid assigned through the lod4Solid property). Due to its geometric accuracy and the representation of the interior structures of both bridge towers, the model is classified as LOD4.</p>
</div>
<div id="fig54" class="imageblock">
<div class="content">
<img src="images/Fig54.jpg" alt="][align=&quot;center&quot;">
</div>
<div class="title">Figure 24. The bridge“Oberbaumbrücke” in Berlin represented as bridge model in LOD4 (left a photo, right the 3D CityGML model) (source: Berlin Senate of Business, Technology and Women; Business Location Center, Berlin; Technische Universität Berlin; Karlsruhe Institute of Technology (KIT)).</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_building_section"><a class="anchor" href="#ug_model_building_section"></a>5.5. Building Model</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The building model is one of the most detailed thematic concepts of CityGML. It allows for the representation of thematic and spatial aspects of buildings and building parts in five levels of detail, LOD0 to LOD4. The building model of CityGML is defined by the thematic extension module Building (cf. chapter 7). Fig. 26 provides examples of 3D city and building models in LOD1 – 4.</p>
</div>
<div id="figure-26" class="imageblock">
<div class="content">
<img src="images/Fig26.jpg" alt="Fig26">
</div>
<div class="title">Figure 25. Examples for city or building models in LOD1 (upper left), LOD2 (upper right), LOD3 (lower left), and LOD4 (lower right) (source: District of Recklinghausen, m-g-h ingenieure+architekten GmbH).</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
this figure needs to be re-built.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The UML diagram of the building model is depicted in Fig. 27, for the XML schema definition see annex A.4 and below. The pivotal class of the model is _AbstractBuilding, which is a subclass of the thematic class _Site (and transitively of the root class _CityObject). _AbstractBuilding is specialised either to a Building or to a BuildingPart. Since an _AbstractBuilding consists of BuildingParts, which again are _AbstractBuildings, an aggregation hierarchy of arbitrary depth may be realised. As subclass of the root class _CityObject, an _AbstractBuilding inherits all properties from _CityObject like the GML3 standard feature properties (gml:name etc.) and the CityGML specific properties like ExternalReferences (cf. chapter 6.7). Further properties not explicitly covered by _AbstractBuilding may be modelled as generic attributes provided by the CityGML Generics module (cf. chapter 10.12) or using the CityGML Application Domain Extension mechanism (cf. chapter 10.13).</p>
</div>
<div class="paragraph">
<p>Building complexes, which consist of a number of distinct buildings like a factory site or hospital complex, should be aggregated using the concept of CityObjectGroups (cf. chapter 6.8). The main building of the complex can be denoted by providing “main building” as the role name of the corresponding group member.</p>
</div>
<div class="paragraph">
<p>Both classes Building and BuildingPart inherit the attributes of _AbstractBuilding: the class of the building, the function (e.g. residential, public, or industry), the usage, the year of construction, the year of demolition, the roof type, the measured height, and the number and individual heights of the storeys above and below ground. This set of parameters is suited for roughly reconstructing the three-dimensional shape of a building and can be provided by cadastral systems. Furthermore, Address features can be assigned to Buildings or BuildingParts.</p>
</div>
<div id="figure-27" class="imageblock">
<div class="content">
<img src="figures/Figure_27.png" alt="Figure 27">
</div>
<div class="title">Figure 26. UML diagram of CityGML’s building model. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML Building module.</div>
</div>
<div class="paragraph">
<p>The geometric representation and semantic structure of an _AbstractBuilding is shown in Fig. 27. The model is successively refined from LOD0 to LOD4. Therefore, not all components of a building model are represented equally in each LOD and not all aggregation levels are allowed in each LOD. In CityGML, all object classes are associated to the LODs with respect to the proposed minimum acquisition criteria for each LOD (cf. chapter 6.2). An object can be represented simultaneously in different LODs by providing distinct geometries for the corresponding LODs.</p>
</div>
<div class="paragraph">
<p>In LOD0, the building can be represented by horizontal, 3-dimensional surfaces. These can represent the foot-print of the building and, separately, the roof edge. This allows the easy integration of 2D data into the model. In many countries these 2D geometries readily exist, for example in cadastral or topographic data holdings. Cadas-tre data typically depicts the shape of the building on the ground (footprints) and topographic data is often a mixture between footprints and geometries at roof level (roof edges), which are often photogrametrically extract-ed from area/satellite images or derived from airborne laser data. The building model allows the inclusion of both. In this case large overhanging roofs can be modelled as a preliminary stage to more detailed LOD2 and LOD3 depictions. The surface geometries require 3D coordinates, though it is mandated that the height values of all vertices belonging to the same surface are identical. If 2D geometries are imported into any of these two LOD0 geometries, an appropriate height value for all vertices needs to be chosen. The footprint is typically located at the lowest elevation of the ground surface of the building whereas the roof edge representation should be placed at roof level (e.g., eaves height).</p>
</div>
<div class="paragraph">
<p>In LOD1, a building model consists of a generalized geometric representation of the outer shell. Optionally, a gml:MultiCurve representing the TerrainIntersectionCurve (cf. chapter 6.5) can be specified. This geometric representation is refined in LOD2 by additional gml:MultiSurface and gml:MultiCurve geometries, used for modelling architectural details like roof overhangs, columns, or antennas. In LOD2 and higher LODs the outer facade of a building can also be differentiated semantically by the classes _BoundarySurface and BuildingInstal-lation. A _BoundarySurface is a part of the building’s exterior shell with a special function like wall (WallSur-face), roof (RoofSurface), ground plate (GroundSurface), outer floor (OuterFloorSurface), outer ceiling (Outer-CeilingSurface) or ClosureSurface. The BuildingInstallation class is used for building elements like balconies, chimneys, dormers or outer stairs, strongly affecting the outer appearance of a building. A BuildingInstallation may have the attributes class, function, and usage (cf. Fig. 27).</p>
</div>
<div class="paragraph">
<p>In LOD3, the openings in _BoundarySurface objects (doors and windows) can be represented as thematic ob-jects. In LOD4, the highest level of resolution, also the interior of a building, composed of several rooms, is represented in the building model by the class Room. This enlargement allows a virtual accessibility of buildings, e.g. for visitor information in a museum (“Location Based Services“), the examination of accommodation standards or the presentation of daylight illumination of a building. The aggregation of rooms according to arbitrary, user defined criteria (e.g. for defining the rooms corresponding to a certain storey) is achieved by employing the general grouping concept provided by CityGML (cf. chapter 10.3.6). Interior installations of a building, i.e. objects within a building which (in contrast to furniture) cannot be moved, are represented by the class IntBuildingInstallation. If an installation is attached to a specific room (e.g. radiators or lamps), they are associated with the Room class, otherwise (e.g. in case of rafters or pipes) with _AbstractBuilding. A Room may have the attributes class, function and usage whose value can be defined in code lists (chapter 10.3.8 and annex C.1). The class attribute allows a classification of rooms with respect to the stated function, e.g. commercial or private rooms, and occurs only once. The function attribute is intended to express the main purpose of the room, e.g. living room, kitchen. The attribute usage can be used if the way the object is actually used differs from the function. Both attributes can occur multiple times.</p>
</div>
<div class="paragraph">
<p>The visible surface of a room is represented geometrically as a Solid or MultiSurface. Semantically, the surface can be structured into specialised _BoundarySurfaces, representing floor (FloorSurface), ceiling (CeilingSur-face), and interior walls (InteriorWallSurface). Room furniture, like tables and chairs, can be represented in the CityGML building model with the class BuildingFurniture. A BuildingFurniture may have the attributes class, function and usage. Annexes G.1 to G.6 provide example CityGML documents containing a single building model which is subsequently refined from a coarse LOD0 representation up to a semantically rich and geomet-ric-topologically sound LOD4 model including the building interior.</p>
</div>
<div class="sect3">
<h4 id="_building_and_building_part"><a class="anchor" href="#_building_and_building_part"></a>5.5.1. Building and Building Part</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Version 2.0 uses XML schema to illustrate this section. Replace those schema with UML.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_buildingtype_building"><a class="anchor" href="#_buildingtype_building"></a>BuildingType, Building</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Insert BuildingType, Building UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Building class is one of the two subclasses of _AbstractBuilding. If a building only consists of one (homo-geneous) part, this class shall be used. A building composed of structural segments differing in, for example the number of storeys or the roof type has to be separated into one Building having one or more additional Build-ingPart (see Fig. 28). The geometry and non-spatial properties of the central part of the building should be represented in the aggregating Building feature.</p>
</div>
</div>
<div class="sect4">
<h5 id="_buildingtype_building_part"><a class="anchor" href="#_buildingtype_building_part"></a>BuildingType, Building Part</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Insert BuildingType, Building Part UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class BuildingPart is derived from _AbstractBuilding. It is used to model a structural part of a building (see Fig. 28). A BuildingPart object should be uniquely related to exactly one building or building part object.</p>
</div>
<div id="figure-28" class="imageblock">
<div class="content">
<img src="figures/Figure_28.png" alt="Figure 28">
</div>
<div class="title">Figure 27. Examples of buildings consisting of one and two building parts (source: City of Coburg)</div>
</div>
</div>
<div class="sect4">
<h5 id="_abstractbuildingtype_abstractbuilding"><a class="anchor" href="#_abstractbuildingtype_abstractbuilding"></a>AbstractBuildingType, _AbstractBuilding</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
AbstractBuildingType, _AbstractBuilding UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The abstract class _AbstractBuilding contains properties for building attributes, purely geometric representations, and geometric/semantic representations of the building or building part in different levels of detail. The attributes describe:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>classification of the building or building part (class), the different intended usages (function), and the different actual usages (usage). The permitted values for these attributes can be specified in code lists.</p>
</li>
<li>
<p>The year of construction (yearOfConstruction) and the year of demolition (yearOfDemolition) of the build-ing or building part. These attributes can be used to describe the chronology of the building development within a city model. The points of time refer to real world time.</p>
</li>
<li>
<p>The roof type of the building or building part (roofType). The permitted values for this attribute can be specified in a code list.</p>
</li>
<li>
<p>The measured relative height (measuredHeight) of the building or building part.</p>
</li>
<li>
<p>The number of storeys above (storeyAboveGround) and below (storeyBelowGround) ground level.</p>
</li>
<li>
<p>The list of storey heights above (storeyHeightsAboveGround) and below (storeyHeightsBelowGround) ground level. The first value in a list denotes the height of the nearest storey wrt. to the ground level and last value the height of the farthest.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Spanning the different levels of detail, the building model differs in the complexity and granularity of the geo-metric representation and the thematic structuring of the model into components with a special semantic mean-ing. This is illustrated in Fig. 29 and Fig. 30, showing the same building in five different LODs. The class _AbstractBuilding has a number of properties which are associated with certain LODs.</p>
</div>
<div id="figure-29" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_29_a.png" alt="Figure 29 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_29_b.png" alt="Figure 29 b">
</div>
<div class="title">Figure 28. The two possibilities of modeling a building in LOD0 using horizontal 3D surfaces. On the left, the building footprint (lod0FootPrint) is shown (cyan) which denotes the shape of the building on the ground. The corresponding surface representation is located at ground level. On the right, the lod0RoofEgde representation is illustrated (cyan) which results from a horizontal projection of the building’s roof and which is located at the eaves height (source: Karlsruhe Institute of Technology (KIT), courtesy of Franz-Josef Kaiser).</div>
</div>
<div id="figure-30" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_30.png" alt="Figure 30">
</div>
<div class="title">Figure 29. Building model in LOD1 – LOD4 (source: Karlsruhe Institute of Technology (KIT), courtesy of Franz-Josef Kaiser).&lt;o:p&gt;&lt;/o:p&gt;</div>
</div>
<div class="paragraph">
<p>Tab. 5 shows the correspondence of the different geometric and semantic themes of the building model to LODs. In LOD1 – 4, the volume of a building can be expressed by a gml:Solid geometry and/or a gml:MultiSurface geometry. The definition of a 3D Terrain Intersection Curve (TIC), used to integrate buildings from different sources with the Digital Terrain Model, is also possible in LOD1 – 4. The TIC can – but does not have to – build closed rings around the building or building parts.</p>
</div>
<div class="paragraph">
<p>In LOD0 (cf. Fig. 29) the building is represented by horizontal surfaces describing the footprint and the roof edge.</p>
</div>
<div class="paragraph">
<p>In LOD1 (cf. Fig. 30), the different structural entities of a building are aggregated to a simple block and not differentiated in detail. The volumetric and surface parts of the exterior building shell are identical and only one of the corresponding properties (lod1Solid or lod1MultiSurface) must be used.</p>
</div>
<div class="paragraph">
<p>In LOD2 and higher levels of detail, the exterior shell of a building is not only represented geometrically as gml:Solid geometry and/or a gml:MultiSurface geometry, but it can also be composed of semantic objects. The base class for all objects semantically structuring the building shell is _BoundarySurface (cf. chapter 10.3.2), which is associated with a gml:MultiSurface geometry. If in a building model there is both a geometric represen-tation of the exterior shell as volume or surface model and a semantic representation by means of thematic _BoundarySurfaces, the geometric representation must not explicitly define the geometry, but has to reference the corresponding geometry components of the gml:MultiSurface of the _BoundarySurface elements.</p>
</div>
<table id="abstractbuilding_semantics" class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 2. Semantic themes of the class _AbstractBuilding</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 22.2222%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>Geometric / semantic theme</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>Property  type</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>LOD0</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>LOD1</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>LOD2</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>LOD3</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>LOD4</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Building footprint and roof edge</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:MultiSurfaceType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Volume part of the building shell</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:SolidType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Surface part of the building shell</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:MultiSurfaceType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Terrain intersection curve</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:MultiCurveType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Curve part of the building shell</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:MultiCurveType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Building parts</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">BuildingPartType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Boundary surfaces (chapter 10.3.3)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">AbstractBoundarySurfaceType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Outer building installations (chapter 10.3.2)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">BuildingInstallationType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Openings (chapter 10.3.4)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">AbstractOpeningType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Rooms (chapter 10.3.5)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">RoomType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Interior building installations (chapter 10.3.5)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">IntBuildingInstallationType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Apart from BuildingParts, smaller features of the building (“outer building installations”) can also strongly affect the building characteristic. These features are modelled by the class BuildingInstallation (cf. chapter 10.3.2). Typical candidates for this class are chimneys (see. Fig. 30), dormers (see Fig. 28), balconies, outer stairs, or antennas. BuildingInstallations may only be included in LOD2 models, if their extents exceed the proposed minimum dimensions as specified in chapter 6.2. For the geometrical representation of the class Build-ingInstallation, an arbitrary geometry object from the GML subset shown in Fig. 9 can be used.</p>
</div>
<div class="paragraph">
<p>The class _AbstractBuilding has no additional properties for LOD3. Besides the higher requirements on geomet-ric precision and smaller minimum dimensions, the main difference of LOD2 and LOD3 buildings concerns the class _BoundarySurface (cf. chapter 10.3.3). In LOD3, openings in a building corresponding with windows or doors (see Fig. 30) are modelled by the abstract class _Opening and the derived subclasses Window and Door (cf. chapter 10.3.4).</p>
</div>
<div class="paragraph">
<p>With respect to the exterior building shell, the LOD4 data model is identical to that of LOD3. But LOD4 pro-vides the possibility to model the interior structure of a building with the classes IntBuildingInstallation and Room (cf. chapter 10.3.5).</p>
</div>
<div class="paragraph">
<p>Each Building or BuildingPart feature may be assigned zero or more addresses using the address property. The corresponding AddressPropertyType is defined within the CityGML core module (cf. chapter 10.1.4).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_outer_building_installations"><a class="anchor" href="#_outer_building_installations"></a>5.5.2. Outer building installations</h4>
<div class="sect4">
<h5 id="_buildinginstallationtype_buildinginstallation"><a class="anchor" href="#_buildinginstallationtype_buildinginstallation"></a>BuildingInstallationType, BuildingInstallation</h5>
<div class="paragraph">
<p>Note: insert BuildingInstallation UML</p>
</div>
<div class="paragraph">
<p>A BuildingInstallation is an outer component of a building which has not the significance of a BuildingPart, but which strongly affects the outer characteristic of the building. Examples are chimneys, stairs, antennas, balconies or attached roofs above stairs and paths. A BuildingInstallation optionally has attributes class, function and usage. The attribute class - which can only occur once - represents a general classification of the installation. With the attributes function and usage, nominal and real functions of a building installation can be described. For all three attributes the list of feasible values can be specified in a code list. For the geometrical representation of a BuildingInstallation, an arbitrary geometry object from the GML subset shown in Fig. 9 can be used. Alterna-tively, the geometry may be given as ImplicitGeometry object. Following the concept of ImplicitGeometry the geometry of a prototype building installation is stored only once in a local coordinate system and referenced by other building installation features (see chapter 8.2). The visible surfaces of a building installation can be seman-tically classified using the concept of boundary surfaces (cf. 10.3.3). A BuildingInstallation object should be uniquely related to exactly one building or building part object.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_boundary_surfaces_2"><a class="anchor" href="#_boundary_surfaces_2"></a>5.5.3. Boundary surfaces</h4>
<div class="sect4">
<h5 id="_abstractboundarysurfacetype_boundarysurface_2"><a class="anchor" href="#_abstractboundarysurfacetype_boundarysurface_2"></a>AbstractBoundarySurfaceType, _BoundarySurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Insert AbstractBoundarySurfaceType, _BoundarySurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>_BoundarySurface is the abstract base class for several thematic classes, structuring the exterior shell of a build-ing as well as the visible surfaces of rooms and both outer and interior building installations. It is a subclass of _CityObject and thus inherits all properties like the GML3 standard feature properties (gml:name etc.) and the CityGML specific properties like ExternalReferences. From _BoundarySurface, the thematic classes RoofSur-face, WallSurface, GroundSurface, OuterCeilingSurface, OuterFloorSurface, ClosureSurface, FloorSurface, InteriorWallSurface, and CeilingSurface are derived. The thematic classification of building surfaces is illustrat-ed in Fig. 31 (outer building shell) and Fig. 32 (additional interior surfaces) and subsequently specified.</p>
</div>
<div class="paragraph">
<p>For each LOD between 2 and 4, the geometry of a _BoundarySurface may be defined by a different gml:MultiSurface geometry.</p>
</div>
<div class="paragraph">
<p>In LOD3 and LOD4, a _BoundarySurface may contain _Openings (cf. chapter 10.3.4) like doors and windows. If the geometric location of _Openings topologically lies within a surface component (e.g. gml:Polygon) of the gml:MultiSurface geometry, these _Openings must be represented as holes within that surface. A hole is repre-sented by an interior ring within the corresponding surface geometry object. According to GML3, the points have to be specified in reverse order (exterior boundaries counter-clockwise and interior boundaries clockwise when looking in opposite direction of the surface’s normal vector). If such an opening is sealed by a Door, a Window, or a ClosureSurface, their outer boundary may consist of the same points as the inner ring (denoting the hole) of the surrounding surface. The embrasure surfaces of an Opening belong to the relevant adjacent _BoundarySurface. If, for example a door seals the Opening, the embrasure surface on the one side of the door belongs to the InteriorWallSurface and on the other side to the WallSurface (Fig. 32 on the right).</p>
</div>
<div id="figure-31" class="imageblock">
<div class="content">
<img src="figures/Figure_31.png" alt="Figure 31">
</div>
<div class="title">Figure 30. Examples of the classification of _BoundarySurfaces of the outer building shell (source: Karlsruhe Institute of Technology (KIT))</div>
</div>
<div id="figure-32" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_32_a.png" alt="Figure 32 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_32_b.png" alt="Figure 32 b">
</div>
<div class="title">Figure 31. Classification of BoundarySurfaces (left), in particular for Openings (right) (graphic: IGG Uni Bonn).</div>
</div>
</div>
<div class="sect4">
<h5 id="_groundsurfacetype_groundsurface_2"><a class="anchor" href="#_groundsurfacetype_groundsurface_2"></a>GroundSurfaceType, GroundSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert GroundSurfaceType, GroundSurface uml
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The ground plate of a building or building part is modelled by the class GroundSurface. The polygon defining the ground plate is congruent with the building’s footprint. However, the surface normal of the ground plate is pointing downwards.</p>
</div>
</div>
<div class="sect4">
<h5 id="_outerceilingsurfacetype_outerceilingsurface_2"><a class="anchor" href="#_outerceilingsurfacetype_outerceilingsurface_2"></a>OuterCeilingSurfaceType, OuterCeilingSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert OuterCeilingSurfaceType, OuterCeilingSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A mostly horizontal surface belonging to the outer building shell and having the orientation pointing downwards can be modeled as an OuterCeilingSurface. Examples are the visible part of the ceiling of a loggia or the ceiling of a passage.</p>
</div>
</div>
<div class="sect4">
<h5 id="_wallsurfacetype_wallsurface_2"><a class="anchor" href="#_wallsurfacetype_wallsurface_2"></a>WallSurfaceType, WallSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert WallSurfaceType, WallSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All parts of the building facade belonging to the outer building shell can be modelled by the class WallSurface.</p>
</div>
</div>
<div class="sect4">
<h5 id="_outerfloorsurfacetype_outerfloorsurface_2"><a class="anchor" href="#_outerfloorsurfacetype_outerfloorsurface_2"></a>OuterFloorSurfaceType, OuterFloorSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert OuterFloorSurfaceType, OuterFloorSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A mostly horizontal surface belonging to the outer building shell and with the orientation pointing upwards can be modeled as an OuterFloorSurface. An example is the floor of a loggia.</p>
</div>
</div>
<div class="sect4">
<h5 id="_roofsurfacetype_roofsurface_2"><a class="anchor" href="#_roofsurfacetype_roofsurface_2"></a>RoofSurfaceType, RoofSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert RoofSurfaceType, RoofSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The major roof parts of a building or building part are expressed by the class RoofSurface. Secondary parts of a roof with a specific semantic meaning like dormers or chimneys should be modelled as BuildingInstallation.</p>
</div>
</div>
<div class="sect4">
<h5 id="_closuresurfacetype_closuresurface_2"><a class="anchor" href="#_closuresurfacetype_closuresurface_2"></a>ClosureSurfaceType, ClosureSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert ClosureSurfaceType, ClosureSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An opening in a building not filled by a door or window can be sealed by a virtual surface called ClosureSurface (cf. chapter 6.4). Hence, buildings with open sides like a barn or a hangar, can be virtually closed in order to be able to compute their volume. ClosureSurfaces are also used in the interior building model. If two rooms with a different function (e.g. kitchen and living room) are directly connected without a separating door, a ClosureSur-face should be used to separate or connect the volumes of both rooms.</p>
</div>
</div>
<div class="sect4">
<h5 id="_floorsurfacetype_floorsurface_2"><a class="anchor" href="#_floorsurfacetype_floorsurface_2"></a>FloorSurfaceType, FloorSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert FloorSurfaceType, FloorSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class FloorSurface must only be used in the LOD4 interior building model for modelling the floor of a room.</p>
</div>
</div>
<div class="sect4">
<h5 id="_interiorwallsurfacetype_interiorwallsurface_2"><a class="anchor" href="#_interiorwallsurfacetype_interiorwallsurface_2"></a>InteriorWallSurfaceType, InteriorWallSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert InteriorWallSurfaceType, InteriorWallSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class InteriorWallSurface must only be used in the LOD4 interior building model for modelling the visible surfaces of the room walls.</p>
</div>
</div>
<div class="sect4">
<h5 id="_ceilingsurfacetype_ceilingsurface_2"><a class="anchor" href="#_ceilingsurfacetype_ceilingsurface_2"></a>CeilingSurfaceType, CeilingSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Insert CeilingSurfaceType, CeilingSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class CeilingSurface must only be used in the LOD4 interior building model for modelling the ceiling of a room.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_openings_2"><a class="anchor" href="#_openings_2"></a>5.5.4. Openings</h4>
<div class="sect4">
<h5 id="_abstractopeningtype_opening_2"><a class="anchor" href="#_abstractopeningtype_opening_2"></a>AbstractOpeningType, _Opening</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractOpeningType, _Opening UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class _Opening is the abstract base class for semantically describing openings like doors or windows in outer or inner boundary surfaces like walls and roofs. Openings only exist in models of LOD3 or LOD4. Each _Opening is associated with a gml:MultiSurface geometry. Alternatively, the geometry may be given as Implic-itGeometry object. Following the concept of ImplicitGeometry the geometry of a prototype opening is stored only once in a local coordinate system and referenced by other opening features (see chapter 8.2).</p>
</div>
</div>
<div class="sect4">
<h5 id="_windowtype_window_2"><a class="anchor" href="#_windowtype_window_2"></a>WindowType, Window</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert WindowType, Window UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class Window is used for modelling windows in the exterior shell of a building, or hatches between adjacent rooms. The formal difference between the classes Window and Door is that – in normal cases – Windows are not specifically intended for the transit of people or vehicles.</p>
</div>
</div>
<div class="sect4">
<h5 id="_doortype_door_2"><a class="anchor" href="#_doortype_door_2"></a>DoorType, Door</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert DoorType, Door UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class Door is used for modelling doors in the exterior shell of a building, or between adjacent rooms. Doors can be used by people to enter or leave a building or room. In contrast to a ClosureSurface a door may be closed, blocking the transit of people. A Door may be assigned zero or more addresses. The corresponding Address-PropertyType is defined within the CityGML core module (cf. chapter 10.1.4) .</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_building_interior"><a class="anchor" href="#_building_interior"></a>5.5.5. Building Interior</h4>
<div class="sect4">
<h5 id="_roomtype_room"><a class="anchor" href="#_roomtype_room"></a>RoomType, Room</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert RoomType, Room UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A Room is a semantic object for modelling the free space inside a building and should be uniquely related to exactly one building or building part object. It should be closed (if necessary by using ClosureSurfaces) and the geometry normally will be described by a solid (lod4Solid). However, if the topological correctness of the boundary cannot be guaranteed, the geometry can alternatively be given as a MultiSurface (lod4MultiSurface). The surface normals of the outer shell of a GML solid must point outwards. This is important to consider when Room surfaces should be assigned Appearances. In this case, textures and colors must be placed on the backside of the corresponding surfaces in order to be visible from the inside of the room.</p>
</div>
<div class="paragraph">
<p>In addition to the geometrical representation, different parts of the visible surface of a room can be modelled by specialised BoundarySurfaces (FloorSurface, CeilingSurface, InteriorWallSurface, and ClosureSurface cf. chapter 10.3.3).</p>
</div>
<div class="paragraph">
<p>A special task is the modelling of passages between adjacent rooms. The room solids are topologically connected by the surfaces representing hatches, doors or closure surfaces that seal open doorways. Rooms are defined as being adjacent, if they have common _Openings or ClosureSurfaces. The surface that represents the opening geometrically is part of the boundaries of the solids of both rooms, or the opening is referenced by both rooms on the semantic level. This adjacency implies an accessibility graph, which can be employed to determine the spread of e.g. smoke or gas, but which can also be used to compute escape routes using classical shortest path algorithms (see Fig. 33).</p>
</div>
<div id="figure-33" class="imageblock">
<div class="content">
<img src="figures/Figure_33.jpg" alt="Figure 33">
</div>
<div class="title">Figure 32. Accessibility graph derived from topological adjacencies of room surfaces (graphic: IGG Uni Bonn).</div>
</div>
</div>
<div class="sect4">
<h5 id="_buildingfurnituretype_buildingfurniture"><a class="anchor" href="#_buildingfurnituretype_buildingfurniture"></a>BuildingFurnitureType, BuildingFurniture</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert BuildingFurnitureType, BuildingFurniture UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Rooms may have BuildingFurnitures and IntBuildingInstallations. A BuildingFurniture is a movable part of a room, such as a chair or furniture. A BuildingFurniture object should be uniquely related to exactly one room object. Its geometry may be represented by an explicit geometry or an ImplicitGeometry object. Following the concept of ImplicitGeometry the geometry of a prototype building furniture is stored only once in a local coordi-nate system and referenced by other building furniture features (see chapter 8.2).</p>
</div>
</div>
<div class="sect4">
<h5 id="_intbuildinginstallationtype_intbuildinginstallation"><a class="anchor" href="#_intbuildinginstallationtype_intbuildinginstallation"></a>IntBuildingInstallationType, IntBuildingInstallation</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert IntBuildingInstallationType, IntBuildingInstallation UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An IntBuildingInstallation is an object inside a building with a specialised function or semantic meaning. In contrast to BuildingFurniture, IntBuildingInstallations are permanently attached to the building structure and cannot be moved. Typical examples are interior stairs, railings, radiators or pipes. Objects of the class IntBuild-ingInstallation can either be associated with a room (class Room), or with the complete building / building part (class _AbstractBuilding, cf. chapter 10.3.1). However, they should be uniquely related to exactly one room or one building / building part object. An IntBuildingInstallation optionally has attributes class, function and usage. The attribute class, which can only occur once, represents a general classification of the internal building com-ponent. With the attributes function and usage, nominal and real functions of a building installation can be described. For all three attributes the list of feasible values can be specified in a code list. For the geometrical representation of an IntBuildingInstallation, an arbitrary geometry object from the GML subset shown in Fig. 9 can be used. Alternatively, the geometry may be given as ImplicitGeometry object. Following the concept of ImplicitGeometry the geometry of a prototype interior building installation is stored only once in a local coordi-nate system and referenced by other interior building installation features (see chapter 8.2). The visible surfaces of an interior building installation can be semantically classified using the concept of boundary surfaces (cf. 10.3.3).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_modelling_building_storeys_using_cityobjectgroups"><a class="anchor" href="#_modelling_building_storeys_using_cityobjectgroups"></a>5.5.6. Modelling building storeys using CityObjectGroups</h4>
<div class="paragraph">
<p>CityGML does currently not provide a specific concept for the representation of storeys as it is available in the AEC/FM standard IFC (IAI 2006). However, a storey can be represented as an explicit aggregation of all build-ing features on a certain height level using CityGML’s notion of CityObjectGroups (cf. chapter 10.11). This would include Rooms, Doors, Windows, IntBuildingInstallations and BuildingFurniture. If thematic surfaces like walls and interior walls should also be associated to a specific storey, this might require the vertical fragmenta-tion of these surfaces (one per storey), as in virtual 3D city models they typically span the whole façade.</p>
</div>
<div class="paragraph">
<p>In order to model building storeys with CityGML’s generic grouping concept, a nested hierarchy of CityObject-Group objects has to be used. In a first step, all semantic objects belonging to a specific storey are grouped. The attributes of the corresponding CityObjectGroup object are set as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The class attribute shall be assigned the value “building separation”.</p>
</li>
<li>
<p>The function attribute shall be assigned the value “lodXStorey” with X between 1 and 4 in order to de-note that this group represents a storey wrt. a specific LOD.</p>
</li>
<li>
<p>The storey name or number can be stored in the gml:name property. The storey number attribute shall be assigned the value “storeyNo_X” with decimal number X in order to denote that this group repre-sents a storey wrt. a specific number.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In a second step, the CityObjectGroup objects representing different storeys are grouped themselves. By using the generic aggregation concept of CityObjectGroup, the “storeys group” is associated with the corresponding Building or BuildingPart object. The class attribute of the storeys group shall be assigned the value “building storeys”.</p>
</div>
</div>
<div class="sect3">
<h4 id="_examples_2"><a class="anchor" href="#_examples_2"></a>5.5.7. Examples</h4>
<div class="paragraph">
<p>The LOD1 model of the Campus North of the Karlruhe Institute of Technology (KIT) shown in Fig. 34 consists of 596 buildings and 187 building parts. The footprint geometries of the buildings are taken from a cadastral information system and extruded by a given height. Buildings with a unique identifier and a single height value are modeled as one building (bldg:Building). Buildings having a unique identifier but different height values are modeled as one building (bldg:Building) with one or more building parts (bldg:BuildingPart). Both buildings and building parts have solid geometries and their height values are additionally represented as thematic attribute (bldg:measuredHeight). Fig. 34 shows an aerial photograph of the KIT Campus North (left) and the CityGML LOD1 model (right).</p>
</div>
<div id="figure-34" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_34_a.png" alt="Figure 34 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_34_b.png" alt="Figure 34 b">
</div>
<div class="title">Figure 33. LOD1 model of the KIT Campus North (source: Karlsruhe Institute of Technology (KIT)).</div>
</div>
<div class="paragraph">
<p>An example for a fully textured LOD2 building model is given in Fig. 35 which shows the Bernhardus church located in the city of Karlsruhe, Germany. On the left side of Fig. 35, a photograph of the church in real world is shown whereas the CityGML building model of the church with photorealistic textures is illustrated on the right. The model is bounded by a ground surface, several wall and roof surfaces. The railing above the church clock is modeled as a building installation (BuildingInstallation).</p>
</div>
<div id="figure-35" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_35_a.png" alt="Figure 35 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_35_b.png" alt="Figure 35 b">
</div>
<div class="title">Figure 34. Textured LOD2 model of the Bernhardus church in Karlsruhe (source: Karlsruhe Institute of Technology (KIT), courtesy of City of Karlsruhe).</div>
</div>
<div class="paragraph">
<p>The model shown in Fig. 36 was derived from a 3D CAD model generated during the planning phase of the building. On the left side of Fig. 36, the building is shown whereas on the right side the LOD3 model is present-ed. The building itself is bounded by wall surfaces, roof surfaces and a ground surface. Doors and windows are modeled including reveals. According to the cadaster data, the car port next to the building is not part of the building. Therefore the car port, the balcony and the chimney are modeled as building installations (BuildingIn-stallation). The model also contains the terrain intersection curve (lod3TerrainIntersection) as planned by the architect.</p>
</div>
<div class="paragraph">
<p>In order to determine the volume of the building, the geometries of all boundary surfaces, including doors and windows, are referenced by the building solid (lod3Solid) using the XLink mechanism. Consequently, the roof surfaces are split into surfaces representing the roof itself and surfaces representing the roof overhangs.</p>
</div>
<div id="figure-36" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_36_a.png" alt="Figure 36 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_36_b.png" alt="Figure 36 b">
</div>
<div class="title">Figure 35. Example of a buildingmodeled in the Level of Detail 3. The chimney, the balcony and the car port are modeled as building installations (source: Karlsruhe Institute of Technology (KIT), courtesy of Franz-Josef Kaiser).</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_city-furniture_section"><a class="anchor" href="#ug_model_city-furniture_section"></a>5.6. City Furniture</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>City furniture objects are immovable objects like lanterns, traffic lights, traffic signs, flower buckets, advertising columns, benches, delimitation stakes, or bus stops (Fig. 67, Fig. 68). City furniture objects can be found in traffic areas, residential areas, on squares or in built-up areas. The modelling of city furniture objects is used for visualisation of, for example city traffic, but also for analysing local structural conditions. The recognition of special locations in a city model is improved by the use of these detailed city furniture objects, and the city model itself becomes more alive and animated. The city furniture model of CityGML is defined by the thematic extension module CityFurniture (cf. chapter 7).</p>
</div>
<div class="paragraph">
<p>City furniture objects can have an important influence on simulations of, for example city traffic situations. Navigation systems can be realised, for example for visually handicapped people using a traffic light as routing target. Likewise, city furniture objects are important to plan a heavy vehicle transportation, where the exact position and further conditions of obstacles must be known.</p>
</div>
<div id="figure-67" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_67_a.jpg" alt="Figure 67 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_67_b.jpg" alt="Figure 67 b">
</div>
<div class="title">Figure 36. Real situation showing a bus stop (left). The advertising billboard and the refuge are modelled as CityFurniture objects in the right image (source: 3D city model of Barkenberg).</div>
</div>
<div id="figure-68" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_68_a.jpg" alt="Figure 68 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_68_b.jpg" alt="Figure 68 b">
</div>
<div class="title">Figure 37. Real situation showing lanterns and delimitation stakes (left). In the right image they are modelled as CityFurniture ob-jects with ImplicitGeometry representations (source: 3D city model of Barkenberg).</div>
</div>
<div class="paragraph">
<p>The UML diagram of the city furniture model is depicted in Fig. 69, for the XML schema definition see below and annex A.5.</p>
</div>
<div class="paragraph">
<p>The class CityFurniture may have the attributes class, function and usage. Their possible values can be specified in corresponding code lists (chapter 10.9.2 and annex C.4). The class attribute allows an object classification like traffic light, traffic sign, delimitation stake, or garbage can, and can occur only once. The function attribute describes, to which thematic area the city furniture object belongs to (e.g. transportation, traffic regulation, architecture), and can occur multiple times. The attribute usage denotes the real purpose of the object.</p>
</div>
<div id="figure-69" class="imageblock">
<div class="content">
<img src="figures/Figure_69.png" alt="Figure 69">
</div>
<div class="title">Figure 38. UML diagram of city furniture objects in CityGML. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML CityFurniture module.</div>
</div>
<div class="paragraph">
<p>Since CityFurniture is a subclass of _CityObject and hence is a feature, it inherits the attribute gml:name. As with any _CityObject, CityFurniture objects may be assigned ExternalReferences (cf. chapter 6.7) and may be augmented by generic attributes using CityGML’s Generics module (cf. chapter 10.12). For ExternalReferences city furniture objects can have links to external thematic databases. Thereby, semantic information of the objects, which cannot be modelled in CityGML, can be transmitted and used in the 3D city model for further processing, for example information from systems of powerlines or pipelines, traffic sign cadaster, or water resources for disaster management.</p>
</div>
<div class="paragraph">
<p>City furniture objects can be represented in city models with their specific geometry, but in most cases the same kind of object has an identical geometry. The geometry of CityFurniture objects in LOD 1-4 may be represented by an explicit geometry (lodXGeometry where X is between 1 and 4) or an ImplicitGeometry object (lodXImplic-itRepresentation with X between 1 and 4). Following the concept of ImplicitGeometry the geometry of a proto-type city furniture is stored only once in a local coordinate system and referenced by other city furniture features (see chapter 8.2). Spatial information of city furniture objects can be taken, for example, from city maps or from public and private external information systems.</p>
</div>
<div class="paragraph">
<p>In order to specify the exact intersection of the DTM with the 3D geometry of a city furniture object, the latter can have a TerrainIntersectionCurve (TIC) for each LOD (cf. chapter 6.5). This allows for ensuring a smooth transition between the DTM and the city furniture object.</p>
</div>
<div class="paragraph">
<p><strong>XML namespace</strong></p>
</div>
<div class="paragraph">
<p>The XML namespace of the CityGML CityFurniture module is identified by the Uniform Resource Identifier (URI) <a href="http://www.opengis.net/citygml/cityfurniture/2.0" class="bare">http://www.opengis.net/citygml/cityfurniture/2.0</a>. Within the XML Schema definition of the CityFurniture module, this URI is also used to identify the default namespace.</p>
</div>
<div class="sect3">
<h4 id="_city_furniture_object"><a class="anchor" href="#_city_furniture_object"></a>5.6.1. City furniture object</h4>
<div class="sect4">
<h5 id="_cityfurnituretype_cityfurniture"><a class="anchor" href="#_cityfurnituretype_cityfurniture"></a>CityFurnitureType, CityFurniture</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert CityFurnitureType, CityFurniture UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_code_lists_3"><a class="anchor" href="#_code_lists_3"></a>5.6.2. Code lists</h4>
<div class="paragraph">
<p>The attributes class, function, and usage of the feature CityFurniture are specified as gml:CodeType. The values of these properties can be enumerated in code lists. Proposals for corresponding code lists can be found in annex C.4.</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_citygml_dataset"><a class="anchor" href="#_example_citygml_dataset"></a>5.6.3. Example CityGML dataset</h4>
<div class="paragraph">
<p>The following example of a CityGML dataset is an extract of the model of a delimitation stake in LOD3 and contains the attributes class = 1000 and function = 1520 (delimitation stake) whose coded attribute values are taken from a code list proposed by the SIG 3D (cf. annex C.4). The delimitation stake with the object ID stake0815 has an ExternalReference pointing to a cadastre object within the German ALKIS database (www.adv-online.de) which is identified by the URI urn:adv:oid:DEHE123400007001.</p>
</div>
<div class="paragraph">
<p>The example dataset shows the geometry of the top surface (gml:id “cover”) and of the left surface (gml:id “surfLeft”) of the stake which are both depicted in Fig. 70. The top surface is assigned a constant material (white color) and the left surface is textured using the texture image stake.gif by denoting the relevant texture coordi-nates. Both surface appearances are modelled using the CityGML Appearance module (cf. chapter 9).</p>
</div>
<div id="figure-70" class="imageblock">
<div class="content">
<img src="figures/Figure_70.png" alt="Figure 70">
</div>
<div class="title">Figure 39. Example of a simple city furniture object (source: District of Recklinghausen).</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert example - GML?
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_city-object-group_section"><a class="anchor" href="#ug_model_city-object-group_section"></a>5.7. City Object Group</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The CityGML grouping concept has been introduced in chapter 6.8. CityObjectGroups are modelled using the Composite Design Pattern from software engineering (cf. Gamma et al. 1995): CityObjectGroups aggregate CityObjects and furthermore are defined as special CityObjects. This implies that a group may become a member of another group realizing a recursive aggregation schema. However, in a CityGML instance document it has to be ensured (by the generating application) that no cyclic groupings are included. Fig. 73 shows the UML dia-gram for the class CityObjectGroup, for the XML schema see annex A.6. The grouping concept of CityGML is defined by the thematic extension module CityObjectGroup (cf. chapter 7).</p>
</div>
<div id="figure-73" class="imageblock">
<div class="content">
<img src="figures/Figure_73.png" alt="Figure 73">
</div>
<div class="title">Figure 40. UML diagram of city object groups in CityGML. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML CityObjectGroup module.</div>
</div>
<div class="paragraph">
<p>The class CityObjectGroup has the optional attributes class, function and usage. The class attribute allows a group classification with respect to the stated function and may occur only once. The function attribute is intend-ed to express the main purpose of a group, possibly to which thematic area it belongs (e.g. site, building, trans-portation, architecture, unknown etc.). The attribute usage can be used, if the way the object is actually used differs from the function. Both attributes can occur multiple times. Each member of a group may be qualified by a role name, reflecting the role each _CityObject plays in the context of the group. Furthermore, a CityObject-Group can optionally be assigned an arbitrary geometry object from the GML3 subset shown in Fig. 9 in chapter 8.1. This may be used to represent a generalised geometry generated from the members geometries.</p>
</div>
<div class="paragraph">
<p>The parent association linking a CityObjectGroup to a _CityObject allows for the modelling of a generic hierar-chical grouping concept. Named aggregations of components (CityObjects) can be added to specific CityObjects considered as the parent object. The parent association links to the aggregate, while the parts are given by the group members. This concept is used, for example, to represent storeys in buildings (see section 10.3.6: Mo-delling building storeys using CityObjectGroups).</p>
</div>
<div class="paragraph">
<p><strong>XML namespace</strong></p>
</div>
<div class="paragraph">
<p>The XML namespace of the CityGML CityObjectGroup module is identified by the Uniform Resource Identifier (URI) <a href="http://www.opengis.net/citygml/cityobjectgroup/2.0" class="bare">http://www.opengis.net/citygml/cityobjectgroup/2.0</a>. Within the XML Schema definition of the CityOb-jectGroup module, this URI is also used to identify the default namespace.</p>
</div>
<div class="sect3">
<h4 id="_city_object_group"><a class="anchor" href="#_city_object_group"></a>5.7.1. City object group</h4>
<div class="sect4">
<h5 id="_cityobjectgrouptype_cityobjectgroup"><a class="anchor" href="#_cityobjectgrouptype_cityobjectgroup"></a>CityObjectGroupType, CityObjectGroup</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert CityObjectGroupType, CityObjectGroup UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_code_lists_4"><a class="anchor" href="#_code_lists_4"></a>5.7.2. Code lists</h4>
<div class="paragraph">
<p>The attributes class, function, and usage of the feature CityObjectGroup are specified as gml:CodeType. The values of these properties can be enumerated in code lists. Proposals for corresponding code lists can be found in annex C.10.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_construction_section"><a class="anchor" href="#ug_model_construction_section"></a>5.8. Construction</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Informative content here</p>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_dynamizer_section"><a class="anchor" href="#ug_model_dynamizer_section"></a>5.9. Dynamizer</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Informative content here</p>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_generics_section"><a class="anchor" href="#ug_model_generics_section"></a>5.10. Generics</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The concept of generic city objects and attributes allows for the storage and exchange of 3D objects which are not covered by any explicitly modelled thematic class within CityGML or which require attributes not represent-ed in CityGML. These generic extensions to the CityGML data model are realised by the classes GenericCityOb-ject and _genericAttribute defined within the thematic extension module Generics (cf. chapter 7). In order to avoid problems concerning semantic interoperability, generic extensions shall only be used if appropriate the-matic classes or attributes are not provided by any other CityGML module.</p>
</div>
<div class="paragraph">
<p><a href="#figure-74">Figure 74</a> shows the UML diagram of generic objects and attributes. For XML schema definition see below and annex A.7.</p>
</div>
<div id="figure-74" class="imageblock">
<div class="content">
<img src="figures/Figure_74.png" alt="Figure 74">
</div>
<div class="title">Figure 41. UML diagram of generic objects and attributes in CityGML. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML Generics module.</div>
</div>
<div class="paragraph">
<p>Generic attributes are name-value pairs associated with a city object. Each generic attribute has a mandatory name identifier which can be freely chosen. The data type of the attribute value may be String, Integer, Double (floating point number), URI, Date, and gml:MeasureType. The attribute type is defined by the selection of the particular subclass of _genericAttribute, for example stringAttribute, intAttribute, etc. A measureAttribute facilitates the representation of measured values. Its value is of the structured type gml:MeasureType which provides an optional attribute uom (units of measure) of type xs:anyURI that points to a reference system for the amount.</p>
</div>
<div class="paragraph">
<p>Generic attributes can be grouped under a common name using a genericAttributeSet. The genericAttributeSet class is derived from _genericAttribute and thus is also realized as generic attribute. Its value is the set of con-tained generic attributes and its name property provides a name identifier for the entire set. Since genericAttrib-uteSet is itself a generic attribute, it may also be contained in a generic attribute set facilitating a recursive nesting of arbitrary depth. The optional codeSpace attribute (of type xs:anyURI) of genericAttributeSet is used to associate the attribute set with an authority, e.g. the organisation or community who defined the attribute set and its contained attributes. By this means, generic attribute sets can be clearly distinguished even if they share the same name.</p>
</div>
<div class="paragraph">
<p>In order to model generic attributes, the abstract base class _CityObject defined within the CityGML Core module is augmented by the additional property element _genericAttribute using CityGML’s Application Do-main Extension mechanism (cf. chapter 6.12). By this means, each thematic subclass of _CityObject inherits this property and, thus, may be assigned an arbitrary number of generic attributes in order to represent additional properties of features not represented by the explicitly modelled thematic classes of the CityGML data model.</p>
</div>
<div class="paragraph">
<p>Thus, the Generics module has a deliberate impact on all CityGML extension modules defining thematic sub-classes of _CityObject.</p>
</div>
<div class="paragraph">
<p>A GenericCityObject may have the attributes class, function and usage defined as gml:CodeType. The class attribute allows an object classification within the thematic area such as pipe, power line, dam, or unknown. The function attribute describes to which thematic area the GenericCityObject belongs (e.g. site, transportation, architecture, energy supply, water supply, unknown etc.). The attribute usage can be used, if the way the object is actually used differs from the function. Both attributes can occur multiple times.</p>
</div>
<div class="paragraph">
<p>The geometry of a GenericCityObject can either be an explicit GML3 geometry or an ImplicitGeometry (see chapter 8.2). In the case of an explicit geometry the object can have only one geometry for each LOD, which may be an arbitrary 3D GML geometry object (class gml:_Geometry, which is the base class of all GML geome-tries, lodXGeometry, X  [0..4]). Absolute coordinates according to the reference system of the city model must be given for the explicit geometry. In the case of an ImplicitGeometry, a reference point (anchor point) of the object and optionally a transformation matrix must be given. In order to compute the actual location of the object, the transformation of the local coordinates into the reference system of the city model must be processed and the anchor point coordinates must be added. The shape of an ImplicitGeometry can be given as an external resource with a proprietary format, e.g. a VRML or DXF file from a local file system or an external web service. Alternatively the shape can be specified as a 3D GML3 geometry with local cartesian coordinates using the property relativeGeometry (further details are given in chapter 8.2).</p>
</div>
<div class="paragraph">
<p>In order to specify the exact intersection of the DTM with the 3D geometry of a GenericCityObject, the latter can have TerrainIntersectionCurves for every LOD (cf. chapter 6.5). This is important for 3D visualisation but also for certain applications like driving simulators. For example, if a city wall (e.g., the Great Wall of China) should be represented as a GenericCityObject, a smooth transition between the DTM and the city wall would have to be ensured.</p>
</div>
<div class="paragraph">
<p><strong>XML namespace</strong></p>
</div>
<div class="paragraph">
<p>The XML namespace of the CityGML Generics module is identified by the Uniform Resource Identifier (URI) <a href="http://www.opengis.net/citygml/generics/2.0" class="bare">http://www.opengis.net/citygml/generics/2.0</a>. Within the XML Schema definition of the Generics module, this URI is also used to identify the default namespace.</p>
</div>
<div class="sect3">
<h4 id="_generic_city_object"><a class="anchor" href="#_generic_city_object"></a>5.10.1. Generic city object</h4>
<div class="sect4">
<h5 id="_genericcityobjecttype_genericcityobject"><a class="anchor" href="#_genericcityobjecttype_genericcityobject"></a>GenericCityObjectType, GenericCityObject</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert GenericCityObjectType, GenericCityObject UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_generic_attributes"><a class="anchor" href="#_generic_attributes"></a>5.10.2. Generic attributes</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractGenericAttributeType, _genericAttribute, StringAttributeType, stringAttribute, etc. UML
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_genericattributesettype_genericattributeset"><a class="anchor" href="#_genericattributesettype_genericattributeset"></a>GenericAttributeSetType, genericAttributeSet</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert GenericAttributeSetType, genericAttributeSet UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_code_lists_5"><a class="anchor" href="#_code_lists_5"></a>5.10.3. Code lists</h4>
<div class="paragraph">
<p>The attributes class, function, and usage of the feature GenericCityObject are specified as gml:CodeType. The values of these properties can be enumerated in code lists.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_land-use_section"><a class="anchor" href="#ug_model_land-use_section"></a>5.11. Land Use</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>LandUse objects can be used to describe areas of the earth’s surface dedicated to a specific land use, but also to describe areas of the earth’s surface having a specific land cover with or without vegetation, such as sand, rock, mud flats, forest, grasslands, etc (i.e. the physical appearance). Land use and land cover are different concepts; the first describes human activities on the earth’s surface, the second describes its physical and biological cover. However, the two are interlinked and often mixed in practice. LandUse objects in CityGML represent both concepts: They can be employed to represent, parcels, spatial planning objects, recreational objects and objects describing the physical characteristics of an area, in 3D (e.g. wetlands). Fig. 71 shows the UML diagram of land use objects, for the XML schema definition see chapter 10.10.1 and annex A.8. The land use model of CityGML is provided by the thematic extension module LandUse (cf. chapter 7).</p>
</div>
<div id="figure-71" class="imageblock">
<div class="content">
<img src="figures/Figure_74.png" alt="Figure 74">
</div>
<div class="title">Figure 42. UML diagram of land use objects in CityGML. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML LandUse module.</div>
</div>
<div class="paragraph">
<p>Every LandUse object may have the attributes class, function, and usage. The class attribute is used to represent the classification of land use objects, like settlement area, industrial area, farmland etc., and can occur only once. The possible values can be specified in a code list (cf. annex C.5). The attribute function defines the purpose of the object or their nature, like e.g. cornfield or heath, while the attribute usage can be used, if the way the object is actually used differs from the function. Both attributes can occur multiple times.</p>
</div>
<div class="paragraph">
<p>The LandUse object is defined for all LOD 0-4 and may have different geometries in any LOD. The surface geometry of a LandUse object is required to have 3D coordinate values. It must be a GML3 MultiSurface, which might be assigned appearance properties like textures or colors (using CityGML’s appearance model, cf. chapter 9).</p>
</div>
<div class="paragraph">
<p>LandUse objects can be employed to establish a coherent geometric/semantical tesselation of the earth’s surface. In this case topological relations between neighbouring LandUse objects should be made explicit by defining the boundary LineStrings only once and by referencing them in the corresponding Polygons using XLinks (cf. chapter 8.1). Fig. 72 shows a land use tesselation, where the geometries of the land use objects are represented as triangulated surfaces. In fact, they are the result of a constrained triangulation of a DTM with consideration of breaklines defined by a 2D vector map of land use classifications.</p>
</div>
<div id="figure-72" class="imageblock">
<div class="content">
<img src="figures/Figure_72.png" alt="Figure 72">
</div>
<div class="title">Figure 43. LOD0 regional model consisting of land use objects in CityGML (source: IGG Uni Bonn).</div>
</div>
<div class="paragraph">
<p><strong>XML namespace</strong></p>
</div>
<div class="paragraph">
<p>The XML namespace of the CityGML LandUse module is identified by the Uniform Resource Identifier (URI) <a href="http://www.opengis.net/citygml/landuse/2.0" class="bare">http://www.opengis.net/citygml/landuse/2.0</a>. Within the XML Schema definition of the LandUse module, this URI is also used to identify the default namespace. 10.10.1</p>
</div>
<div class="sect3">
<h4 id="_land_use_object"><a class="anchor" href="#_land_use_object"></a>5.11.1. Land use object</h4>
<div class="sect4">
<h5 id="_landusetype_landuse"><a class="anchor" href="#_landusetype_landuse"></a>LandUseType, LandUse</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert LandUseType, LandUse UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_code_lists_6"><a class="anchor" href="#_code_lists_6"></a>5.11.2. Code lists</h4>
<div class="paragraph">
<p>The attributes class, function, and usage of the feature LandUse are specified as gml:CodeType. The values of these properties can be enumerated in code lists. Proposals for corresponding code lists can be found in annex
C.5.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_point-cloud_section"><a class="anchor" href="#ug_model_point-cloud_section"></a>5.12. Point Cloud</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An essential part of a city model is the terrain. The Digital Terrain Model (DTM) of CityGML is provided by the thematic extension module Relief (cf. chapter 7). In CityGML, the terrain is represented by the class ReliefFea-ture in LOD 0-4 (Fig. 24 depicts the UML diagram, for the XML schema definition see annex A.9). A Re-liefFeature consists of one or more entities of the class ReliefComponent. Its validity may be restricted to a certain area defined by an optional validity extent polygon. As ReliefFeature and ReliefComponent are deriva-tives of _CityObject, the corresponding attributes and relations are inherited. The class ReliefFeature is associat-ed with different concepts of terrain representations which can coexist. The terrain may be specified as a regular raster or grid (RasterRelief), as a TIN (Triangulated Irregular Network, TINReflief), by break lines (BreaklineRe-lief), or by mass points (MasspointRelief). The four types are implemented by the corresponding GML3 classes: grids by gml:RectifiedGridCoverage, break lines by gml:MultiCurve, mass points by gml:MultiPoint and TINs either by gml:TriangulatedSurface or by gml:Tin. In case of gml:TriangulatedSurfaces, the triangles are given explicitly while in case of gml:Tin only 3D points are represented, where the triangulation can be reconstructed by standard methods (Delaunay triangulation, cf. Okabe et al. 1992). Break lines are represented by 3D curves. Mass points are simply a set of 3D points.</p>
</div>
<div id="figure-24" class="imageblock">
<div class="content">
<img src="figures/Figure_24.png" alt="Figure 24">
</div>
<div class="title">Figure 44. UML diagram of the Digital Terrain Model in CityGML. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML Relief module.</div>
</div>
<div class="paragraph">
<p>In a CityGML dataset the four terrain types may be combined in different ways, yielding a high flexibility. First, each type may be represented in different levels of detail, reflecting different accuracies or resolutions. Second, a part of the terrain can be described by the combination of multiple types, for example by a raster and break lines, or by a TIN and break lines. In this case, the break lines must share the geometry with the triangles. Third, neighboring regions may be represented by different types of terrain models. To facilitate this combination, each terrain object is provided with a spatial attribute denoting its extent of validity (Fig. 25). In most cases, the extent of validity of a regular raster dataset corresponds to its bounding box. This validity extent is represented by a 2D footprint polygon, which may have holes. This concept enables, for example, the modelling of a terrain by a coarse grid, where some distinguished regions are represented by a detailed, high-accuracy TIN. The boundaries between both types are given by the extent attributes of the corresponding terrain objects.</p>
</div>
<div id="figure-25" class="imageblock">
<div class="content">
<img src="figures/Figure_25.png" alt="Figure 25">
</div>
<div class="title">Figure 45. Nested DTMs in CityGML using validity extent polygons (graphic: IGG Uni Bonn).</div>
</div>
<div class="paragraph">
<p>Accuracy and resolution of the DTM are not necessarily dependent on features of other CityGML extenstion modules such as building models. Hence, there is the possibility to integrate building models with higher LOD to a DTM with lower accuracy or resolution.</p>
</div>
<div class="paragraph">
<p>This approach interacts with the concept of TerrainIntersectionCurves TIC (cf. chapter 6.5). The TIC can be used like break lines to adjust the DTM to different features such as buildings, bridges, or city furnitures, and hence to ensure a consistent representation of the DTM. If necessary, a retriangulation may have to be processed. A TIC can also be derived by the individual intersection of the DTM and the corresponding feature.</p>
</div>
<div class="paragraph">
<p>ReliefFeature and its ReliefComponents both have an lod attribute denoting the corresponding level of detail. In most cases, the LOD of a ReliefFeature matches the LOD of its ReliefComponents. However, it is also allowed to specify a ReliefFeature with a high LOD which consists of ReliefComponents where some of them can have a LOD lower than that of the aggregating ReliefFeature. The idea is that, for example, for a LOD3 scene it might be sufficient to use a regular grid in LOD2 with certain higher precision areas defined by ReliefComponents in LOD3. The LOD2 grid and the LOD3 components can easily be integrated using the concept of the validity extent polygon. Therefore, although some of the ReliefComponents would have been classified to a lower LOD, the whole ReliefFeature would be appropriate to use with other LOD3 models which is indicated by setting its lod value to 3.</p>
</div>
<div class="sect3">
<h4 id="_relief_feature_and_relief_component"><a class="anchor" href="#_relief_feature_and_relief_component"></a>5.12.1. Relief feature and relief component</h4>
<div class="sect4">
<h5 id="_relieffeaturetype_relieffeature"><a class="anchor" href="#_relieffeaturetype_relieffeature"></a>ReliefFeatureType, ReliefFeature</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert ReliefFeatureType, ReliefFeature UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_abstractreliefcomponenttype_reliefcomponent"><a class="anchor" href="#_abstractreliefcomponenttype_reliefcomponent"></a>AbstractReliefComponentType, _ReliefComponent</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractReliefComponentType, _ReliefComponent UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tin_relief"><a class="anchor" href="#_tin_relief"></a>5.12.2. TIN relief</h4>
<div class="sect4">
<h5 id="_tinrelieftype_tinrelief"><a class="anchor" href="#_tinrelieftype_tinrelief"></a>TINReliefType, TINRelief</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert TINReliefType, TINRelief UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The geometry of a TINRelief is defined by the GML geometry class gml:TriangulatedSurface. This allows either the explicit provision of a set of triangles (gml:TriangulatedSurface) or specifying of only the control points, break and stop lines using the subclass gml:Tin of gml:TriangulatedSurface. In the latter case, an application that processes an instance document containing a gml:Tin has to reconstruct the triangulated surface by the applica-tion of a constrained Delaunay triangulation algorithm (cf. Okabe et al. 1992).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_raster_relief"><a class="anchor" href="#_raster_relief"></a>5.12.3. Raster relief</h4>
<div class="sect4">
<h5 id="_rasterrelieftype_rasterrelief_elevation"><a class="anchor" href="#_rasterrelieftype_rasterrelief_elevation"></a>RasterReliefType, RasterRelief, Elevation</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert RasterReliefType, RasterRelief, Elevation UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mass_point_relief"><a class="anchor" href="#_mass_point_relief"></a>5.12.4. Mass point relief</h4>
<div class="sect4">
<h5 id="_masspointrelieftype_masspointrelief"><a class="anchor" href="#_masspointrelieftype_masspointrelief"></a>MassPointReliefType, MassPointRelief</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert MassPointReliefType, MassPointRelief UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_breakline_relief"><a class="anchor" href="#_breakline_relief"></a>5.12.5. Breakline relief</h4>
<div class="sect4">
<h5 id="_breaklinerelieftype_breaklinerelief"><a class="anchor" href="#_breaklinerelieftype_breaklinerelief"></a>BreaklineReliefType, BreaklineRelief</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert BreaklineReliefType, BreaklineRelief UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The geometry of a BreaklineRelief can be composed of break lines and ridge/valley lines. Whereas break lines indicate abrupt changes of terrain slope, ridge/valley lines in addition mark a change of the sign of the terrain slope gradient. A BreaklineRelief must have at least one of the two properties.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_relief_section"><a class="anchor" href="#ug_model_relief_section"></a>5.13. Relief</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An essential part of a city model is the terrain. The Digital Terrain Model (DTM) of CityGML is provided by the thematic extension module Relief (cf. chapter 7). In CityGML, the terrain is represented by the class ReliefFea-ture in LOD 0-4 (Fig. 24 depicts the UML diagram, for the XML schema definition see annex A.9). A Re-liefFeature consists of one or more entities of the class ReliefComponent. Its validity may be restricted to a certain area defined by an optional validity extent polygon. As ReliefFeature and ReliefComponent are deriva-tives of _CityObject, the corresponding attributes and relations are inherited. The class ReliefFeature is associat-ed with different concepts of terrain representations which can coexist. The terrain may be specified as a regular raster or grid (RasterRelief), as a TIN (Triangulated Irregular Network, TINReflief), by break lines (BreaklineRe-lief), or by mass points (MasspointRelief). The four types are implemented by the corresponding GML3 classes: grids by gml:RectifiedGridCoverage, break lines by gml:MultiCurve, mass points by gml:MultiPoint and TINs either by gml:TriangulatedSurface or by gml:Tin. In case of gml:TriangulatedSurfaces, the triangles are given explicitly while in case of gml:Tin only 3D points are represented, where the triangulation can be reconstructed by standard methods (Delaunay triangulation, cf. Okabe et al. 1992). Break lines are represented by 3D curves. Mass points are simply a set of 3D points.</p>
</div>
<div id="figure-24-1" class="imageblock">
<div class="content">
<img src="figures/Figure_24.png" alt="Figure 24">
</div>
<div class="title">Figure 46. UML diagram of the Digital Terrain Model in CityGML. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML Relief module.</div>
</div>
<div class="paragraph">
<p>In a CityGML dataset the four terrain types may be combined in different ways, yielding a high flexibility. First, each type may be represented in different levels of detail, reflecting different accuracies or resolutions. Second, a part of the terrain can be described by the combination of multiple types, for example by a raster and break lines, or by a TIN and break lines. In this case, the break lines must share the geometry with the triangles. Third, neighboring regions may be represented by different types of terrain models. To facilitate this combination, each terrain object is provided with a spatial attribute denoting its extent of validity (Fig. 25). In most cases, the extent of validity of a regular raster dataset corresponds to its bounding box. This validity extent is represented by a 2D footprint polygon, which may have holes. This concept enables, for example, the modelling of a terrain by a coarse grid, where some distinguished regions are represented by a detailed, high-accuracy TIN. The boundaries between both types are given by the extent attributes of the corresponding terrain objects.</p>
</div>
<div id="figure-25-2" class="imageblock">
<div class="content">
<img src="figures/Figure_25.png" alt="Figure 25">
</div>
<div class="title">Figure 47. Nested DTMs in CityGML using validity extent polygons (graphic: IGG Uni Bonn).</div>
</div>
<div class="paragraph">
<p>Accuracy and resolution of the DTM are not necessarily dependent on features of other CityGML extenstion modules such as building models. Hence, there is the possibility to integrate building models with higher LOD to a DTM with lower accuracy or resolution.</p>
</div>
<div class="paragraph">
<p>This approach interacts with the concept of TerrainIntersectionCurves TIC (cf. chapter 6.5). The TIC can be used like break lines to adjust the DTM to different features such as buildings, bridges, or city furnitures, and hence to ensure a consistent representation of the DTM. If necessary, a retriangulation may have to be processed. A TIC can also be derived by the individual intersection of the DTM and the corresponding feature.</p>
</div>
<div class="paragraph">
<p>ReliefFeature and its ReliefComponents both have an lod attribute denoting the corresponding level of detail. In most cases, the LOD of a ReliefFeature matches the LOD of its ReliefComponents. However, it is also allowed to specify a ReliefFeature with a high LOD which consists of ReliefComponents where some of them can have a LOD lower than that of the aggregating ReliefFeature. The idea is that, for example, for a LOD3 scene it might be sufficient to use a regular grid in LOD2 with certain higher precision areas defined by ReliefComponents in LOD3. The LOD2 grid and the LOD3 components can easily be integrated using the concept of the validity extent polygon. Therefore, although some of the ReliefComponents would have been classified to a lower LOD, the whole ReliefFeature would be appropriate to use with other LOD3 models which is indicated by setting its lod value to 3.</p>
</div>
<div class="sect3">
<h4 id="_relief_feature_and_relief_component_2"><a class="anchor" href="#_relief_feature_and_relief_component_2"></a>5.13.1. Relief feature and relief component</h4>
<div class="sect4">
<h5 id="_relieffeaturetype_relieffeature_2"><a class="anchor" href="#_relieffeaturetype_relieffeature_2"></a>ReliefFeatureType, ReliefFeature</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert ReliefFeatureType, ReliefFeature UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_abstractreliefcomponenttype_reliefcomponent_2"><a class="anchor" href="#_abstractreliefcomponenttype_reliefcomponent_2"></a>AbstractReliefComponentType, _ReliefComponent</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractReliefComponentType, _ReliefComponent UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tin_relief_2"><a class="anchor" href="#_tin_relief_2"></a>5.13.2. TIN relief</h4>
<div class="sect4">
<h5 id="_tinrelieftype_tinrelief_2"><a class="anchor" href="#_tinrelieftype_tinrelief_2"></a>TINReliefType, TINRelief</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert TINReliefType, TINRelief UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The geometry of a TINRelief is defined by the GML geometry class gml:TriangulatedSurface. This allows either the explicit provision of a set of triangles (gml:TriangulatedSurface) or specifying of only the control points, break and stop lines using the subclass gml:Tin of gml:TriangulatedSurface. In the latter case, an application that processes an instance document containing a gml:Tin has to reconstruct the triangulated surface by the applica-tion of a constrained Delaunay triangulation algorithm (cf. Okabe et al. 1992).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_raster_relief_2"><a class="anchor" href="#_raster_relief_2"></a>5.13.3. Raster relief</h4>
<div class="sect4">
<h5 id="_rasterrelieftype_rasterrelief_elevation_2"><a class="anchor" href="#_rasterrelieftype_rasterrelief_elevation_2"></a>RasterReliefType, RasterRelief, Elevation</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert RasterReliefType, RasterRelief, Elevation UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mass_point_relief_2"><a class="anchor" href="#_mass_point_relief_2"></a>5.13.4. Mass point relief</h4>
<div class="sect4">
<h5 id="_masspointrelieftype_masspointrelief_2"><a class="anchor" href="#_masspointrelieftype_masspointrelief_2"></a>MassPointReliefType, MassPointRelief</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert MassPointReliefType, MassPointRelief UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_breakline_relief_2"><a class="anchor" href="#_breakline_relief_2"></a>5.13.5. Breakline relief</h4>
<div class="sect4">
<h5 id="_breaklinerelieftype_breaklinerelief_2"><a class="anchor" href="#_breaklinerelieftype_breaklinerelief_2"></a>BreaklineReliefType, BreaklineRelief</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert BreaklineReliefType, BreaklineRelief UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The geometry of a BreaklineRelief can be composed of break lines and ridge/valley lines. Whereas break lines indicate abrupt changes of terrain slope, ridge/valley lines in addition mark a change of the sign of the terrain slope gradient. A BreaklineRelief must have at least one of the two properties.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_transportation_section"><a class="anchor" href="#ug_model_transportation_section"></a>5.14. Transportation</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The transportation model of CityGML is a multi-functional, multi-scale model focusing on thematic and func-tional as well as on geometrical/topological aspects. Transportation features are represented as a linear network in LOD0. Starting from LOD1, all transportation features are geometrically described by 3D surfaces. The areal modelling of transportation features allows for the application of geometric route planning algorithms. This can be useful to determine restrictions and manoeuvres required along a transportation route. This information can also be employed for trajectory planning of mobile robots in the real world or the automatic placement of avatars (virtual people) or vehicle models in 3D visualisations and training simulators. The transportation model of CityGML is provided by the thematic extension module Transportation (cf. chapter 7).</p>
</div>
<div class="paragraph">
<p>The main class is TransportationComplex, which represents, for example, a road, a track, a railway, or a square. Fig. 57 illustrates the four different thematic classes.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Four images in the .doc may all be the same.
</td>
</tr>
</table>
</div>
<div id="figure-57" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_57_4.jpg" alt="Figure 57 4">
</div>
<div class="title">Figure 48. Representations of TransportationComplex (from left to right: examples of road, track, rail, and square) (source: Rheinmetall Defence Electronics).</div>
</div>
<div class="paragraph">
<p>A TransportationComplex is composed of the parts TrafficArea and AuxiliaryTrafficArea. Fig. 58 depicts an example for a LOD2 TransportationComplex configuration within a virtual 3D city model. The Road consists of several TrafficAreas for the sidewalks, road lanes, parking lots, and of AuxiliaryTrafficAreas below the raised flower beds.</p>
</div>
<div id="figure-58" class="imageblock">
<div class="content">
<img src="figures/Figure_58.png" alt="Figure 58">
</div>
<div class="title">Figure 49. Example for the representation of a TransportationComplex in LOD2 in CityGML: a road, which is the aggregation of TrafficAreas and AuxiliaryTrafficAreas (source: City of Solingen, IGG Uni Bonn).</div>
</div>
<div class="paragraph">
<p>Fig. 59 depicts the UML diagram of the transportation model, for the XML schema definition see annex A.10.</p>
</div>
<div id="figure-59" class="imageblock">
<div class="content">
<img src="figures/Figure_59.png" alt="Figure 59">
</div>
<div class="title">Figure 50. UML diagram of the transportation model in CityGML. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML Transportation module.</div>
</div>
<div class="paragraph">
<p>The road itself is represented as a TransportationComplex, which is further subdivided into TrafficAreas and AuxiliaryTrafficAreas. The TrafficAreas are those elements, which are important in terms of traffic usage, like car driving lanes, pedestrian zones and cycle lanes. The AuxiliaryTrafficAreas are describing further elements of the road, like kerbstones, middle lanes, and green areas.</p>
</div>
<div class="paragraph">
<p>TransportationComplex objects can be thematically differentiated using the subclasses Track, Road, Railway, and Square. Every TransportationComplex has the attributes class, function and usage whose possible values can be enumerated in code lists (chapter 10.7.4 and annex C.8). The attribute class describes the classification of the object, function describes the purpose of the object, for example national motorway, country road, or airport, while the attribute usage can be used, if the actual usage differs from the function. The attributes function and usage can occur multiple times.</p>
</div>
<div class="paragraph">
<p>In addition both TrafficArea and AuxiliaryTrafficArea may have the attributes class, function, usage, and sur-faceMaterial. The attribute class describes the classification of the object. For TrafficArea, function describes, if the object for example may be a car driving lane, a pedestrian zones, or a cycle lane, while the usage attribute indicates which modes of transportation can use it (e.g. pedestrian, car, tram, roller skates). The attribute sur-faceMaterial specifies the type of pavement and may also be used for AuxiliaryTrafficAreas (e.g. asphalt, con-crete, gravel, soil, rail, grass). The function attribute of the AuxiliaryTrafficArea defines, for example kerbstones, middle lanes, or green areas. The possible values can also be specified in code lists.</p>
</div>
<div class="paragraph">
<p>The shape of each traffic area is defined by a surface geometry. Additional metadata may be defined by using attributes from pre-defined catalogues. This affects the class, function and usage of each traffic area as well as its surface material. The attribute catalogues may be customer- or country-specific. The following tables show examples for various kinds of TrafficArea:</p>
</div>
<table id="abstracttransportation_semantics" class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 3. Examples of TrafficArea</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>Example</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>Country Road</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>Motorway Entry</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TransportationComplex – Function</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">road</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">road</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TrafficArea – Usage</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">car, truck, bus, taxi, motorcycle</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">car, truck, bus, taxi, motorcycle</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TrafficArea – Function</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">driving lane</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">motorway_entry</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TrafficArea – SurfaceMaterial</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">asphalt</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">concrete</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>TransportationComplex is a subclass of _TransportationObject and of the root class _CityObject. The geomet-rical representation of the TransportationComplex varies through the different levels of detail. Since Transporta-tionComplex is a subclass of _CityObject and hence a feature, it inherits the attribute gml:name. The street name is also stored within the gml:name property of the Road feature.</p>
</div>
<div class="paragraph">
<p>In the coarsest LOD0 the transportation complexes are modelled by line objects establishing a linear network. On this abstract level, path finding algorithms or similar analyses can be executed. It also can be used to generate schematic drawings and visualisations of the transport network. Since this abstract definition of transportation network does not contain explicit descriptions of the transportation objects, it may be task of the viewer applica-tion to generate the graphical visualisation, for example by using a library with style-definitions (width, color resp. texture) for each transportation object.</p>
</div>
<div class="paragraph">
<p>Starting from LOD1 a TransportationComplex provides an explicit surface geometry, reflecting the actual shape of the object, not just its centerline. In LOD2 to LOD4, it is further subdivided thematically into TrafficAreas, which are used by transportation, such as cars, trains, public transport, airplanes, bicycles or pedestrians and in AuxiliaryTrafficAreas, which are of minor importance for transportation purposes, for example road markings, green spaces or flower tubs. The different representations of a TransportationComplex for each LOD are illus-trated in Fig. 60.</p>
</div>
<div id="figure-60" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_60_1.png" alt="Figure 60 1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_60_2.png" alt="Figure 60 2">
</div>
<div class="title">Figure 51. TransportationComplex in LOD0, 1, and 2-4 (example shows part of a motorway) (source: Rheinmetall Defence Electronics).</div>
</div>
<div class="paragraph">
<p>In LOD0 areal transportation objects like squares should be modelled in the same way as in GDF, the ISO standard for transportation networks, which is used in most car navigation systems. In GDF a square is typically represented as a ring surrounding the place and to which the incident roads connect. CityGML does not cover further functional aspects of transportation network models (e.g. speed limits) as it is intended to complement and not replace existing standards like GDF. However, if specific functional aspects have to be associated with CityGML transportation objects, generic attributes provided by CityGML’s Generics module (cf. chapter 10.12) can be used. Moreover, further objects of interest can be added from other information systems by the use of ExternalReferences (see chapter 6.11). For example, GDF datasets, which provide additional information for car navigation, can be used for simulation and visualisation of traffic flows. The values of the object attributes can be augmented or replaced using the concept of dictionaries (see chapter 6.6). These directories may be country- or user-specific (especially for country-specific road signs and signals).</p>
</div>
<div id="figure-61" class="imageblock">
<div class="content">
<img src="figures/Figure_61.png" alt="Figure 61">
</div>
<div class="title">Figure 52. TransportationComplex in LOD 2-4: representation of a road with a complex cross-section profile (example shows urban road) (source: Rheinmetall Defence Electronics).</div>
</div>
<div class="paragraph">
<p>The following example shows a complex urban crossing. The picture on the left is a screenshot of an editor application for a training simulator, which allows the definition of road networks consisting of transportation objects, external references, buildings and vegetation objects. On the right, the 3D representation of the defined crossing is shown including all referenced static and dynamic models.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert fig62
</td>
</tr>
</table>
</div>
<div id="figure-62" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_62_a.png" alt="Figure 62 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_62_b.jpg" alt="Figure 62 b">
</div>
<div class="title">Figure 53. Complex urban intersection (left: linear transportation network with surface descriptions and external references, right: generated scene) (source: Rheinmetall Defence Electronics).</div>
</div>
<div class="sect3">
<h4 id="_transporatation_complex"><a class="anchor" href="#_transporatation_complex"></a>5.14.1. Transporatation Complex</h4>
<div class="sect4">
<h5 id="_abstracttransportationobjecttype_transportationobject"><a class="anchor" href="#_abstracttransportationobjecttype_transportationobject"></a>AbstractTransportationObjectType, _TransportationObject</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractTransportationObjectType, _TransportationObject UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>_TransportationObject represents the abstract superclass for transportation objects. Future extensions of the CityGML transportation model shall be modelled as subclasses of this class.</p>
</div>
</div>
<div class="sect4">
<h5 id="_transportationcomplextype_transportationcomplex"><a class="anchor" href="#_transportationcomplextype_transportationcomplex"></a>TransportationComplexType, TransportationComplex</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert TransportationComplexType, TransportationComplex UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This type and element describe transportation complexes like roads or railways which may be aggregated from different thematic components (traffic areas, e.g. pedestrian path, and auxiliary traffic areas). As a subclass of _CityObject, TransportationComplex inherits all attributes and relations, in particular an id, names, external references, and generalisation relations. Furthermore, it represents the superclass for thematically distinct types of transportation complexes.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_subclasses_of_transportation_complexes"><a class="anchor" href="#_subclasses_of_transportation_complexes"></a>5.14.2. Subclasses of Transportation Complexes</h4>
<div class="sect4">
<h5 id="_tracktype_track"><a class="anchor" href="#_tracktype_track"></a>TrackType, Track</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert TrackType, Track UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A Track is a small path mainly used by pedestrians. It is a subclass of TransportationComplex and thus inherits all its attributes and relations.</p>
</div>
</div>
<div class="sect4">
<h5 id="_roadtype_road"><a class="anchor" href="#_roadtype_road"></a>RoadType, Road</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert RoadType, Road UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Road is intended to be used to represent transportation features that are mainly used by vehicles like cars, for example streets, motorways, and country roads. It is a subclass of TransportationComplex and thus inherits all its attributes and relations.</p>
</div>
</div>
<div class="sect4">
<h5 id="_railwaytype_railway"><a class="anchor" href="#_railwaytype_railway"></a>RailwayType, Railway</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert RailwayType, Railway UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Railway represents routes that are utilised by rail vehicles like trams or trains. It is a subclass of Transportation-Complex and thus inherits all its attributes and relations.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_squaretype_square"><a class="anchor" href="#_squaretype_square"></a>5.14.3. SquareType, Square</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert SquareType, Square UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A Square is an open area commonly found in cities (e.g. a plaza, market square). It is a subclass of Transporta-tionComplex and thus inherits all its attributes and relations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_subdivisions_of_transportation_complexes"><a class="anchor" href="#_subdivisions_of_transportation_complexes"></a>5.14.4. Subdivisions of Transportation Complexes</h4>
<div class="sect4">
<h5 id="_trafficareatype_trafficarea"><a class="anchor" href="#_trafficareatype_trafficarea"></a>TrafficAreaType, TrafficArea</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert TrafficAreaType, TrafficArea UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_auxiliarytrafficareatype_auxiliarytrafficarea"><a class="anchor" href="#_auxiliarytrafficareatype_auxiliarytrafficarea"></a>AuxiliaryTrafficAreaType, AuxiliaryTrafficArea</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AuxiliaryTrafficAreaType, AuxiliaryTrafficArea UML
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_tunnel_section"><a class="anchor" href="#ug_model_tunnel_section"></a>5.15. Tunnel Model</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The tunnel model is closely related to the building model. It supports the representation of thematic and spatial aspects of tunnels and tunnel parts in four levels of detail, LOD1 to LOD4. The tunnel model of CityGML is defined by the thematic extension module Tunnel (cf. chapter 7). Fig. 37 provides examples of tunnel models for each LOD.</p>
</div>
<div id="figure-37" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_37_a.png" alt="Figure 37 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_37_b.png" alt="Figure 37 b">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_37_c.png" alt="Figure 37 c">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_37_d.png" alt="Figure 37 d">
</div>
<div class="title">Figure 54. Examples for tunnel models in LOD1 (upper left), LOD2 (upper right), LOD3 (lower left) and LOD4 (lower right) (source: Google 3D warehouse).</div>
</div>
<div class="paragraph">
<p>The UML diagram of the tunnel model is shown in Fig. 38. The XML schema definition is attached in annex A.11. The pivotal class of the model is _AbstractTunnel, which is a subclass of the thematic class _Site (and transitively of the root class _CityObject). _AbstractTunnel is specialized either to a Tunnel or to a TunnelPart. Since an _AbstractTunnel consists of TunnelParts, which again are _AbstractTunnels, an aggregation hierarchy of arbitrary depth may be realized. As subclass of the root class _CityObject, an _AbstractTunnel inherits all properties from _CityObject like the GML3 standard feature properties (gml:name etc.) and the CityGML specific properties like ExternalReferences (cf. chapter 6.7). Further properties not explicitly covered by _AbstractTunnel may be modelled as generic attributes provided by the CityGML Generics module (cf. chapter 10.12) or using the CityGML Application Domain Extension mechanism (cf. chapter 10.13).</p>
</div>
<div class="paragraph">
<p>Both classes Tunnel and TunnelPart inherit the attributes of _AbstractTunnel: the class of the tunnel, the func-tion, the usage, the year of construction and the year of demolition. In contrast to _AbstractBuilding, Address features cannot be assigned to _AbstractTunnel.</p>
</div>
<div id="figure-38" class="imageblock">
<div class="content">
<img src="figures/Figure_38.png" alt="Figure 38">
</div>
<div class="title">Figure 55. UML diagram of CityGML’s tunnel model. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML Tunnel module.</div>
</div>
<div class="paragraph">
<p>The geometric representation and semantic structure of an _AbstractTunnel is shown in Fig. 38. The model is successively refined from LOD1 to LOD4. Therefore, not all components of a tunnel model are represented equally in each LOD and not all aggregation levels are allowed in each LOD. In CityGML, all object classes are associated to the LODs with respect to the proposed minimum acquisition criteria for each LOD (cf. chapter 6.2). An object can be represented simultaneously in different LODs by providing distinct geometries for the corresponding LODs.</p>
</div>
<div class="paragraph">
<p>Similar to the building and brigde models (cf. chapters 10.3 and 10.5), only the outer shell of a tunnel is repre-sented in LOD1 – 3, which is composed of the tunnel’s boundary surfaces to the surrounding earth, water, or outdoor air. The interior of a tunnel may only be modeled in LOD4. Although the interior built environment is especially relevant for subsurface objects like tunnels or underground buildings, CityGML employs a consistent LOD concept for all thematic modules. If, in contrast, the representation of the interior of subsurface objects would be possible in all LODs, the LOD concept for subsurface objects would have to substantially differ from the LOD concept for aboveground objects. This would require the precise definition of a “transition surface” which delimits the scope of both LOD concepts. Furthermore, features being partially above and below ground would have to be split into an above-ground part (modeled according to the aboveground LOD concept) and a subsurface part (modeled according to the subsurface LOD concept). However, such a splitting violates the CityGML concept of unity of features and would not be feasible in many cases where the transition between above and below ground is often not precisely known or depends on (the LOD of) the terrain model. Hence, CityGML applies a single and consistent LOD concept to both aboveground and subsurface objects. As a conse-quence, penetrations between a tunnel and objects inside this tunnel (e.g., roads and railways) may occur in LOD1 – 3.</p>
</div>
<div class="paragraph">
<p>In LOD1, a tunnel model consists of a geometric representation of the tunnel volume. Optionally, a MultiCurve representing the TerrainIntersectionCurve (cf. chapter 6.5) can be specified. The geometric representation is refined in LOD2 by additional MultiSurface and MultiCurve geometries.</p>
</div>
<div class="paragraph">
<p>In LOD2 and higher LODs the outer structure of a tunnel can also be differentiated semantically by the classes _BoundarySurface and TunnelInstallation. A boundary surface is a part of the tunnel’s exterior shell with a special function like wall (WallSurface), roof (RoofSurface), ground plate (GroundSurface), outer floor (Outer-FloorSurface), outer ceiling (OuterCeilingSurface) or ClosureSurface. The TunnelInstallation class is used for tunnel elements like outer stairs, strongly affecting the outer appearance of a tunnel. A TunnelInstallation may have the attributes class, function and usage (see Fig. 38).</p>
</div>
<div class="paragraph">
<p>In LOD3, the openings in _BoundarySurface objects (doors and windows) can be represented as thematic ob-jects.</p>
</div>
<div class="paragraph">
<p>In LOD4, the highest level of resolution, also the interior of a tunnel, composed of several hollow spaces, is represented in the tunnel model by the class HollowSpace. This enlargement allows a virtual accessibility of tunnels, e.g. for driving through a tunnel, for simulating disaster management or for presenting the light illumi-nation within a tunnel. The aggregation of hollow spaces according to arbitrary, user defined criteria (e.g. for defining the hollow spaces corresponding to horizontal or vertical sections) is achieved by employing the general grouping concept provided by CityGML (cf. chapter 10.11). Interior installations of a tunnel, i.e. objects within a tunnel which (in contrast to furniture) cannot be moved, are represented by the class IntTunnelInstallation. If an installation is attached to a specific hollow space (e.g. lamps, ventilator), they are associated with the Hol-lowSpace class, otherwise (e.g. pipes) with _AbstractTunnel. A HollowSpace may have the attributes class, function and usage whose possible values can be enumerated in code lists (chapter 10.4.7, Annex C). The class attribute allows a general classification of hollow spaces, e.g. commercial or private rooms, and occurs only once. The function attribute is intended to express the main purpose of the hollow space, e.g. control area, installation space, storage space. The attribute usage can be used if the way the object is actually used differs from the function. Both attributes can occur multiple times.</p>
</div>
<div class="paragraph">
<p>The visible surface of a hollow space is represented geometrically as a Solid or MultiSurface. Semantically, the surface can be structured into specialised _BoundarySurfaces, representing floor (FloorSurface), ceiling (Ceil-ingSurface), and interior walls (InteriorWallSurface). Hollow space furniture, like movable equipment in control areas, can be represented in the CityGML tunnel model with the class TunnelFurniture. A TunnelFurniture may have the attributes class, function and usage.</p>
</div>
<div class="sect3">
<h4 id="_tunnel_and_tunnel_part"><a class="anchor" href="#_tunnel_and_tunnel_part"></a>5.15.1. Tunnel and Tunnel Part</h4>
<div class="sect4">
<h5 id="_tunneltype_tunnel"><a class="anchor" href="#_tunneltype_tunnel"></a>TunnelType, Tunnel</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert TunnelType, Tunnel UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Tunnel class is one of the two subclasses of _AbstractTunnel. If a tunnel only consists of one (homogene-ous) part, this class shall be used. A tunnel composed of structural segments, for example tunnel entrance and subway, has to be separated into one tunnel having one or more additional TunnelPart (see Fig. 39). The geome-try and non-spatial properties of the central part of the tunnel should be represented in the aggregating Tunnel feature.</p>
</div>
</div>
<div class="sect4">
<h5 id="_tunnelparttype_tunnelpart"><a class="anchor" href="#_tunnelparttype_tunnelpart"></a>TunnelPartType, TunnelPart</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert TunnelPartType, TunnelPart UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If sections of a tunnel differ in geometry and / or attributes, the tunnel can be separated into parts (see Fig. 39). Like Tunnel, the class TunnelPart is derived from _AbstractTunnel and inherites all attributes of _AbstractTunnel. A TunnelPart object should be uniquely related to exactly one tunnel or tunnel part object.</p>
</div>
<div id="figure-39" class="imageblock">
<div class="content">
<img src="figures/Figure_39.jpg" alt="Figure 39">
</div>
<div class="title">Figure 56. Example of a tunnel modeled with two tunnel parts (source: Helmut Stracke).</div>
</div>
</div>
<div class="sect4">
<h5 id="_abstracttunneltype_abstracttunnel"><a class="anchor" href="#_abstracttunneltype_abstracttunnel"></a>AbstractTunnelType, _AbstractTunnel</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractTunnelType, _AbstractTunnel UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The abstract class _AbstractTunnel contains properties for tunnel attributes, purely geometric representations, and geometric/semantic representations of the tunnel or tunnel part in different levels of detail. The attributes describe:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The classification of the tunnel or tunnel part (class), the different functions (function), and the usage (us-age). The type of these attributes is gml:CodeType and the values can be specified in separate code lists.</p>
</li>
<li>
<p>The year of construction (yearOfConstruction) and the year of demolition (yearOfDemolition) of the tunnel or tunnel part. The yearOfConstruction is the year of completion of the tunnel. The yearOfDemolition is the year when the demolition of the tunnel was completed. The date (year) refer to real world time (e.g. 2011).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Spanning the different levels of detail, the tunnel model differs in the complexity and granularity of the geomet-ric representation and the thematic structuring of the model into components with a special semantic meaning. This is illustrated in Fig. 40, showing the same tunnel in four different LODs. Some properties of the class _AbstractTunnel are also associated with certain LODs.</p>
</div>
<div id="figure-40" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_40_1.png" alt="Figure 40 1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_40_2.png" alt="Figure 40 2">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_40_3.png" alt="Figure 40 3">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_40_4.png" alt="Figure 40 4">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_40_5.png" alt="Figure 40 5">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_40_6.png" alt="Figure 40 6">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_40_7.png" alt="Figure 40 7">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_40_8.png" alt="Figure 40 8">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_40_9.png" alt="Figure 40 9">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_40_10.png" alt="Figure 40 10">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_40_11.png" alt="Figure 40 11">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_40_12.png" alt="Figure 40 12">
</div>
<div class="title">Figure 57. Tunnel model in LOD1 – LOD4 (source: Karlsruhe Institute of Technology (KIT)).</div>
</div>
<div class="paragraph">
<p>Tab. 6 shows the correspondence of the different geometric and semantic themes of the tunnel model to LODs. In each LOD, the volume of a tunnel can be expressed by a gml:Solid geometry and/or a gml:MultiSurface geometry. The definition of a 3D Terrain Intersection Curve (TIC), used to integrate tunnels from different sources with the Digital Terrain Model, is also possible in all LODs. The TIC can – but does not have to – build closed rings around the tunnel or tunnel parts.</p>
</div>
<table id="abstracttunnel_semantics" class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 4. Semantic themes of the class _AbstractTunnel</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>Geometric / semantic theme</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>Property  type</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>LOD1</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>LOD2</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>LOD3</strong></th>
<th class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><strong>LOD4</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Building footprint and roof edge</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:MultiSurfaceType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Volume part of the tunnel shell</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:SolidType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Surface part of the tunnel shell</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:MultiSurfaceType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Terrain intersection curve</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:MultiCurveType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Curve part of the tunnel shell</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gml:MultiCurveType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Tunnel parts</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TunnelPartType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Boundary surfaces (chapter 10.4.3)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">AbstractBoundarySurfaceType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Outer tunnel installations (chapter 10.4.2)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TunnelInstallationType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Openings</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">AbstractOpeningType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Hollow spaces (chapter 10.4.5)</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">HollowSpaceType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">•</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Interior tunnel installations</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">IntTunnelInstallationType</p></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_outer_tunnel_installations"><a class="anchor" href="#_outer_tunnel_installations"></a>5.15.2. Outer Tunnel Installations</h4>
<div class="sect4">
<h5 id="_tunnelinstallationtype_tunnelinstallation"><a class="anchor" href="#_tunnelinstallationtype_tunnelinstallation"></a>TunnelInstallationType, TunnelInstallation</h5>
<div class="paragraph">
<p>A TunnelInstallation is an outer component of a tunnel which has not the significance of a TunnelPart, but which strongly affects the outer characteristic of the tunnel, for examples stairs. A TunnelInstallation optionally has attributes class, function and usage. The attribute class - which can only occur once - represents a general classification of the installation. With the attributes function and usage, nominal and real functions of a tunnel installation can be described. For all three attributes the list of feasible values can specified in a code list. For the geometrical representation of a TunnelInstallation, an arbitrary geometry object from the GML subset shown in Fig. 9 can be used. Alternatively, the geometry may be given as ImplicitGeometry object. Following the concept of ImplicitGeometry the geometry of a prototype tunnel installation is stored only once in a local coordinate system and referenced by other tunnel installation features (see chapter 8.2). The visible surfaces of a tunnel installation can be semantically classified using the concept of boundary surfaces (cf. 10.3.3). A TunnelInstalla-tion object should be uniquely related to exactly one tunnel or tunnel part object.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_boundary_surfaces_3"><a class="anchor" href="#_boundary_surfaces_3"></a>5.15.3. Boundary surfaces</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert Boundary surfaces UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>_BoundarySurface is the abstract base class for several thematic classes, structuring the exterior shell of a tunnel as well as the visible surface of hollow spaces and both outer and interior tunnel installations. It is a subclass of _CityObject and thus inherits all properties like the GML3 standard feature properties (gml:name etc.) and the CityGML specific properties like ExternalReferences. From _BoundarySurface, the thematic classes RoofSur-face, WallSurface, GroundSurface, OuterCeilingSurface, OuterFloorSurface, ClosureSurface, FloorSurface, InteriorWallSurface, and CeilingSurface are derived. The thematic classification of tunnel surfaces is illustrated in Fig. 41 for different types of tunnel cross sections and are specified below.</p>
</div>
<div id="figure-41" class="imageblock">
<div class="content">
<img src="figures/Figure_41.png" alt="Figure 41">
</div>
<div class="title">Figure 58. Examples for the use of boundary surfaces for tunnels with different cross sections. WallSurface, RoofSurface, GroundSurface, OuterCeilingSurface and OuterFloorSurface are available in LOD2– 4, whereas InteriorWallSurface, FloorSurface and CeilingSurface may only be used in LOD4 to model the interior boundary surfaces of a hollow space.</div>
</div>
<div class="paragraph">
<p>For each LOD between 2 and 4, the geometry of a _BoundarySurface may be defined by a different gml:MultiSurface geometry. Starting from LOD3, a _BoundarySurface may contain _Openings (cf. chapter 10.4.4) like doors and windows. If the geometric location of openings topologically lies within a surface compo-nent (e.g. gml:Polygon) of the gml:MultiSurface geometry, these openings must be represented as holes within that surface. A hole is represented by an interior ring within the corresponding surface geometry object. Accord-ing to GML3, the points have to be specified in reverse order (exterior boundaries counter-clockwise and interior boundaries clockwise when looking in opposite direction of the surface’s normal vector). If such an opening is sealed by a Door or a Window, their outer boundary may consist of the same points as the inner ring (denoting the hole) of the surrounding surface. The embrasure surfaces of an opening belong to the relevant adjacent _BoundarySurface. If, for example a door seals the opening, the embrasure surface on the one side of the door belongs to the InteriorWallSurface and on the other side to the WallSurface (cf. right part of Fig. 32 for the same situation in a building model).</p>
</div>
<div class="sect4">
<h5 id="_groundsurfacetype_groundsurface_3"><a class="anchor" href="#_groundsurfacetype_groundsurface_3"></a>GroundSurfaceType, GroundSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert GroundSurfaceType, GroundSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The ground plate of a tunnel or tunnel part is modelled by the class GroundSurface. Usually a GroundSurface is a boundary surface between the tunnel and the surrounding earth (soil, rock etc.) or water.</p>
</div>
</div>
<div class="sect4">
<h5 id="_outerceilingsurfacetype_outerceilingsurface_3"><a class="anchor" href="#_outerceilingsurfacetype_outerceilingsurface_3"></a>OuterCeilingSurfaceType, OuterCeilingSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert OuterCeilingSurfaceType, OuterCeilingSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A mostly horizontal surface belonging to the outer tunnel shell and with the orientation pointing downwards can be modeled as an OuterCeilingSurface. Examples are the visible part of an avalanche protector or the boundary surface between the tunnel and the surrounding earth or water.</p>
</div>
</div>
<div class="sect4">
<h5 id="_wallsurfacetype_wallsurface_3"><a class="anchor" href="#_wallsurfacetype_wallsurface_3"></a>WallSurfaceType, WallSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert WallSurfaceType, WallSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All parts of the tunnel facade belonging to the outer tunnel shell can be modelled by the class WallSurface. Usually a WallSurface is a boundary surface between the tunnel and the surrounding earth (soil, rock etc.) or water.</p>
</div>
</div>
<div class="sect4">
<h5 id="_outerfloorsurfacetype_outerfloorsurface_3"><a class="anchor" href="#_outerfloorsurfacetype_outerfloorsurface_3"></a>OuterFloorSurfaceType, OuterFloorSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert OuterFloorSurfaceType, OuterFloorSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A mostly horizontal surface belonging to the outer tunnel shell and with the orientation pointing upwards can be modeled as an OuterFloorSurface.</p>
</div>
</div>
<div class="sect4">
<h5 id="_roofsurfacetype_roofsurface_3"><a class="anchor" href="#_roofsurfacetype_roofsurface_3"></a>RoofSurfaceType, RoofSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert RoofSurfaceType, RoofSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Boundary surfaces belonging to the outer tunnel shell and with the main purpose to protect the tunnel from above are expressed by the class RoofSurface. The orientation of these boundaries is mainly pointing upwards.</p>
</div>
</div>
<div class="sect4">
<h5 id="_closuresurfacetype_closuresurface_3"><a class="anchor" href="#_closuresurfacetype_closuresurface_3"></a>ClosureSurfaceType, ClosureSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert ClosureSurfaceType, ClosureSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Openings in tunnels or hollow spaces not filled by a door or a window can be sealed by a virtual surface called ClosureSurface (cf. chapter 6.4). For example, the doorways of tunnels can be modelled as ClosureSurface.</p>
</div>
</div>
<div class="sect4">
<h5 id="_floorsurfacetype_floorsurface_3"><a class="anchor" href="#_floorsurfacetype_floorsurface_3"></a>FloorSurfaceType, FloorSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert FloorSurfaceType, FloorSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class FloorSurface must only be used in the LOD4 interior tunnel model for modelling the floor of hollow spaces.</p>
</div>
</div>
<div class="sect4">
<h5 id="_interiorwallsurfacetype_interiorwallsurface_3"><a class="anchor" href="#_interiorwallsurfacetype_interiorwallsurface_3"></a>InteriorWallSurfaceType, InteriorWallSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert InteriorWallSurfaceType, InteriorWallSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class InteriorWallSurface is only allowed to be used in the LOD4 interior tunnel model for modelling the visible wall surfaces of hollow spaces.</p>
</div>
</div>
<div class="sect4">
<h5 id="_ceilingsurfacetype_ceilingsurface_3"><a class="anchor" href="#_ceilingsurfacetype_ceilingsurface_3"></a>CeilingSurfaceType, CeilingSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert CeilingSurfaceType, CeilingSurface UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class CeilingSurface is only allowed to be used in the LOD4 interior tunnel model for modelling the ceiling of hollow spaces.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_openings_3"><a class="anchor" href="#_openings_3"></a>5.15.4. Openings</h4>
<div class="sect4">
<h5 id="_abstractopeningtype_opening_3"><a class="anchor" href="#_abstractopeningtype_opening_3"></a>AbstractOpeningType, _Opening</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractOpeningType, _Opening UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class _Opening is the abstract base class for semantically describing openings like doors or windows in outer and inner boundary surfaces. Openings only exist in models of LOD3 or LOD4. Each _Opening is associ-ated with a gml:MultiSurface geometry. Alternatively, the geometry may be given as ImplicitGeometry object. Following the concept of ImplicitGeometry the geometry of a prototype opening is stored only once in a local coordinate system and referenced by other opening features (see chapter 8.2).</p>
</div>
</div>
<div class="sect4">
<h5 id="_windowtype_window_3"><a class="anchor" href="#_windowtype_window_3"></a>WindowType, Window</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert WindowType, Window UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class Window is used for modelling windows in the in the exterior shell of a tunnel and in hollow spaces, or hatches between adjacent hollow spaces. The formal difference between the classes Window and Door is that – in normal cases – Windows are not specifically intended for the transit of people or vehicles.</p>
</div>
</div>
<div class="sect4">
<h5 id="_doortype_door_3"><a class="anchor" href="#_doortype_door_3"></a>DoorType, Door</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert DoorType, Door UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The class Door is used for modelling doors in the exterior shell of a tunnel, or between adjacent hollow spaces. Doors can be used by people to enter or leave a tunnel or ahollow space. In contrast to a ClosureSurface a door may be closed, blocking the transit of people or vehicles.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tunnel_interior"><a class="anchor" href="#_tunnel_interior"></a>5.15.5. Tunnel Interior</h4>
<div class="sect4">
<h5 id="_hollowspacetype_hollowspace"><a class="anchor" href="#_hollowspacetype_hollowspace"></a>HollowSpaceType, HollowSpace</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert HollowSpaceType, HollowSpace UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A HollowSpace is a semantic object for modelling the free space inside a tunnel and should be uniquely related to exactly one tunnel or tunnel part object. It should be closed (if necessary by using ClosureSurface) and the geometry normally will be described by a solid (lod4Solid). However, if the topological correctness of the boundary cannot be guaranteed, the geometry can alternatively be given as a MultiSurface (lod4MultiSurface). The surface normals of the outer shell of a GML solid must point outwards. This is important if appearences should be assigned to HollowSpace surfaces. In this case, textures and colors must be placed on the backside of the corresponding surfaces in order to be visible from the inside of the hollow space.</p>
</div>
<div class="paragraph">
<p>In addition to the geometrical representation, different parts of the visible surface of a hollow space can be modelled by specialised boundary surfaces (FloorSurface, CeilingSurface, InteriorWallSurface, and ClosureSur-face, cf. chapter 10.4.3).</p>
</div>
</div>
<div class="sect4">
<h5 id="_tunnelfurnituretype_tunnelfurniture"><a class="anchor" href="#_tunnelfurnituretype_tunnelfurniture"></a>TunnelFurnitureType, TunnelFurniture</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert TunnelFurnitureType, TunnelFurniture UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Hollow spaces may have TunnelFurniture. A TunnelFurniture is a movable part of a hollow space. A Tunnel-Furniture object should be uniquely related to exactly one hollow space. Its geometry may be represented by an explicit geometry or an ImplicitGeometry object. Following the concept of ImplicitGeometry the geometry of a prototype tunnel furniture is stored only once in a local coordinate system and referenced by other tunnel furni-ture features (see chapter 8.2).</p>
</div>
</div>
<div class="sect4">
<h5 id="_inttunnelinstallationtype_inttunnelinstallation"><a class="anchor" href="#_inttunnelinstallationtype_inttunnelinstallation"></a>IntTunnelInstallationType, IntTunnelInstallation</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert IntTunnelInstallationType, IntTunnelInstallation UML
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An IntTunnelInstallation is an object inside a tunnel with a specialized function or semantic meaning. In contrast to TunnelFurniture, objects of the class IntTunnelInstallation are permanently attached to the tunnel structure and cannot be moved. Typical examples are interior stairs, railings, radiators or pipes. Objects of the class IntTunnelInstallation can either be associated with a hollow space (class HollowSpace), or with the complete tunnel or tunnel part (class _AbstractTunnel, see chapter 10.4.1). However, they should be uniquely related to exactly one hollow space or one tunnel / tunnel part object. An IntTunnelInstallation optionally has the attributes class, function and usage. The attribute class, which can only occur once, represents a general classification of the internal tunnel component. With the attributes function and usage, nominal and real functions of a tunnel installation can be described. For all three attributes the list of feasible values can be specified in a code list. For the geometrical representation of an IntTunnelInstallation, an arbitrary geometry object from the GML subset shown in Fig. 9 can be used. Alternatively, the geometry may be given as ImplicitGeometry object. Following the concept of ImplicitGeometry the geometry of a prototype interior tunnel installation is stored only once in a local coordinate system and referenced by other interior tunnel installation features (see chapter 8.2). The visible surfaces of an interior tunnel installation can be semantically classified using the concept of boundary surfaces (cf. 10.4.3).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_examples_3"><a class="anchor" href="#_examples_3"></a>5.15.6. Examples</h4>
<div class="paragraph">
<p>The example in Fig. 42 shows a pedestrian underpass in the city centre of Karlsruhe, Germany. On the left side
of Fig. 42, a photo illustrates the real world situation. Both entrances of the underpass are marked in the photo by
dashed rectangles. On the right side of the figure, the CityGML tunnel model is shown. The terrain surrounding
the tunnel has been virtually cut out of model in order to visualize the entire tunnel with its subsurface body. The
same underpass is illustrated in Fig. 43 from a different perspective. The camera is positioned in front of the left
entrance (black dashed rectangle in Fig. 42) and pointing in the direction of the right entrance (white dashed
rectangle in Fig. 42). On the right side of Fig. 43, the tunnel model is shown from the same perspective. Again
holes are cut in the terrain surface in order to make the subsurface part of the tunnel visible. An LOD1 representation
of the nearby buildings is shown in the background of the model.</p>
</div>
<div id="figure-42" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_42_a.png" alt="Figure 42 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_42_b.png" alt="Figure 42 b">
</div>
<div class="title">Figure 59. Example of a tunnel modeled in LOD3 (real situation on the left side; CityGML model on the right side) (source: Karlsruhe Institute of Technology (KIT), courtesy of City of Karlsruhe).</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert Fig 43
</td>
</tr>
</table>
</div>
<div id="figure-43" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_43_a.png" alt="Figure 43 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_43_b.png" alt="Figure 43 b">
</div>
<div class="title">Figure 60. The same LOD3 tunnel shown from a different perspective. The camera is positioned in front of the left entrance and pointing in the direction of the right entrance. (real situation on the left side; CityGML model on the right side). The model on the right also includes an LOD1 representation of the nearby buildings in the background (painted in light brown) (source: Karlsruhe Institute of Technology (KIT), courtesy of City of Karlsruhe).</div>
</div>
<div class="paragraph">
<p>The model is subdivided into one Tunnel (the actual underpass) and two TunnelParts (both entrances). The tunnel and tunnel parts are bounded by GroundSurface, WallSurface, RoofSurface. ClosureSurface objects are used to virtually seal the tunnel entrances. For safety reasons each of the two entrances has railings which are modeled as TunnelInstallation. Due to the high geometrical accuracy and the semantic richness, the model is
classified as LOD3.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_vegetation_section"><a class="anchor" href="#ug_model_vegetation_section"></a>5.16. Vegetation</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Vegetation features are important components of a 3D city model, since they support the recognition of the surrounding environment. By the analysis and visualisation of vegetation objects, statements on their distribu-tion, structure and diversification can be made. Habitats can be analysed and impacts on the fauna can be de-rived. The vegetation model may be used as a basis for simulations of, for example forest fire, urban aeration or micro climate. The model could be used, for example to examine forest damage, to detect obstacles (e.g. con-cerning air traffic) or to perform analysis tasks in the field of environmental protection. The vegetation model of CityGML is defined by the thematic extension module Vegetation (cf. chapter 7).</p>
</div>
<div class="paragraph">
<p>The vegetation model of CityGML distinguishes between solitary vegetation objects like trees and vegetation areas, which represent biotopes like forests or other plant communities (Fig. 63). Single vegetation objects are modelled by the class SolitaryVegetationObject, whereas for areas filled with a specific vegetation the class PlantCover is used. The geometry representation of a PlantCover feature may be a MultiSurface or a MultiSolid, depending on the vertical extent of the vegetation. For example regarding forests, a MultiSolid representation might be more appropriate. The UML diagram of the vegetation model is depicted in Fig. 64, for the XML schema definition see below and annex A.12.</p>
</div>
<div id="figure-63" class="imageblock">
<div class="content">
<img src="figures/Figure_63.png" alt="Figure 63">
</div>
<div class="title">Figure 61. Example for vegetation objects of the classes SolitaryVegetationObject and PlantCover (graphic: District of Recklinghausen).</div>
</div>
<div class="paragraph">
<p>A SolitaryVegetationObject may have the attributes class, function, usage, species height, trunkDiameter and crownDiameter. The attribute class contains the classification of the object or plant habit, e.g. tree, bush, grass, and can occur only once (see chapter 10.8.4 and annex C.7). The attribute species defines the species’ name, for example “Abies alba”, and can occur at most once (see chapter 10.8.4 and annex C.7). The optional attributes function and usage denotes the intended respectively real purpose of the object, for example botanical monu-ment, and can occur multiple times. The possible attribute values for class, species, function, and usage can be provided in a code list. The attribute height contains the relative height of the object. The attributes crownDiame-ter and trunkDiameter represent the plant crown and trunk diameter respectively. The trunk diameter is often used in regulations of municipal cadastre (e.g. tree management rules).</p>
</div>
<div class="paragraph">
<p>A PlantCover feature may have the attributes class, function, usage and averageHeight. The plant community of a PlantCover is represented by the attribute class. The values of this attribute can be specified in a code list (cf. chapter 10.8.4 and annex C.7) whose values should not only describe one plant type or species, but denote a typical mixture of plant types in a plant community. This information can be used in particular to generate realistic 3D visualisations, where the PlantCover region is automatically, perhaps randomly, filled with a corre-sponding mixture of 3D plant objects. The attributes function and usage indicate the intended respectively real purpose of the object, for example national forest, and can occur multiple times. The attribute averageHeight denotes the average relative vegetation height.</p>
</div>
<div class="paragraph">
<p>Since both SolitaryVegetationObject and PlantCover are derived fom _CityObject, they inherit all attributes of a city object, in particular a name (gml:name) and an ExternalReference to a corresponding object in an external information system, which may contain botanical information from public environmental agencies (see chapter 6.7).</p>
</div>
<div id="figure-64" class="imageblock">
<div class="content">
<img src="figures/Figure_64.png" alt="Figure 64">
</div>
<div class="title">Figure 62. UML diagram of vegetation objects in CityGML. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML Vegetation module.</div>
</div>
<div class="paragraph">
<p>The geometry of a SolitaryVegetationObject may be defined in LOD 1-4 explicitly by a GML geometry having absolute coordinates, or prototypically by an ImplicitGeometry (cf. chapter 8.2). Solitary vegetation objects probably are one of the most important features where implicit geometries are appropriate, since the shape of most types of vegetation objects, such as trees of the same species, can be treated as identical in most cases. Furthermore, season dependent appearances may by mapped using ImplicitGeometry. For visualisation purposes, only the content of the library object defining the object’s shape and appearance has to be swapped (cf. Fig. 65).</p>
</div>
<div id="figure-65" class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_65_a.jpg" alt="Figure 65 a">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/inwork/Figure_65_b.jpg" alt="Figure 65 b">
</div>
<div class="title">Figure 63. Visualisation of a vegetation object in different seasons (source: District of Recklinghausen).</div>
</div>
<div class="paragraph">
<p>A SolitaryVegetationObject or a PlantCover may have a different geometry in each LOD. Whereas a SolitaryVegetationObject is associated with the gml:_Geometry class representing an arbitrary GML geometry (by the relation lodXGeometry, X  [1..4]), a PlantCover is restricted to be either a gml:MultiSolid or a gml:MultiSurface. An example of a PlantCover modelled as gml:MultiSolid is a ‘solid forest model’, see Fig. 66.</p>
</div>
<div id="figure-66" class="imageblock">
<div class="content">
<img src="figures/Figure_66.png" alt="Figure 66">
</div>
<div class="title">Figure 64. Example for the visualisation/modelling of a solid forest (source: District of Recklinghausen).</div>
</div>
<div class="paragraph">
<p><strong>XML namespace</strong></p>
</div>
<div class="paragraph">
<p>The XML namespace of the CityGML Vegetation module is identified by the Uniform Resource Identifier (URI) <a href="http://www.opengis.net/citygml/vegetation/2.0" class="bare">http://www.opengis.net/citygml/vegetation/2.0</a>. Within the XML Schema definition of the Vegetation module, this URI is also used to identify the default namespace.</p>
</div>
<div class="sect3">
<h4 id="_vegetation_object"><a class="anchor" href="#_vegetation_object"></a>5.16.1. Vegetation Object</h4>
<div class="sect4">
<h5 id="_abstractvegetationobjecttype_vegetationobject"><a class="anchor" href="#_abstractvegetationobjecttype_vegetationobject"></a>AbstractVegetationObjectType, _VegetationObject</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractVegetationObjectType, _VegetationObject UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_solitary_vegetation_objects"><a class="anchor" href="#_solitary_vegetation_objects"></a>5.16.2. Solitary Vegetation Objects</h4>
<div class="sect4">
<h5 id="_solitaryvegetationobjecttype_solitaryvegetationobject"><a class="anchor" href="#_solitaryvegetationobjecttype_solitaryvegetationobject"></a>SolitaryVegetationObjectType, SolitaryVegetationObject</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert SolitaryVegetationObjectType, SolitaryVegetationObject UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_plant_cover_objects"><a class="anchor" href="#_plant_cover_objects"></a>5.16.3. Plant cover objects</h4>
<div class="sect4">
<h5 id="_plantcovertype_plantcover"><a class="anchor" href="#_plantcovertype_plantcover"></a>PlantCoverType, PlantCover</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert PlantCoverType, PlantCover UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_code_lists_7"><a class="anchor" href="#_code_lists_7"></a>5.16.4. Code lists</h4>
<div class="paragraph">
<p>The attributes class, function, and usage of the features PlantCover and SolitaryVegetationObject as well as the attribute species of the feature SolitaryVegetationObject are specified as gml:CodeType. The values of these properties can be enumerated in code lists. Proposals for corresponding code lists can be found in annex C.7.</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_citygml_dataset_2"><a class="anchor" href="#_example_citygml_dataset_2"></a>5.16.5. Example CityGML dataset</h4>
<div class="paragraph">
<p>The following two excerpts of a CityGML dataset contain a solitary tree (SolitaryVegetationObject) and a plant community (PlantCover). The solitary tree has the attributes: class = 1070 (deciduous tree), species = 1040 (Fagus/beech), height = 8 m, trunkDiameter = 0.7 m, crownDiameter = 8.0 m. The plant community has the attributes: class =1180 (isoeto-nanojuncetea), averageHeight = 0.5 m. The attribute values of the class and species attributes are taken from code lists proposed by the SIG 3D which are presented in annex C.7.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
include examples, GML or other?
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_versioning_section"><a class="anchor" href="#ug_model_versioning_section"></a>5.17. Versioning</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
text needed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ug_model_waterbody_section"><a class="anchor" href="#ug_model_waterbody_section"></a>5.18. Waterbodies</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Waters have always played an important role in urbanisation processes and cities were built preferably at rivers and places where landfall seemed to be easy. Obviously, water is essential for human alimentation and sanita-tion. Water bodies present the most economical way of transportation and are barriers at the same time, that avoid instant access to other locations. Bridging waterways caused the first efforts of construction and resulted in high-tech bridges of today. The landscapes of many cities are dominated by water, which directly relates to 3D city models. Furthermore, water bodies are important for urban life as subject of recreation and possible hazards as e.g. floods.</p>
</div>
<div class="paragraph">
<p>The distinct character of water bodies compared with the permanence of buildings, roadways, and terrain is considered in this thematic model. Water bodies are dynamic surfaces. Tides occur regularly, but irregular events predominate with respect to natural forces, for example flood events. The visible water surface changes in height and its covered area with the necessity to model its semantics and geometry distinct from adjacent objects like terrain or buildings.</p>
</div>
<div class="paragraph">
<p>This first modelling approach of water bodies fulfils the requirements of 3D city models. It does not inherit any hydrological or other dynamic aspects. In these terms it does not claim to be complete. However, the semantic and geometric description given here allows further enhancements of dynamics and conceptually different descriptions. The water bodies model of CityGML is embraced by the extension module WaterBody (cf. chapter 7).</p>
</div>
<div class="paragraph">
<p>The water bodies model represents the thematic aspects and three-dimensional geometry of rivers, canals, lakes, and basins. In the LOD 2-4 water bodies are bounded by distinct thematic surfaces. These surfaces are the obligatory WaterSurface, defined as the boundary between water and air, the optional WaterGroundSurface, defined as the boundary between water and underground (e.g. DTM or floor of a 3D basin object), and zero or more WaterClosureSurfaces, defined as virtual boundaries between different water bodies or between water and the end of a modelled region (see Fig. 55). A dynamic element may be the WaterSurface to represent temporarily changing situations of tidal flats.</p>
</div>
<div id="figure-55" class="imageblock">
<div class="content">
<img src="figures/Figure_55.png" alt="Figure 55">
</div>
<div class="title">Figure 65. Illustration of a water body defined in CityGML (graphic: IGG Uni Bonn).</div>
</div>
<div class="paragraph">
<p>The UML diagram of the water body model is depicted in Fig. 56, for the XML schema definition see below and annex A.13. Each WaterBody object may have the attributes class, function and usage whose possible values can be enumerated in code lists (cf. chapter 10.6.3 and annex C.9). The attribute class defines the classification of the object, e.g. lake, river, or fountain and can occur only once. The attribute function contains the purpose of the object like, for example national waterway or public swimming, while the attribute usage defines the actual usages, e.g. whether the water body is navigable. The latter two attributes can occur multiple times.</p>
</div>
<div class="paragraph">
<p>WaterBody is a subclass of _WaterObject and transitively of the root class _CityObject. The class _WaterObject may be differentiated in further subclasses of water objects in the future. The geometrical representation of the WaterBody varies through the different levels of detail. Since WaterBody is a subclass of _CityObject and hence a feature, it inherits the attribute gml:name. The WaterBody can be differentiated semantically by the class _WaterBoundarySurface. A _WaterBoundarySurface is a part of the water body’s exterior shell with a special function like WaterSurface, WaterGroundSurface or WaterClosureSurface. As with any _CityObject, WaterBody objects as well as WaterSurface, WaterGroundSurface, and WaterClosureSurface may be assigned ExternalRef-erences (cf. chapter 6.7) and may be augmented by generic attributes using CityGML’s Generics module (cf. chapter 10.12).</p>
</div>
<div class="paragraph">
<p>The optional attribute waterLevel of a WaterSurface can be used to describe the water level, for which the given 3D surface geometry was acquired. This is especially important when the water body is influenced by the tide. The allowed values can be defined in a corresponding code list.</p>
</div>
<div id="figure-56" class="imageblock">
<div class="content">
<img src="figures/Figure_56.png" alt="Figure 56">
</div>
<div class="title">Figure 66. UML diagram of the water body model in CityGML. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML WaterBody module.</div>
</div>
<div class="paragraph">
<p>Both LOD0 and LOD1 represent a low level of illustration and high grade of generalisation. Here the rivers are modelled as MultiCurve geometry and brooks are omitted. Seas, oceans and lakes with significant extent are represented as a MultiSurface (Fig. 56). Every WaterBody may be assigned a combination of geometries of different types. Linear water bodies are represented as a network of 3D curves. Each curve is composed of straight line segments, where the line orientation denotes the flow direction (water flows from the first point of a curve, e.g. a gml:LineString, to the last). Areal objects like lakes or seas are represented by 3D surface geome-tries of the water surface.</p>
</div>
<div class="paragraph">
<p>Starting from LOD1 water bodies may also be modelled as water filled volumes represented by Solids. If a water body is represented by a gml:Solid in LOD2 or higher, the surface geometries of the corresponding thematic WaterClosureSurface, WaterGroundSurface, and WaterSurface objects must coincide with the exterior shell of the gml:Solid. This can be ensured, if for each LOD X the respective lodXSolid representation (where X is between 2 and 4) does not redundantly define the geometry, but instead references the corresponding polygons (using GML3’s XLink mechanism) of the lodXSurface elements (where X is between 2 and 4) of Water-ClosureSurface, WaterGroundSurface, and WaterSurface.</p>
</div>
<div class="paragraph">
<p>LOD2 to LOD4 demand a higher grade of detail and therefore any WaterBody can be outlined by thematic surfaces or a solid composed of the surrounding thematic surfaces.
Every object of the class WaterSurface, WaterClosureSurface, and WaterGroundSurface must have at least one associated surface geometry. This means, that every WaterSurface, WaterClosureSurface, and WaterGroundSur-face feature within a CityGML instance document must contain at least one of the following properties: lod2Surface, lod3Surface, lod4Surface.</p>
</div>
<div class="paragraph">
<p>The water body model implicitly includes the concept of TerrainIntersectionCurves (TIC), e.g. to specify the exact intersection of the DTM with the 3D geometry of a WaterBody or to adjust a WaterBody or WaterSurface to the surrounding DTM (see chapter 6.5). The rings defining the WaterSurface polygons implicitly delineate the intersection of the water body with the terrain or basin.</p>
</div>
<div class="sect3">
<h4 id="_water_body"><a class="anchor" href="#_water_body"></a>5.18.1. Water Body</h4>
<div class="sect4">
<h5 id="_abstractwaterobjecttype_waterobject"><a class="anchor" href="#_abstractwaterobjecttype_waterobject"></a>AbstractWaterObjectType, _WaterObject</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractWaterObjectType, _WaterObject UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_waterbodytype_waterbody"><a class="anchor" href="#_waterbodytype_waterbody"></a>WaterBodyType, WaterBody</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert WaterBodyType, WaterBody UML
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_boundary_surfaces_4"><a class="anchor" href="#_boundary_surfaces_4"></a>5.18.2. Boundary surfaces</h4>
<div class="paragraph">
<p>With respect to different functions and characteristics three boundary classes for water are defined to build a solid or composite surface geometry (Fig. 55).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Boundary class “Air to Water”. The WaterSurface is mandatory to the model and usually is registered using photogrammetric analysis or mapping exploration. The representation may vary due to tidal flats or chang-ing water levels, which can be reflected by including different static water surfaces having different wa-terLevels (gml:CodeType), as for example highest flooding event, mean sea level, or minimum water level. This offers the opportunity to describe significant water surfaces due to levels that are important for certain representations e.g. in tidal zones.</p>
</li>
<li>
<p>Boundary class “Water to Ground”. The WaterGroundSurface may be known by sonar exploration or other depth measurements. Also part of the ground surface is the boundary “Water to Construction”. The ground surface might be identical to the underwater terrain model, but also describes the contour to other underwa-ter objects. The usefulness of this concept arises from the existence of water defence constructions like sluices, sills, flood barrage or tidal power stations. The use of WaterGroundSurface as boundary layer to man-made constructions is relevant in urban situations, where such objects may enclose the modeled water body completely, for example fountains and swimming pools. The WaterSurface objects together with the WaterGroundSurface objects enclose the WaterBody as a volume.</p>
</li>
<li>
<p>Boundary class “Water to Water”. The WaterClosureSurface is an optional feature that comes in use when the union of the WaterSurfaces and WaterGroundSurfaces of a water body does not define a closed volume. The WaterClosureSurface is then used to complete the enclosure of water volumes and to separate water volumes from those where only the surface is known. This might occur, where the cross section and ground surface of rivers is partly available during its course.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>_WaterBoundarySurfaces should only be included as parts of corresponding WaterBody objects and should not be used as stand-alone objects within a CityGML model.</p>
</div>
<div class="sect4">
<h5 id="_abstractwaterboundarysurfacetype_waterboundarysurface"><a class="anchor" href="#_abstractwaterboundarysurfacetype_waterboundarysurface"></a>AbstractWaterBoundarySurfaceType, _WaterBoundarySurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert AbstractWaterBoundarySurfaceType, _WaterBoundarySurface UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_watersurfacetype_watersurface"><a class="anchor" href="#_watersurfacetype_watersurface"></a>WaterSurfaceType, WaterSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert WaterSurfaceType, WaterSurface UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_watergroundsurfacetype_watergroundsurface"><a class="anchor" href="#_watergroundsurfacetype_watergroundsurface"></a>WaterGroundSurfaceType, WaterGroundSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert WaterGroundSurfaceType, WaterGroundSurface UML
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_waterclosuresurfacetype_waterclosuresurface"><a class="anchor" href="#_waterclosuresurfacetype_waterclosuresurface"></a>WaterClosureSurfaceType, WaterClosureSurface</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert WaterClosureSurfaceType, WaterClosureSurface UML
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_model-extension"><a class="anchor" href="#ug_model-extension"></a>5.19. Extensions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>CityGML has been designed as an application independent information model and exchange format for 3D city and landscape models. However, specific applications typically have additional information needs to be mod-elled and exchanged. In general, there are two different approaches to combine city model data and application data:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Embed the CityGML objects into a (larger) application framework and establish the connection be-tween application data and CityGML data within the application framework. For example, CityGML data fragments may be embedded into the application’s XML data files or stored as attributes of appli-cation objects according to the application’s data model.</p>
</li>
<li>
<p>Incorporate application specific information into the CityGML instance documents. This approach is especially feasible, if the application specific information follows essentially the same structure as de-fined by the CityGML schema. This is the case, if the application data could be represented by addi-tional attributes of CityGML objects and only some new feature types would have to be defined.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the following, we will focus on the second option, as only this approach lies within the scope of this specifica-tion. Generic attributes and objects have already been introduced as a first possibility to support the exchange of application specific data (see section 10.12). Whereas they allow to extend CityGML without changing its XML schema definition, this flexibility has some disadvantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Generic attributes and objects may occur arbitrarily in the CityGML instance documents, but there is no formal specification of the names, datatypes, and multiplicities. Thus, there is no guarantee for an appli-cation that a specific instance of a generic attribute is included a minimum or maximum number of times per CityGML feature. Unlike the predefined CityGML objects, the concrete layout and occur-rence of generic objects and attributes cannot be validated by an XML parser. This may reduce seman-tic interoperability.</p>
</li>
<li>
<p>Naming conflicts of generic attributes or objects can occur, if the CityGML instance documents should be augmented by specific information from different applications simultaneously.</p>
</li>
<li>
<p>There is only a limited number of predefined data types that can be used for generic attributes. Also the structure of generic objects might not be appropriate to represent more complex objects.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If application specific information are well-structured, it is desirable to represent them in a systematic way, i. e. by the definition of an extra formal schema based on the CityGML schema definitions. Such an XML schema is called a CityGML Application Domain Extension (ADE). It allows to validate instance documents both against the extended CityGML and the ADE schema and therefore helps to maintain semantic and syntactic interopera-bility between different systems working in the same application field. In order to prevent naming conflicts, every ADE has to be defined within its own namespace which must differ from the namespaces associated with the CityGML modules. An ADE schema may extend one or more CityGML module schemas. The relevant CityGML module schemas have to be imported by the ADE schema.</p>
</div>
<div class="paragraph">
<p>The ADE concept defines a special way of extending existing CityGML feature types which allows to use different ADEs within the same instance document simultaneously (see below). For example, the specification of ADEs can be useful in the following application fields: cultural heritage (extension of abstract class _CityObject e.g. by time period information and monument protection status); representation of subsurface objects (tunnel, underpass) or city lighting (light sources like street lamps and house lights); real estate management (economic parameters of the CityGML features; inclusion of attributes defined for real estate assets as defined by OSCRE); utility networks (as topographic features); additional building properties as defined by the U.S. national building information model standard (NBIMS).</p>
</div>
<div class="sect3">
<h4 id="_technical_principle_of_ades"><a class="anchor" href="#_technical_principle_of_ades"></a>5.19.1. Technical principle of ADEs</h4>
<div class="paragraph">
<p>Each ADE is specified by its own XML schema file. The target namespace is provided by the information community who specifies the CityGML ADE. This is typically not the OGC or the SIG 3D. The namespace should be in the control of this information community and must be given as a previously unused and globally unique URI. This URI will be used in CityGML ADE instance documents to distinguish extensions from CityGML base elements. As the URI refers to the information community it also denotes the originator of the employed ADE.</p>
</div>
<div class="paragraph">
<p>The ADE’s XML schema file must be available (or accessible on the Internet) to everybody creating and parsing CityGML instance documents including these ADE specific augmentations.</p>
</div>
<div class="paragraph">
<p>An ADE XML schema can define various extensions to CityGML. However, all extensions shall belong to one of the two following categories:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>New feature types are defined within the ADE namespace and are based on CityGML abstract or con-crete classes. In general, this mechanism follows the same principles as the definition of application schemas for GML. This means, that new feature types have to be derived from existing (here: CityGML) feature types. For example, new feature types could be defined by classes derived from the abstract classes like _CityObject or _AbstractBuilding or the concrete class CityFurniture. The new fea-ture types then automatically inherit all properties (i.e. attributes) and associations (i.e. relations) from the respective CityGML superclasses.</p>
</li>
<li>
<p>Existing CityGML feature types are extended by application specific properties (in the ADE namespace). These properties may have simple or complex data types. Also geometries or embedded features (feature properties) are possible. The latter can also be used to model relations to other features.<br>
&#160;<br>
In this case, extension of the CityGML feature type is not being realised by the inheritance mechanism of XML schema. Instead, every CityGML feature type provides a “hook” in its XML schema definition, that allows to attach additional properties to it by ADEs. This “hook” is implemented as a GML proper-ty of the form “_GenericApplicationPropertyOf&lt;Featuretypename&gt;” where &lt;Featuretypename&gt; is equal to the name of the feature type definition in which it is included. The datatype for these kinds of properties is always “xsd:anyType” from the XSD namespace. The minimum occurrence of the “_GenericApplicationPropertyOf&lt;Featuretypename&gt;” is 0 and the maximum occurrence unbounded. This means, that the CityGML schema allows that every CityGML feature may have an arbitrary num-ber of additional properties with arbitrary XML content with the name “_GenericApplication-PropertyOf&lt;Featuretypename&gt;”. For example, the last property in the definition of the CityGML fea-ture type LandUse is the element _GenericApplicationPropertyOfLandUse (cf. chapter 10.10.1).<br>
&#160;<br>
Such properties are called “hooks” to attach application specific properties, because they are used as the head of a substitution group by ADEs. Whenever an ADE wants to add an extra property to an existing CityGML feature type, it should declare the respective element with the appropriate dataype within the ADE namespace. In the element declaration this element shall be explicitly assigned to the substitution group defined by the corresponding “_GenericApplicationPropertyOf&lt;Featuretypename&gt;” in the cor-responding CityGML module namespace. An example is given in the following subsection.<br>
&#160;<br>
By following this concept, it is possible to specify different ADEs for different information communi-ties. Every ADE may add their specific properties to the same CityGML feature type as they all can be-long to the same substitution group. This allows to have CityGML instance documents where CityGML features contain additional information from different ADEs simultaneously.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Please note that usage of ADEs introduces an extra level of complexity as data files may contain mixed infor-mation (features, properties) from different namespaces, not only from the GML and CityGML module namespaces. However, extended CityGML instance documents are quite easy to handle by applications that are not “schema-aware”, i.e. applications that do not parse and interpret GML application schemas in a generic way. These applications can simply skip anything from a CityGML instance document that is not from a CityGML module or GML namespace. Thus, a building is still represented by the &lt;bldg:Building&gt; element with the standard CityGML properties, but with possibly some extra properties from different namespaces. Also features from a different namespace than those declared by CityGML modules or GML could be skipped (e.g. by a viewer application).</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_ade"><a class="anchor" href="#_example_ade"></a>5.19.2. Example ADE</h4>
<div class="paragraph">
<p>In this section, the ADE mechanism is illustrated by a short example, which deals with the application of virtual 3D city models to generate noise pollution maps. In our example, two extensions of CityGML are required for this task: buildings have to be extended to represent a “noise reflection correction” value and the number of inhabitants. As a new feature type noise barriers have to be defined which also have a “noise reflection correc-tion” value.</p>
</div>
<div class="paragraph">
<p>The XSD schema which has to be defined to implement this model declares a new namespace for the noise extension (<a href="http://www.citygml.org/ade/noise_de/2.0" class="bare">http://www.citygml.org/ade/noise_de/2.0</a>). Additionally, the namespaces of the extended CityGML modules are declared (for corresponding prefixes see chapter 4.3 and chapter 7), and the respective schema definition files are imported. The XML schema adds the elements buildingReflectionCorrection and buildingHabitants, both being members of the substitution group bldg:_GenericApplicationPropertyOf-AbstractBuilding which is defined by the CityGML Building module. Thus, both elements may be used as child elements of CityGML building features. Noise barriers are represented as NoiseCityFurnitureSegment elements. The corresponding type NoiseCityFurnitureSegmentType is defined as subtype of the CityGML abstract type core:AbstractCityObjectType provided by the CityGML Core module, applying the usual subtyping mechanism of XML and XSD. A further element noiseCityFurnitureSegmentProperty is added as a member of the substitu-tion group frn:_GenericApplicationPropertyOfCityFurniture. By this means, noise barriers may be modelled as child elements of CityGML city furniture objects.</p>
</div>
<div class="paragraph">
<p>The XSD file for this example CityGML Noise ADE is given by the following excerpt (the complete CityGML Noise ADE is given in Annex H):</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert example here (GML?)
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An example for a feature collection in a corresponding instance document is depicted below. Two CityGML buildings contain application specific properties distinguished from CityGML properties by the namespace prefix noise. The other properties, function and geometry, are defined by corresponding CityGML modules. In addition to the buildings, a noise barrier as child of a city furniture element is included in the feature collection. Please note, that the order of the child elements in the sequence is not arbitrary: the child elements defined by an ADE subschema have to occur after the child elements defined by CityGML modules. There is, however, no specific order of the ADE properties.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
insert example here (GML?)
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_codelists_section"><a class="anchor" href="#ug_codelists_section"></a>5.20. Code Lists</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>CityGML feature types often include attributes whose values can be enumerated in a list of discrete values. An example is the attribute roof type of a building, whose attribute values typically are saddle back roof, hip roof, semi-hip roof, flat roof, pent roof, or tent roof. If such an attribute is typed as string, misspellings or different names for the same notion obstruct interoperability.</p>
</div>
<div class="paragraph">
<p>If the list of values is fixed, the allowed attribute values are specified in and enforced by the CityGML schema using an enumeration as attribute type. Attributes of an enumerated type may only take values from the prede-fined list. Examples for such attributes are relativeToTerrain and relativeToWater of the abstract base class core:_CityObject (CityGML Core module, cf. chapter 10.1) as well as wrapMode of the abstract class app:_Texture (Appearance module, cf. chapter 9.4).</p>
</div>
<div class="paragraph">
<p>In case a fixed enumeration of possible attribute values is not suitable, the attribute type is specified as gml:CodeType and the allowed attribute values can be provided in a code list which is specified outside the CityGML schema. Examples for such attributes are class, function, and usage which are available for almost all CityGML feature types. A code list contains coded attribute values which hinder misspellings and ensure that the same code is used for the same notion or concept. If a code list is provided for an attribute of type gml:CodeType, then any conformant attribute shall only take values from the given code list. This allows appli-cations to validate the attribute values and thus facilitates semantic and syntactic interoperability. The optional codeSpace attribute declared for gml:CodeType is used to associate an attribute with a code list. If a codeSpace is present, then its value shall be a persistent URI identifying the code list. If no codeSpace is given, then the attribute value can only be interpreted as a simple text token and validation requires additional knowledge.</p>
</div>
<div class="paragraph">
<p>The governance of code lists is decoupled from the governance of the CityGML schema and specification. Accordingly, code lists can be specified by any organisation or information community according to their infor-mation needs. There shall be one authority per codeSpace and hence per code list who is in charge of the con-tents and the maintenance of the code list. As a result, the code list values are managed outside the CityGML schema. Thus, in contrast to a fixed enumeration enforced by the CityGML schema, changes to a code list do not require a revision of the CityGML schema and specification.</p>
</div>
<div class="paragraph">
<p>The contents of code lists may substantially vary for different countries (e.g., due to national law or regulations) and for different information communities. For this reason, this International standard does not specify norma-tive code lists for any of the attributes of type gml:CodeType. However, Annex C provides non-normative code lists for selected attributes which are proposed and maintained by the SIG 3D. These code lists can be directly referenced in CityGML instance documents and serve as an example for the definition of code lists. The code lists given in Annex C comprise the non-normative code lists which are included in the previous version 1.0 of this International standard in order to ensure backwards compatibility.</p>
</div>
<div class="paragraph">
<p>It is recommended that code lists are implemented as simple dictionaries following the GML 3.1.1 Simple Dictionary Profile (cf. Whiteside 2005). An example for a code list implemented as simple dictionary is given below. It shows an excerpt of the code list proposed by the SIG 3D for the attribute roofType of the class _AbstractBuilding (Building module, cf. chapter 10.3).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Issue - should we use GML in the examples?
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="XML">&lt;gml:Dictionary xmlns:gml="http://www.opengis.net/gml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/SimpleDictionary/1.0.0/gmlSimpleDictionaryProfile.xsd" gml:id="roofType"&gt;
  &lt;gml:name&gt;roofType&lt;/gml:name&gt;
  &lt;gml:dictionaryEntry&gt;
    &lt;gml:Definition gml:id="id357"&gt;
      &lt;gml:description&gt;flat roof&lt;/gml:description&gt;
      &lt;gml:name&gt;1000&lt;/gml:name&gt;
    &lt;/gml:Definition&gt;
  &lt;/gml:dictionaryEntry&gt;
  &lt;gml:dictionaryEntry&gt;
    &lt;gml:Definition gml:id="id358"&gt;
      &lt;gml:description&gt;monopitch roof&lt;/gml:description&gt;
      &lt;gml:name&gt;1010&lt;/gml:name&gt;
    &lt;/gml:Definition&gt;
  &lt;/gml:dictionaryEntry&gt;
  …
&lt;/gml:Dictionary&gt;</code></pre>
</div>
</div>
<div id="listing-2" class="paragraph">
<div class="title">Example of a code list implemented as simple dictionary following the GML 3.1.1 Simple Dictionary Profile.</div>
<p>In the simple dictionary concept, the code list itself is represented by a gml:Dictionary element. The allowed attribute values are listed as gml:Definition entries contained in the gml:Dictionary. For each definition entry, the coded attribute value is specified by the gml:name subelement. Any attribute referencing this code list in a CityGML instance document may only take values which are specified by a gml:name element of one of the definition entries. If the attribute value is not specified by one of the definition entries, then the attribute value is invalid. The gml:description subelement of a definition entry provides an additional textual description for the coded attribute value. This description can be used, for example, as human readable substitute for the coded attribute value.</p>
</div>
<div class="paragraph">
<p>The following excerpt of a CityGML instance document illustrates the usage of the code list mechanism. The document contains a bldg:Building object whose roofType value is taken from the code list shown in Listing 2. The codeSpace attribute of the roofType element identifies the code list through the globally unique URL <a href="http://www.sig3d.org/codelists/standard/building/2.0/_AbstractBuilding_roofType.xml" class="bare">http://www.sig3d.org/codelists/standard/building/2.0/_AbstractBuilding_roofType.xml</a> which is managed and maintained by the SIG 3D. According to this code list, the coded attribute value 1000 denotes a flat roof for this building.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="XML">&lt;bldg:Building&gt;
  &lt;bldg:roofType
      codeSpace="http://www.sig3d.org/codelists/standard/building/2.0/_AbstractBuilding_roofType.xml"&gt;1000&lt;/bldg:roofType&gt;
  …
&lt;/bldg:Building&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ug_metadata_section"><a class="anchor" href="#ug_metadata_section"></a>5.21. Metadata</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Contributors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following text needs to be reviewed and updated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>CityGML version 2.0 provided an explicit element that implementors could use to insert metadata. This element was inherited from the GML classes upon which version 2.0 was based. Version 3.0 of CityGML is no longer based on GML. It does not explicitly support that element. The result is that version 3.0 of the CityGML Conceptual Model is agnostic of metadata.</p>
</div>
<div class="paragraph">
<p>That does not mean that metadata cannot be supported. The CityGML <a href="#ug-extensions_section">extension mechanisms</a>, specifically ADEs and Generics, can be used for metadata elements. An advantage to this approach is that metadata can be added where it is needed. It provides a degree of flexibility which is absent the dedicated element approach.</p>
</div>
<div class="paragraph">
<p>Another alternative is to insert metadata elements through the Implementation Specification. For example, an Implementation Specification which builds on GML would inherit the same metadata element as CityGML 2.0.</p>
</div>
<div class="paragraph">
<p>The CityGML Standards Working Group will continue the metadata discussion. Additional metadata-related requirements may be added to future versions of this Standard as they are identified and validated.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_revision_history"><a class="anchor" href="#_revision_history"></a>Annex A: Revision History</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Date</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Release</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Editor</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Primary clauses modified</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2016-04-28</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">0.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">G. Editor</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">all</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">initial version</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="Bibliography"><a class="anchor" href="#Bibliography"></a>Annex B: Bibliography</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">Example Bibliography (Delete this note).</div>
<div class="paragraph">
<p>The TC has approved Springer LNCS as the official document citation type.</p>
</div>
<div class="paragraph">
<p>Springer LNCS is widely used in technical and computer science journals and other publications</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For citations in the text please use square brackets and consecutive numbers: [1], [2], [3]</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>– Actual References:</p>
</div>
<div class="paragraph">
<p>[n] Journal: Author Surname, A.: Title. Publication Title. Volume number, Issue number, Pages Used (Year Published)</p>
</div>
<div class="paragraph">
<p>[n] Web: Author Surname, A.: Title, <a href="http://Website-Url" class="bare">http://Website-Url</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div id="OGC2015" class="paragraph">
<p>[1] OGC: OGC Testbed 12 Annex B: Architecture. (2015).</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-12-11 16:39:04 UTC
</div>
</div>
</body>
</html>
:sectnums:

[[rc_core_section]]
=== Core

include::requirements/requirements_class_core.adoc[]

The Core module defines the basic concepts and components of city models. This rather large body of work has been divided into five sections. These sections build on each other from the fundamental principles specified by the ISO up through the full CityGML model. These sections are summarized in the <<citygml-core-table>> table.   

[[citygml-core-table]]
.CityGML Core Sections
[width="90%",cols="2.^,6.^"]
|===
|<<ISO-dependencies-section,The Use of ISO Standards>> |Describes the use of ISO 191** standards to provide a foundation to the CityGML model. 
|<<space-concepts-section,Space Concepts>>|Defines the concepts of space as used in the CityGML model
|<<geometry-lod-section,Geometry and LOD>>|Defines the geometry and Level Of Detail concepts
|<<CityGML-section,CityGML>>|The core elemtents of the model. where it all comes together
|<<b-e-c-section,Basic Types, Enumerations and Codelist>> |Defines the little things which make this model work.
|===

==== Requirements

include::requirements/Core/REQ_Core_Classes.adoc[]

[[ISO-dependencies-section]]
==== ISO Dependencies

CityGML builds on the ISO 191** family of standards. The applicable standards are identified in the <<ISO-in-CityGML-diagram>> diagram. Data dictionaries are included for all of the ISO-defined classes explicitly referenced in the CityGML UML model. These data dictionaries are provided for the convinence of the user. The ISO standards are the normative source.  

[[ISO-in-CityGML-diagram]]
.Use of ISO Standards in CityGML
image::figures/Core/ISO_and_OGC_standards_in_CityGML.png[]

The ISO classes explicitly used in the CityGML UML model are introduced in the <<iso-class-table>> table. More detail about these classes can be found in the <<data-dictionaries-section,Data Dictionaries>> section. 

[[iso-class-table]]
.ISO Classes used in CityGML
[cols="2,6",options="headers"]
|===
^|*Class Name* ^|*Description*
|<<AnyFeature-section,AnyFeature>> |A generalization of all feature types 
|<<CV_DiscreteGridPointCoverage-section,CV_DiscreteGridPointCoverage>> |undefined
|<<GM_Object-section,GM_Object>> | root class of the geometric object taxonomy.
|<<GM_MultiCurve-section,GM_MultiCurve>> |undefined.
|<<GM_MultiSurface-section,GM_MultiSurface>> |undefined.
|<<GM_Point-section,GM_Point>> |The basic data type for a geometric object consisting of one and only one point.
|<<GM_Solid-section,GM_Solid>> |The basis for 3-dimensional geometry. The extent of a solid is defined by the boundary surfaces.
|<<GM_Surface-section,GM_Surface>> |The basis for 2-dimensional geometry.
|<<GM_Tin-section,GM_Tin>> |A GM_TriangulatedSurface which uses the Delaunay or similar algorithm.
|<<GM_TriangulatedSurface-section,GM_TriangulatedSurface>> |A GM_PolyhedralSurface that is composed only of triangles
|<<SC_CRS-section,SC_CRS>> |Coordinate reference system which is usually single but may be compound.
|===

[[space-concepts-section,Space Concepts]]
==== Spatial Concepts

All city objects are differentiated into spaces and space boundaries. Spaces are entities of volumetric extent in the real world. Buildings, water bodies, trees, rooms, and traffic spaces, for instance, have a volumetric extent. Spaces can be classified into physical spaces and logical spaces. Physical spaces, in turn, can be further classified into occupied spaces and unoccupied spaces.

Space boundaries, in contrast, are entities with a real extent in the real world. Space boundaries can be differentiated into different types of thematic surfaces, such as wall surfaces and roof surfaces.

.UML Space Concepts
image::figures/Core/Core-Space_concepts.png[]

The Space Concept classes defined in the CityGML UML model are introduced in the <<space-concepts-class-table>> table. More detail about these classes can be found in the <<data-dictionaries-section,Data Dictionaries>> section. 

[[space-concepts-class-table]]
.Space Concept Classes used in CityGML
[cols="2,6",options="headers"]
|===
^|*Class Name* ^|*Description*
|<<AbstractCityObject-section,AbstractCityObject>> |AbstractCityObject is the abstract superclass of all thematic classes within the CityGML data model.
|<<AbstractFeatureWithLifespan-section,AbstractFeatureWithLifespan>> |AbstractFeatureWithLifespan is the base class for all CityGML features. It allows the optional specification of the real-world and database times for the existence of each feature.
|<<AbstractLogicalSpace-section,AbstractLogicalSpace>> |AbstractLogicalSpace is the abstract superclass for all types of logical spaces. Logical space refers to spaces that are not bounded by physical surfaces but are defined according to thematic considerations.
|<<AbstractOccupiedSpace-section,AbstractOccupiedSpace>> |AbstractOccupiedSpace is the abstract superclass for all types of physically occupied spaces. Occupied space refers to spaces that are partially or entirely filled with matter.
|<<AbstractPhysicalSpace-section,AbstractPhysicalSpace>> |AbstractPhysicalSpace is the abstract superclass for all types of physical spaces. Physical space refers to spaces that are fully or partially bounded by physical objects.
|<<AbstractSpace-section,AbstractSpace>> |AbstractSpace is the abstract superclass for all types of spaces. A space is an entity of volumetric extent in the real world.
|<<AbstractSpaceBoundary-section,AbstractSpaceBoundary>> |AbstractSpaceBoundary is the abstract superclass for all types of space boundaries. A space boundary is an entity with areal extent in the real world. Space boundaries are objects that bound a Space. They also realize the contact between adjacent spaces.
|<<AbstractThematicSurface-section,AbstractThematicSurface>> |AbstractThematicSurface is the abstract superclass for all types of thematic surfaces.
|<<AbstractUnoccupiedSpace-section,AbstractUnoccupiedSpace>> |AbstractUnoccupiedSpace is the abstract superclass for all types of physically unoccupied spaces. Unoccupied space refers to spaces that are entirely or mostly free of matter.
|<<CityModel-section,CityModel>> |CityModel is the container for all objects belonging to a city model.
|<<ClosureSurface-section,ClosureSurface>> |ClosureSurface is a special type of thematic surface used to close holes in volumetric objects. Closure surfaces are virtual (non-physical) surfaces.
|===

[[geometry-lod-section]]
==== Geometry and LOD

Spaces and space boundaries can have various geometry representations depending on the Level of Detail (LOD). Spaces can be spatially represented as single points in LOD0, multi-surfaces in LOD0/2/3, solids in LOD1/2/3, and multi-curves in LOD2/3. Space boundaries can be represented as multi-surfaces in LOD0/2/3 and as multi-curves in LOD2/3. All Levels of Detail allow for the representation of the interior of city objects. 

In addition, the geometry can also be represented implicitly, i.e. the shape is stored only once as a prototypical geometry, which then is re-used or referenced, wherever the corresponding feature occurs in the 3D city model.

The thematic classes, such as building, tunnel, road, land use, water body, or city furniture are defined as subclasses of the space and space boundary classes within the thematic modules. Since all city objects in the thematic modules represent subclasses of the space and space boundary classes, they automatically inherit the geometries defined in the Core module.

.UML Geometry and LoD Concepts
image::figures/Core/Core-Geometry_and_LoD_concept.png[]

The Geometry and LOD Concept classes defined in the CityGML UML model are introduced in the <<geometry-lod-class-table>> table. More detail about these classes can be found in the <<data-dictionaries-section,Data Dictionaries>> section.

Of particular note is the Implicit Geometry concept. Many of the objects encountered in a city landscape have the same geometry. How many types of street lamps can there be? An Implicit Geometry captures that geometry once, and re-uses that one geometry for all similar street lamp objects. 

[[geometry-lod-class-table]]
.Geometry and LOD Classes used in CityGML
[cols="2,6",options="headers"]
|===
^|*Class Name* ^|*Description*
|<<AbstractOccupiedSpace-section,AbstractOccupiedSpace>> |AbstractOccupiedSpace is the abstract superclass for all types of physically occupied spaces. Occupied space refers to spaces that are partially or entirely filled with matter.
|<<AbstractPhysicalSpace-section,AbstractPhysicalSpace>> |AbstractPhysicalSpace is the abstract superclass for all types of physical spaces. Physical space refers to spaces that are fully or partially bounded by physical objects.
|<<AbstractPointCloud-section,AbstractPointCloud>> |AbstractPointCloud is the abstract superclass to represent PointCloud objects.
|<<AbstractSpace-section,AbstractSpace>> |AbstractSpace is the abstract superclass for all types of spaces. A space is an entity of volumetric extent in the real world.
|<<AbstractThematicSurface-section,AbstractThematicSurface>> |AbstractThematicSurface is the abstract superclass for all types of thematic surfaces.
|<<ImplicitGeometry-section,ImplicitGeometry>> |ImplicitGeometry is a geometry representation where the shape is stored only once as a prototypical geometry, for example a tree or other vegetation object, a traffic light or a traffic sign. This prototypic geometry object can be re-used or referenced many times, wherever the corresponding feature occurs in the 3D city model.
|===

[[CityGML-section]]
==== CityGML

City models are virtual representations of real-world cities and landscapes. A city model aggregates different types of objects, which can be city objects, appearances, different versions of the city model, transitions between different versions of the city model, and feature objects. All objects defined in CityGML are features with lifespan. This allows the optional specification of the real-world and database times for the existence of each feature, as is required by the Versioning module (cf. Section <<rc_versioning_section,  Versioning>>). Features that define thematic concepts related to cities and landscapes, such as building, bridge, water body, or land use, are referred to as city objects.

The UML diagram of the Core module is depicted in the <<core-uml,Core UML Diagram>>. 

[[core-uml]]
.UML diagram of CityGML’s core module.
image::figures/Core/Core-Overview.png[]

The Geometry and LOD Concept classes defined in the CityGML UML model are introduced in the <<core-classes-table>> table. More detail about these classes can be found in the <<data-dictionaries-section,Data Dictionaries>> section. 

include::summaries/Core.adoc[]

[[core-classes-table]]
.Core Classes used in CityGML
[cols="2,6",options="headers"]
|===
^|*Class Name* ^|*Description*
|<<AbstractAppearance-section,AbstractAppearance>> |AbstractAppearance is the abstract superclass to represent any kind of appearance objects.
|<<AbstractCityObject-section,AbstractCityObject>> |AbstractCityObject is the abstract superclass of all thematic classes within the CityGML data model.
|<<AbstractDynamizer-section,AbstractDynamizer>> |AbstractDynamizer is the abstract superclass to represent Dynamizer objects.
|<<AbstractFeature-section,AbstractFeature>> |AbstractFeature is the abstract superclass of all feature types within the CityGML data model.
|<<AbstractFeatureWithLifespan-section,AbstractFeatureWithLifespan>> |AbstractFeatureWithLifespan is the base class for all CityGML features. It allows the optional specification of the real-world and database times for the existence of each feature.
|<<AbstractLogicalSpace-section,AbstractLogicalSpace>> |AbstractLogicalSpace is the abstract superclass for all types of logical spaces. Logical space refers to spaces that are not bounded by physical surfaces but are defined according to thematic considerations.
|<<AbstractOccupiedSpace-section,AbstractOccupiedSpace>> |AbstractOccupiedSpace is the abstract superclass for all types of physically occupied spaces. Occupied space refers to spaces that are partially or entirely filled with matter.
|<<AbstractPhysicalSpace-section,AbstractPhysicalSpace>> |AbstractPhysicalSpace is the abstract superclass for all types of physical spaces. Physical space refers to spaces that are fully or partially bounded by physical objects.
|<<AbstractPointCloud-section,AbstractPointCloud>> |AbstractPointCloud is the abstract superclass to represent PointCloud objects.
|<<AbstractSpace-section,AbstractSpace>> |AbstractSpace is the abstract superclass for all types of spaces. A space is an entity of volumetric extent in the real world.
|<<AbstractSpaceBoundary-section,AbstractSpaceBoundary>> |AbstractSpaceBoundary is the abstract superclass for all types of space boundaries. A space boundary is an entity with areal extent in the real world. Space boundaries are objects that bound a Space. They also realize the contact between adjacent spaces.
|<<AbstractThematicSurface-section,AbstractThematicSurface>> |AbstractThematicSurface is the abstract superclass for all types of thematic surfaces.
|<<AbstractUnoccupiedSpace-section,AbstractUnoccupiedSpace>> |AbstractUnoccupiedSpace is the abstract superclass for all types of physically unoccupied spaces. Unoccupied space refers to spaces that are entirely or mostly free of matter.
|<<AbstractVersion-section,AbstractVersion>> |AbstractVersion is the abstract superclass to represent Version objects.
|<<AbstractVersionTransition-section,AbstractVersionTransition>> |AbstractVersionTransition is the abstract superclass to represent VersionTransition objects.
|<<Address-section,Address>> |Address represents an address of a city object.
|<<CityModel-section,CityModel>> |CityModel is the container for all objects belonging to a city model.
|<<CityObjectRelation-section,CityObjectRelation>> |CityObjectRelation represents a specific relation from the city object in which it is included to another city object.
|<<ClosureSurface-section,ClosureSurface>> |ClosureSurface is a special type of thematic surface used to close holes in volumetric objects. Closure surfaces are virtual (non-physical) surfaces.
|<<ImplicitGeometry-section,ImplicitGeometry>> |ImplicitGeometry is a geometry representation where the shape is stored only once as a prototypical geometry, for example a tree or other vegetation object, a traffic light or a traffic sign. This prototypic geometry object can be re-used or referenced many times, wherever the corresponding feature occurs in the 3D city model.
|===

[[b-e-c-section]]
==== Basic Types, Enumerations, and CodeLists

.UML Basic Types, Enumerations, and Code Lists
image::figures/Core/Core-Basic_Types_Enumerations_Codelists.png[]

[[enumeration-class-table]]
.Enumeration Classes used in CityGML
[cols="2,6",options="headers"]
|===
^|*Class Name* ^|*Description*
|<<RelativeToTerrain-section,RelativeToTerrain>> |RelativeToTerrain enumerates the spatial relations of a city object relative to terrain in a qualitative way.
|<<RelativeToWater-section,RelativeToWater>> |RelativeToWater enumerates the spatial relations of a city object relative to the water surface in a qualitative way.
|<<SpaceType-section,SpaceType>> |SpaceType is an enumeration that characterises a space according to its closure properties.
|===

[[codelist-class-table]]
.Code List Classes used in CityGML
[cols="2,6",options="headers"]
|===
^|*Class Name* ^|*Description*
|<<IntervalValue-section,IntervalValue>> |IntervalValue is a code list used to specify a time period.
|<<MimeTypeValue-section,MimeTypeValue>> |MimeTypeValue is a code list used to specify the MIME type of a referenced resource.
|<<NilReasonEnumeration-section,NilReasonEnumeration>> |NilReasonEnumeration is a code list that enumerates the different nil reasons.
|<<OccupantTypeValue-section,OccupantTypeValue>> |OccupantTypeValue is a code list used to classify occupants.
|<<OtherRelationTypeValue-section,OtherRelationTypeValue>> |OtherRelationTypeValue is a code list used to classify other types of city object relations.
|<<QualifiedAreaTypeValue-section,QualifiedAreaTypeValue>> |QualifiedAreaTypeValue is a code list used to specify area types.
|<<QualifiedVolumeTypeValue-section,QualifiedVolumeTypeValue>> |QualifiedVolumeTypeValue is a code list used to specify volume types.
|<<RelationTypeValue-section,RelationTypeValue>> |RelationTypeValue is a code list used to classify city object relations.
|<<TemporalRelationTypeValue-section,TemporalRelationTypeValue>> |TemporalRelationTypeValue is a code list used to classify temporal city object relations.
|<<TopologicRelationTypeValue-section,TopologicRelationTypeValue>> |TopologicRelationTypeValue is a code list used to classify topological city object relations.
|===

[[datatype-class-table]]
.Data Type Classes used in CityGML
[cols="2,6",options="headers"]
|===
^|*Class Name* ^|*Description*
|<<AbstractGenericAttribute-section,AbstractGenericAttribute>> |AbstractGenericAttribute is the abstract superclass for all types of generic attributes.
|<<ExternalReference-section,ExternalReference>> |ExternalReference is a reference to a corresponding object in another information system, for example in the German cadastre (ALKIS), the German topographic information system (ATKIS), or the OS UK MasterMap®.
|<<Occupancy-section,Occupancy>> |Occupancy is an application-dependent indication of what is contained by a feature.
|<<QualifiedArea-section,QualifiedArea>> |QualifiedArea is an application-dependent measure of the area of a space or of a thematic surface.
|<<QualifiedVolume-section,QualifiedVolume>> |QualifiedVolume is an application-dependent measure of the volume of a space.
|<<XALAddressDetails-section,XALAddressDetails>> |XALAddressDetails represents address details according to the OASIS xAL standard.
|===

[[union-class-table]]
.Union Classes used in CityGML
[cols="2,6",options="headers"]
|===
^|*Class Name* ^|*Description*
|<<CityModelMember-section,CityModelMember>> |CityModelMember is a union type that enumerates the different types of objects that can occur as members of a city model.
|<<DoubleOrNilReason-section,DoubleOrNilReason>> |DoubleOrNilReason is a union type that allows for choosing between a double value and a nil reason.
|<<NilReason-section,NilReason>> |NilReason is a union type that allows for choosing between two different types of nil reason.
|===

[[basictype-class-table]]
.Basic Type Classes used in CityGML
[cols="2,6",options="headers"]
|===
^|*Class Name* ^|*Description*
|<<DoubleBetween0and1-section,DoubleBetween0and1>> |DoubleBetween0and1 is a basic type for values, which are greater or equal than 0 and less or equal than 1. The type is used for color encoding, for example.
|<<DoubleBetween0and1List-section,DoubleBetween0and1List>> |DoubleBetween0and1List is a basic type that represents a list of double values greater or equal than 0 and less or equal than 1. The type is used for color encoding, for example.
|<<DoubleList-section,DoubleList>> |DoubleList is an ordered sequence of double values.
|<<DoubleOrNilReasonList-section,DoubleOrNilReasonList>> |DoubleOrNilReasonList is a basic type that represents a list of double values and/or nil reasons.
|<<ID-section,ID>> |ID is a basic type that represents a unique identifier.
|<<IntegerBetween0and3-section,IntegerBetween0and3>> |IntegerBetween0and3 is a basic type for integer values, which are greater or equal than 0 and less or equal than 3. The type is used for encoding the LOD number.
|<<MeasureOrNilReasonList-section,MeasureOrNilReasonList>> |MeasureOrNilReasonList is a basic type that represents a list of double values and/or nil reasons together with a unit of measurement.
|<<TransformationMatrix2x2-section,TransformationMatrix2x2>> |TransformationMatrix2x2 is a 2 by 2 matrix represented as a list of four double values in row major order.
|<<TransformationMatrix3x4-section,TransformationMatrix3x4>> |TransformationMatrix3x4 is a 3 by 4 matrix represented as a list of twelve double values in row major order.
|<<TransformationMatrix4x4-section,TransformationMatrix4x4>> |TransformationMatrix4x4 is a 4 by 4 matrix represented as a list of sixteen double values in row major order.
|===

==== Additional Information

A detailed discussion of the CityGML Core can be found in the CityGML Best Practices document https://github.com/opengeospatial/CityGML3-Workspace/blob/master/19-072BP.html#bp_core_section[here].

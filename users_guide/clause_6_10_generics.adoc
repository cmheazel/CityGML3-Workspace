[[ug_model_generics_section]]
=== Generics

|===
^|*Contributors*
|TBD
|===

NOTE: The following text needs to be reviewed and updated.


The concept of generic city objects and attributes allows for the storage and exchange of 3D objects which are not covered by any explicitly modelled thematic class within CityGML or which require attributes not represent-ed in CityGML. These generic extensions to the CityGML data model are realised by the classes GenericCityOb-ject and _genericAttribute defined within the thematic extension module Generics (cf. chapter 7). In order to avoid problems concerning semantic interoperability, generic extensions shall only be used if appropriate the-matic classes or attributes are not provided by any other CityGML module.

<<figure-74,Figure 74>> shows the UML diagram of generic objects and attributes. For XML schema definition see below and annex A.7.

[[figure-74]]
.UML diagram of generic objects and attributes in CityGML. Prefixes are used to indicate XML namespaces associated with model elements. Element names without a prefix are defined within the CityGML Generics module.
image::figures/Figure_74.png[]

Generic attributes are name-value pairs associated with a city object. Each generic attribute has a mandatory name identifier which can be freely chosen. The data type of the attribute value may be String, Integer, Double (floating point number), URI, Date, and gml:MeasureType. The attribute type is defined by the selection of the particular subclass of _genericAttribute, for example stringAttribute, intAttribute, etc. A measureAttribute facilitates the representation of measured values. Its value is of the structured type gml:MeasureType which provides an optional attribute uom (units of measure) of type xs:anyURI that points to a reference system for the amount.

Generic attributes can be grouped under a common name using a genericAttributeSet. The genericAttributeSet class is derived from _genericAttribute and thus is also realized as generic attribute. Its value is the set of con-tained generic attributes and its name property provides a name identifier for the entire set. Since genericAttrib-uteSet is itself a generic attribute, it may also be contained in a generic attribute set facilitating a recursive nesting of arbitrary depth. The optional codeSpace attribute (of type xs:anyURI) of genericAttributeSet is used to associate the attribute set with an authority, e.g. the organisation or community who defined the attribute set and its contained attributes. By this means, generic attribute sets can be clearly distinguished even if they share the same name.

In order to model generic attributes, the abstract base class _CityObject defined within the CityGML Core module is augmented by the additional property element _genericAttribute using CityGML’s Application Do-main Extension mechanism (cf. chapter 6.12). By this means, each thematic subclass of _CityObject inherits this property and, thus, may be assigned an arbitrary number of generic attributes in order to represent additional properties of features not represented by the explicitly modelled thematic classes of the CityGML data model.

Thus, the Generics module has a deliberate impact on all CityGML extension modules defining thematic sub-classes of _CityObject.

A GenericCityObject may have the attributes class, function and usage defined as gml:CodeType. The class attribute allows an object classification within the thematic area such as pipe, power line, dam, or unknown. The function attribute describes to which thematic area the GenericCityObject belongs (e.g. site, transportation, architecture, energy supply, water supply, unknown etc.). The attribute usage can be used, if the way the object is actually used differs from the function. Both attributes can occur multiple times.

The geometry of a GenericCityObject can either be an explicit GML3 geometry or an ImplicitGeometry (see chapter 8.2). In the case of an explicit geometry the object can have only one geometry for each LOD, which may be an arbitrary 3D GML geometry object (class gml:_Geometry, which is the base class of all GML geome-tries, lodXGeometry, X  [0..4]). Absolute coordinates according to the reference system of the city model must be given for the explicit geometry. In the case of an ImplicitGeometry, a reference point (anchor point) of the object and optionally a transformation matrix must be given. In order to compute the actual location of the object, the transformation of the local coordinates into the reference system of the city model must be processed and the anchor point coordinates must be added. The shape of an ImplicitGeometry can be given as an external resource with a proprietary format, e.g. a VRML or DXF file from a local file system or an external web service. Alternatively the shape can be specified as a 3D GML3 geometry with local cartesian coordinates using the property relativeGeometry (further details are given in chapter 8.2).

In order to specify the exact intersection of the DTM with the 3D geometry of a GenericCityObject, the latter can have TerrainIntersectionCurves for every LOD (cf. chapter 6.5). This is important for 3D visualisation but also for certain applications like driving simulators. For example, if a city wall (e.g., the Great Wall of China) should be represented as a GenericCityObject, a smooth transition between the DTM and the city wall would have to be ensured.

*XML namespace*

The XML namespace of the CityGML Generics module is identified by the Uniform Resource Identifier (URI) http://www.opengis.net/citygml/generics/2.0. Within the XML Schema definition of the Generics module, this URI is also used to identify the default namespace.

==== Generic city object

===== GenericCityObjectType, GenericCityObject

NOTE: insert GenericCityObjectType, GenericCityObject UML

==== Generic attributes

NOTE: insert AbstractGenericAttributeType, _genericAttribute, StringAttributeType, stringAttribute, etc. UML

===== GenericAttributeSetType, genericAttributeSet

NOTE: insert GenericAttributeSetType, genericAttributeSet UML

==== Code lists

The attributes class, function, and usage of the feature GenericCityObject are specified as gml:CodeType. The values of these properties can be enumerated in code lists.



